/*! ZWidgets v1.1 | http://focus-ui.com/ | 2020-05-01 */  
(function(d,h){if(typeof Object.assign!=="function"){Object.defineProperty(Object,"assign",{value:function e(t,r){"use strict";if(t==null){throw new TypeError("Cannot convert undefined or null to object")}var i=Object(t);var n=arguments.length;for(var a=1;a<n;a++){var o=arguments[a];if(o!=null){for(var s in o){if(Object.prototype.hasOwnProperty.call(o,s)){i[s]=o[s]}}}}return i},writable:true,configurable:true})}String.prototype.__z_capitalizeFirst=function(){return this.charAt(0).toUpperCase()+this.substring(1)};if(!String.prototype.startsWith){String.prototype.startsWith=function(e,t){t=!t||t<0?0:+t;return this.substring(t,t+e.length)===e}}if(!String.prototype.endsWith){String.prototype.endsWith=function(e,t){if(t===h||t>this.length){t=this.length}return this.substring(t-e.length,t)===e}}Array.prototype.__z_remove=function(e){var t=this.length;for(var r=0;r<t;r++){if(this[r]===e){this.splice(r,1);return this}}return this};if(!Number.isInteger){Number.isInteger=function(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e}}"use strict";var e={};var r=Object.prototype.toString;var i=Array.prototype.push;var c=Array.prototype.slice;var t={isArray:function(e){return Array.isArray(e)},isString:function(e){return t.isPrimitiveType(e,"String")},isBoolean:function(e){return t.isPrimitiveType(e,"Boolean")},isObject:function(e){return t.isPrimitiveType(e,"Object")},isFunction:function(e){return t.isPrimitiveType(e,"Function")},isNumber:function(e){return t.isPrimitiveType(e,"Number")},isPrimitiveType:function(e,t){if(t){t="[object "+t+"]";return r.apply(e)===t}return false}};var m=t.isArray;var n=t.isString;var o=t.isBoolean;var y=t.isObject;var b=t.isFunction;var a=t.isNumber;var s={merge:function(e){var t=arguments.length;for(var r=1;r<t;r++){i.apply(e,arguments[r])}return e},each:function(e,t,r){var i=e.length;for(var n=0;n<i;n++){if(t.apply(r,[e[n],n])===false){return}}},filter:function(e,t,r){return e.filter(t,r)},find:function(e,t,r){var i=e.length;for(var n=0;n<i;n++){if(t.apply(r,[e[n],n])===true){return e[n]}}return h},removeItem:function(e,t,r){var i=e.length;for(var n=0;n<i;n++){var a=e[n];if(t.apply(r,[a,n])===true){e.splice(n,1);return a}}return h},toMap:function(e,t,r){var i={};if(b(t)){e.forEach(function(e){i[t.apply(r,[e])]=e})}else{e.forEach(function(e){i[e[t]]=e})}return i}};var l=s.merge;var u=s.each;var f=s.filter;var _=s.find;var p=s.removeItem;var v=s.toMap;var g={merge:function(){return Object.assign.apply(null,arguments)},deepMerge:function(t){var e=arguments.length;var r={};for(var i=1;i<e;i++){var n=arguments[i];Object.keys(n).forEach(function(e){g.createKVMap(r,e,n[e])})}Object.keys(r).forEach(function(e){g.setDeepValue(t,e,r[e])});return t},getObjectKVMap:function(t){var r={};Object.keys(t).forEach(function(e){g.createKVMap(r,e,t[e])});return r},createKVMap:function(t,e,r){if(y(r)){var i=e+".";Object.keys(r).forEach(function(e){g.createKVMap(t,i+e,r[e])})}else{t[e]=r}},each:function(e,t,r){var i=Object.keys(e);var n=i.length;for(var a=0;a<n;a++){var o=i[a];if(t.apply(r,[o,e[o]])===false){return}}},filter:function(e,t,r){var i=Object.keys(e);var n=i.length;var a={};for(var o=0;o<n;o++){var s=i[o];var l=e[s];if(t.apply(r,[s,l])===true){a[s]=l}}return a},getDeepValue:function(e,t,r){r=r||".";var i=t.split(r);var n=i.length;if(n===1){return e[t]}var a;var o=i[0];if(!e.hasOwnProperty(o)){a=h}else{a=e[o];var s=n-1;if(y(a)){var l=1;while(l<n){o=i[l];if(a.hasOwnProperty(o)){a=a[o];if(l!==s&&!y(a)){a=h;break}}else{a=h;break}l++}}else{a=h}}return a},setDeepValue:function(e,t,r,i){i=i||".";var n=t.split(i);var a=n.length;if(a===1){e[t]=r;return}var o=n[0];var s=e[o];if(!y(s)){s={};e[o]=s}var l=1;var d=a-1;while(l<d){o=n[l];var h=s[o];if(!y(h)){h={};s[o]=h}s=h;l++}s[n[d]]=r},getValues:function(e){var t=Object.keys(e);var r=t.length;var i=[];for(var n=0;n<r;n++){i.push(e[t[n]])}return i}};if(Object.values){g.getValues=function(e){return Object.values(e)}}var D=g.merge;var C=g.deepMerge;var R=g.each;var w=g.filter;var P=g.getDeepValue;var x=g.setDeepValue;var A=g.getValues;var k={i18n_map:Object.create(null),i18n_count:0,getLabel:function(e,t){var r=k.i18n_map[t||k.getLocal()];if(r){var i=P(r,e);if(i!=null){return i}}return""},setLocal:function(e){k.local=e},getLocal:function(){return k.local},add:function(e,t,r){var i=k.i18n_map[e];if(i){if(r===true){if(y(t)){k.i18n_map[e]=t}else{delete k.i18n_map[e];k.i18n_count--}}else{C(i,t)}}else{if(y(t)){k.i18n_map[e]=t;if(k.i18n_count===0&&k.local==null){k.setLocal(e)}k.i18n_count++}}}};var T={extend:function(d,e,t){var r=function(){};r.prototype=e.prototype;d.prototype=new r;d.prototype.constructor=d;d.superClass=e.prototype;d.__zsuperClass_=e;if(t){R(t,function(e,t){if(e.indexOf("___z")===0){if(e==="___zdefaults_"){if(t){R(t,function(e,t){T.setClassDefault(d,e,t)})}}else{var r="";if(e==="___zsg"){r="get"}else if(e==="___zsi"){r="is"}var i=t.length;for(var n=0;n<i;n++){var a=t[n];if(a){var o=a.trim();if(o){var s=T.getSetFuncName(o);var l=T.getGetFuncName(o,r);d.prototype[s]=T.createSetFunc(o);d.prototype[l]=T.createGetFunc(o)}}}}}else{if(e==="__className_"){T.__classNameMap[t]=d;d.__className_=t}else{d.prototype[e]=t}}})}},getSetFuncName:function(e){var t=e.split("_");var r="set";t.forEach(function(e){r+=e.__z_capitalizeFirst()});return r},getGetFuncName:function(e,t){var r=e.split("_");var i=t;r.forEach(function(e){i+=e.__z_capitalizeFirst()});return i},createSetFunc:function(t){return function(e){this.setProperty(t,e)}},createGetFunc:function(e){return function(){return this.getProperty(e)}},getClassDefault:function(e,t){var r=e.___zdefaults_;if(r==null||!r.hasOwnProperty(t)){if(e.__zsuperClass_){return T.getClassDefault(e.__zsuperClass_,t)}else{return null}}return r[t]},setClassDefault:function(e,t,r){var i=e.___zdefaults_;if(i==null){i={};e.___zdefaults_=i}i[t]=r},_setClassDefault:function(r,e,t){var i=arguments.length;if(i===2){R(e,function(e,t){T.setClassDefault(r,e,t)})}else if(i>2){T.setClassDefault(r,e,t)}},_extendPrototype:function(r,e,t){var i=arguments.length;if(i===2){R(e,function(e,t){r.prototype[e]=t})}else if(i>2){r.prototype[e]=t}},__classNameMap:{},createInstance:function(e,t){if(!e){return null}if(n(e)){e=T.getClassByName(e)}if(e){if(arguments.length===2){return T.__createInstance(e,t)}else{return new e}}return null},__createInstance:function(e,t){var r=t.length;switch(r){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);case 9:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]);case 10:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]);case 11:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10]);case 12:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]);case 13:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12]);case 14:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13]);case 15:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14]);case 16:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[14]);default:throw new Error("So many parameters(>16) are not supported...")}},getClassByName:function(e){if(T.__classNameMap.hasOwnProperty(e)){return T.__classNameMap[e]}else{var t=e.split(".");var r=t.length;var i=null;if(r>0){var n=d[t[0]];var a=1;while(n&&a<r){n=n[t[a]];a++}i=n}return i}}};var E=T.extend;var S=function(){this._array=[];this._map={}};E(S,Object,{add:function(e,t,r){if(this.has(e)===true){var i=this._map[e];if(i===t){return}this._array.__z_remove(i)}this._map[e]=t;if(arguments.length>=3){this._array.splice(r,0,t)}else{this._array.push(t)}},remove:function(e){var t;if(this.has(e)===true){t=this._map[e];delete this._map[e];this._array.__z_remove(t)}return t},clear:function(){this._array.length=0;this._map={}},has:function(e){return this._map.hasOwnProperty(e)},get:function(e){return this._map[e]},keys:function(){return Object.keys(this._map)},size:function(){return this._array.length},toArray:function(e){if(e===false){return this._array}return l([],this._array)},eachObject:function(e,t){return R(this._map,e,t)},eachArray:function(e,t){return u(this._array,e,t)},findArray:function(e,t){return _(this._array,e,t)},filterArray:function(e,t){return f(this._array,e,t)}});var L=d.setTimeout;var V=d.clearTimeout;var M={__callLaterListMap:new S,__callIntervalListMap:new S,__callRAFIntervalListMap:new S,callBatch:function(e,t){t=t||{};var r=t.object||t.context||d;var i=t.key||"_call_batch_key";if(r[i]!==true){r[i]=true;var n=function(){e.apply(t.context);if(t.reset!==false){delete r[i]}};M.callRAFLater(n);return true}return false},callLater:function(t,e,r){var i=N.guid();var n=function(){var e=n.id;if(e!=null){t.apply(r,[]);M.__deleteCallLater(e)}};n.id=i;var a=M.__setTimeout(n,e);M.__callLaterListMap.add(i,{id:i,timeout_id:a,later_callBack:n,callBack:t,delay:e,context:r});return i},cancelCallLater:function(t,r,i){if(!b(t)){M.__deleteCallLater(t)}else{M.__callLaterListMap.eachArray(function(e){if(e.callBack===t&&e.delay===r&&e.context===i){M.__deleteCallLater(e.id);return false}else{return true}})}},callInterval:function(t,r,i,e){if(e===true){if(t.apply(i)===false){return}}var n=N.guid();var a=function(){var e=a.id;if(e!=null){if(t.apply(i,arguments)!==false){M.__setTimeout(a,r)}else{M.__deleteInterval(e)}}};a.id=n;M.__callIntervalListMap.add(n,{id:n,later_callBack:a,callBack:t,delay:r,context:i});M.__setTimeout(a,r);return n},cancelCallInterval:function(t,r,i){if(!b(t)){M.__deleteInterval(t)}else{M.__callIntervalListMap.eachArray(function(e){if(e.callBack===t&&e.delay===r&&e.context===i){M.__deleteInterval(e.id);return false}else{return true}})}},callRAFLater:function(e,t){return M.requestAnimationFrame(e,t)},callRAFInterval:function(t,r,e){if(e===true){var i=t.apply(r);if(i===false){return}}var n=N.guid();var a=function(){var e=a.id;if(e!=null){if(t.apply(r,arguments)!==false){M.requestAnimationFrame(a)}else{M.__deleteRAFInterval(e)}}};a.id=n;M.__callRAFIntervalListMap.add(n,{id:n,later_callBack:a,callBack:t,context:r},a);M.requestAnimationFrame(a);return n},cancelCallRAFInterval:function(t,r){if(!b(t)){M.__deleteRAFInterval(t)}else{M.__callRAFIntervalListMap.eachArray(function(e){if(e.callBack===t&&e.context===r){M.__deleteRAFInterval(e.id);return false}else{return true}})}},__setTimeout:function(e,t,r){var i=e;if(r!=null){i=e.bind(r)}return L(i,t)},__deleteCallLater:function(e){var t=M.__callLaterListMap.remove(e);if(t){var r=t.later_callBack;delete r.id;var i=t.timeout_id;if(i){V(i)}}},__deleteInterval:function(e){var t=M.__callIntervalListMap.remove(e);if(t){var r=t.later_callBack;delete r.id}},__deleteRAFInterval:function(e){var t=M.__callRAFIntervalListMap.remove(e);if(t){var r=t.later_callBack;delete r.id}}};M.__raf=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||d.msRequestAnimationFrame;if(M.__raf){M.requestAnimationFrame=function(e,t){if(e){var r=e;if(t!=null){r=e.bind(t)}return M.__raf.call(d,r)}return h}}else{M.requestAnimationFrame=function(e,t){return M.__setTimeout(e,17,t)}}var I=M.callBatch;var z=M.callLater;var O=M.callInterval;var U=M.callRAFLater;var B=M.callRAFInterval;var N={__uid:0,guid:function(){return"_z-i-"+N.__uid++},throwError:function(e){throw new Error(e)}};var H={};var $=function(e){if(!(this instanceof $)){N.throwError("Instance must be constructed via new")}this.__props__={};this.__getProps__={};if(y(e)){R(e,function(e,t){if(b(t)){this[e]=t}else{this.__initSetProperty(e,t)}},this)}};E($,Object,{_bind:function(i){if(y(i)){var n=this;R(i,function(t,e){var r=e;Object.defineProperty(i,t,{set:function(e){r=e;if(b(r)){n[t]=r}else{n.setProperty(t,r)}},get:function(){return r}})})}},setCallBack:function(e,t,r){this["_default_"+e]=this.constructor.prototype[e];this[e]=function(){t.apply(r||this,arguments)}},resetCallBack:function(e){this[e]=this["_default_"+e]},getClassName:function(){return this.constructor.__className_},set:function(e,t){return this.setProperty.apply(this,arguments)},setProperty:function(e,t){var r=arguments.length;if(r===1&&y(e)){R(e,function(e,t){this._setProperty(e,t)},this)}else{if(r>1){this._setProperty(e,t)}}return this},isPropertyValid:function(e,t,r){return true},beforeSetProperty:function(e,t,r){},afterSetProperty:function(e,t,r){},__initSetProperty:function(e,t){var r=this.__props__[e];if(this.isPropertyValid(e,t,r)===false){return this}this.beforeSetProperty(e,t,r);this.__props__[e]=t;delete this.__getProps__[e];this.afterSetProperty(e,t,r);return this},_setProperty:function(e,t){var r=h;if(this.hasProperty(e)){r=this.__props__[e];if(r===t){return this}}if(this.isPropertyValid(e,t,r)===false){return this}this.beforeSetProperty(e,t,r);this.__props__[e]=t;delete this.__getProps__[e];this.afterSetProperty(e,t,r);if(r!==t){this._onPropertyChange(e,t,r)}return this},_onPropertyChange:function(e,t,r){},get:function(e){return this.getProperty(e)},getProperty:function(e){if(this.__getProps__.hasOwnProperty(e)){return this.__getProps__[e]}var t=this._getProperty(e);this.__getProps__[e]=t;return t},_getProperty:function(e){if(this.hasProperty(e)){return this.__props__[e]}return T.getClassDefault(this.constructor,e)},remove:function(e){return this.removeProperty(e)},removeProperty:function(e){if(this.hasProperty(e)){var t=this.__props__[e];if(t!==h){if(this.isPropertyValid(e,h,t)===false){return this}this.beforeSetProperty(e,h,t);delete this.__props__[e];delete this.__getProps__[e];this.afterSetProperty(e,h,t);this._onPropertyChange(e,h,t)}else{delete this.__props__[e];delete this.__getProps__[e]}}return this},has:function(e){return this.hasProperty(e)},hasProperty:function(e){return this.__props__.hasOwnProperty(e)},gets:function(){if(arguments.length===0){return this.getProperties()}var e=arguments[0];if(e===false){return this.getProperties(false)}var t={};if(m(e)){e.forEach(function(e){t[e]=this.getProperty(e)},this);return t}return t},getProperties:function(e){if(e===false){return this.__props__}return D({},this.__props__)}});var W=function(){this._typeListenersMap=Object.create(null)};E(W,Object,{add:function(e,t,r){var i=this._typeListenersMap[e];if(i==null){i=[];this._typeListenersMap[e]=i}var n={listener:t,context:r};i.push(n);return n},remove:function(e,t,r){var i=this._typeListenersMap[e];if(i){var n=i.length;for(var a=0;a<n;a++){var o=i[a];if(o.listener===t&&o.context===r){i.splice(a,1);return}}}},dispatch:function(e,t){var r=this._typeListenersMap[e];if(r){var i=r.length;for(var n=0;n<i;n++){var a=r[n];var o=a.listener;var s=a.context;o.apply(s,[t])}}}});var F=function(){this._dispatcher=new W;F.superClass.constructor.apply(this,arguments)};E(F,$,{_onPropertyChange:function(e,t,r){F.superClass._onPropertyChange.apply(this,arguments);this.dispatchChangeEvent(e,t,r)},getDispatcher:function(){return this._dispatcher},addListener:function(e,t,r){this._dispatcher.add(e,t,r)},removeListener:function(e,t,r){this._dispatcher.remove(e,t,r)},dispatchEvent:function(e,t){this._dispatcher.dispatch(e,t)},addChangeListener:function(e,t){this.addListener("change",e,t)},removeChangeListener:function(e,t){this.removeListener("change",e,t)},dispatchChangeEvent:function(e,t,r){this.dispatchEvent("change",{source:this,property:e,new_value:t,old_value:r})}});var j=d.localStorage;var G=d.sessionStorage;var q={setCookie:function(e,t,r){var i;if(arguments.length>2){var n=new Date;n.setTime(n.getTime()+r*6e4);i=t+"; expires="+n.toUTCString()}else{i=t}document.cookie=e+"="+i},getCookie:function(e){var t=document.cookie.match(new RegExp(e+"=([^;]+)"));return!!t?t[1]:h},removeCookie:function(e){q.setCookie(e,"",-1)}};var X={setItem:function(e,t,r){if(arguments.length>2){var i=(r|0)*6e4+Date.now();j.setItem(e,JSON.stringify({_zexpires_time:Date.now()+i,value:t}))}else{j.setItem(e,JSON.stringify(t))}},getItem:function(e){var t=j.getItem(e);if(t){t=JSON.parse(t);if(y(t)){if(t.hasOwnProperty("_zexpires_time")){var r=t._zexpires_time;if(r<Date.now()){return h}return t.value}}return t}return h},removeItem:function(t){if(b(t)){Object.keys(j).forEach(function(e){if(t(e)===true){j.removeItem(e)}})}else{return j.removeItem(t)}},clear:function(){return j.clear()}};var J={setItem:function(e,t,r){if(arguments.length>2){var i=(r|0)*6e4+Date.now();G.setItem(e,JSON.stringify({_zexpires_time:Date.now()+i,value:t}))}else{G.setItem(e,JSON.stringify(t))}},getItem:function(e){var t=G.getItem(e);if(t){t=JSON.parse(t);if(y(t)){if(t.hasOwnProperty("_zexpires_time")){var r=t._zexpires_time;if(r<Date.now()){return h}return t.value}}return t}return h},removeItem:function(t){if(b(t)){Object.keys(G).forEach(function(e){if(t(e)===true){G.removeItem(e)}})}else{return G.removeItem(t)}},clear:function(){return G.clear()}};var K={getURLQuery:function(e){var t=location.search;if(arguments.length===0){var n={};t.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,r,i){n[t]=i});return n}else{var r=new RegExp("[?&]"+e.replace(/[\[\]]/g,"\\$&")+"(=([^&#]*)|&|#|$)").exec(t);if(r){return r[2]}return h}},getURLHash:function(e){var t=location.hash;if(t){if(arguments.length===0){return t.substr(1)}else{var r=location.hash.match(new RegExp(e+"=([^&]*)"));return r?r[1]:""}}return""},getQueryString:function(e){if(e){if(n(e)){return e}else if(y(e)){var r=[];R(g.getObjectKVMap(e),function(e,t){r.push(encodeURI(e+"="+t))});return r.join("&")}}return""}};var Y={};(function(){var e=function(){var e=navigator.userAgent;var t;var r=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1])){t=/\brv[ :]+(\d+)/g.exec(e)||[];return["IE",t[1]]}else if(r[1]==="Chrome"){t=e.match(/\b(OPR|Edge)\/(\d+)/);if(t!=null){t=t.slice(1);return t}}r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"];if((t=e.match(/version\/(\d+)/i))!=null){r.splice(1,1,t[1])}return r}();if(e){var t=e[0];if(t){t=t.toLowerCase();if(t==="ie"||t==="msie"){t="IE"}else if(t==="opr"){t="Opera"}else{t=t.__z_capitalizeFirst()}}Y.browser=t;Y.version=e[1]|0}else{Y.browser="Unknown"}})();if(Element){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector}if(!Element.prototype.closest){Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}}}if(d.parent!==d){N.nowTime=Date.now();N.guid=function(){return"_z-t-"+N.nowTime+"-i-"+N.__uid++}}var Q=Y.browser==="IE";var Z={querySelector:function(e,t){if(arguments.length>1){return t.querySelector(e)}else{return document.querySelector(e)}},querySelectorAll:function(e,t){var r;if(arguments.length>1){r=t.querySelectorAll(e)}else{r=document.querySelectorAll(e)}var i=[];u(r,function(e){i.push(e)});return i},querySelectorChild:function(e,t){t=Z.queryElement(t);if(t){return _(Z.querySelectorAll(e,t),function(e){return e.parentNode===t})}return null},querySelectorChildren:function(e,t){t=Z.queryElement(t);if(t){return f(Z.querySelectorAll(e,t),function(e){return e.parentNode===t})}return[]},queryElement:function(e){if(n(e)){return Z.querySelector.apply(null,arguments)}if(me(e)){return e}return null}};var ee=Z.querySelector;var te=Z.querySelectorAll;var re=Z.queryElement;var ie={add:function(e,t){t=ie.formatClass(c.call(arguments,1));var r=e.classList;r.add.apply(r,t)},remove:function(e,t){t=ie.formatClass(c.call(arguments,1));var r=e.classList;r.remove.apply(r,t)},toggle:function(e,t,r){var i=e.classList;var n=c.call(arguments,1);var a=arguments[arguments.length-1];if(o(a)){r=a;n.pop();n=ie.formatClass(n);n.forEach(function(e){i.toggle.apply(i,[e,r])})}else{n=ie.formatClass(n);n.forEach(function(e){i.toggle.apply(i,[e])})}},set:function(e,t){t=ie.formatClass(c.call(arguments,1));e.className=t.join(" ")},contains:function(e,t){return e.classList.contains(t)},formatClass:function(e){var r=[];e.forEach(function(e){if(e){if(e.indexOf(" ")>=0){var t=e.split(" ");t.forEach(function(e){if(e){r.push(e)}})}else{r.push(e)}}});return r}};if(Q){ie.add=function(e){var t=e.className.split(" ");ie.formatClass(c.call(arguments,1)).forEach(function(e){if(t.indexOf(e)<0){t.push(e)}});e.className=t.join(" ")};ie.remove=function(e){var t=e.className.split(" ");var r=ie.formatClass(c.call(arguments,1));var i=f(t,function(e){return r.indexOf(e)<0});e.className=i.join(" ")};ie.toggle=function(t,e,r){var i=c.call(arguments);var n=arguments[arguments.length-1];if(o(n)){r=n;i.pop();if(r===true){ie.add.apply(ie,i)}else{ie.remove.apply(ie,i)}}else{i=ie.formatClass(i);i.forEach(function(e){if(ie.contains(t,e)){ie.remove(t,e)}else{ie.add(t,e)}})}};ie.contains=function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))!=null}}var ne=ie.add;var ae=ie.remove;var oe=ie.set;var se=ie.toggle;var le=ie.contains;var de=ie.formatClass;var he={setStyle:function(e,t,r){e.style[t]=r},getStyle:function(e,t){return d.getComputedStyle(e,null).getPropertyValue(t)},removeStyle:function(e,t){e.style[t]=""},formatStyle:function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}};var ce=he.setStyle;var ue=he.getStyle;var fe=he.removeStyle;var _e=he.formatStyle;var pe={__valueHooks:{multiple_select:{setValue:function(e,r){var t=e.options;if(t.length===0){return}if(r==null){u(t,function(e){e.selected=false})}if(!m(r)){r=[r]}u(t,function(e){var t;if(e.hasAttribute("value")){t=e.value}else{t=e.text}e.selected=r.indexOf(t)>=0})},getValue:function(e){var t=[];u(e.options,function(e){if(e.selected===true){if(e.hasAttribute("value")){t.push(e.value)}else{t.push(e.text)}}});return t}},radio:{setValue:function(e,t){var r=e.getAttribute("name");if(r){te("input[type='radio'][name='"+r+"']").forEach(function(e){e.checked=e.value===t})}else{e.checked=t===true}},getValue:function(e){var t=e.getAttribute("name");if(t){var r=ee("input[type='radio'][name='"+t+"']:checked");if(r){return r.value}return null}return e.checked}}},setValue:function(e,t){var r=pe.getValueField(e);var i=pe.__valueHooks[r];if(i){return i.setValue(e,t)}return e[r]=t},getValue:function(e){var t=pe.getValueField(e);var r=pe.__valueHooks[t];if(r){return r.getValue(e)}return e[t]},getValueField:function(e){if(Ce.isInput(e)){if(Ce.isCheckBox(e)){return"checked"}if(Ce.isRadio(e)){return"radio"}if(Ce.isFileInput(e)){return"files"}return"value"}if(Ce.isSelect(e)){if(Ce.isMultipleSelect(e)){return"multiple_select"}return"value"}if(Ce.isTextArea(e)){return"value"}if(Ce.isImage(e)){return"src"}return"innerHTML"}};var ve=pe.getValue;var ge=pe.setValue;var Ce={isTagType:function(e,t){return e.tagName===t},isInput:function(e){return Ce.isTagType(e,"INPUT")},isCheckBox:function(e){if(Ce.isInput(e)){return Ce.isAttributeType(e,"CHECKBOX")}return false},isRadio:function(e){if(Ce.isInput(e)){return Ce.isAttributeType(e,"RADIO")}return false},isFileInput:function(e){if(Ce.isInput(e)){return Ce.isAttributeType(e,"FILE")}return false},isTextArea:function(e){return Ce.isTagType(e,"TEXTAREA")},isSelect:function(e){return Ce.isTagType(e,"SELECT")},isMultipleSelect:function(e){if(Ce.isSelect(e)){return e.hasAttribute("multiple")}return false},isImage:function(e){return Ce.isTagType(e,"IMG")},isElement:function(e){if(e){if(typeof e==="object"){return e.nodeType===1&&typeof e.nodeName==="string"&&e.style!=null&&typeof e.style==="object"&&typeof e.clientWidth==="number"}}return false},isAttributeType:function(e,t){var r=e.getAttribute("type");if(r){return r.toUpperCase()===t}return false}};var me=Ce.isElement;var ye=Ce.isTagType;var be={getWindowPageOffset:function(){var e=document.documentElement;var t=d.pageXOffset||e.scrollLeft||0;var r=d.pageYOffset||e.scrollTop||0;var i=e.clientLeft||0;var n=e.clientTop||0;return{x:t-i,y:r-n}},getWindowSize:function(){var e=document.body;var t=document.documentElement;return{width:d.innerWidth||t.clientWidth||e.clientWidth,height:d.innerHeight||t.clientHeight||e.clientHeight}},getWindowPageBounds:function(){var e=be.getWindowPageOffset();var t=be.getWindowSize();return{x:e.x,y:e.y,width:t.width,height:t.height}},getElementWindowOffset:function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}},getElementPageOffset:function(e){var t=e.getBoundingClientRect();var r=be.getWindowPageOffset();return{x:r.x+t.left,y:r.y+t.top}},getElementWindowBounds:function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,width:t.width,height:t.height,left:t.left,top:t.top,right:t.right,bottom:t.bottom}},getEventWindowOffset:function(e){return{x:e.clientX,y:e.clientY}},getEventPageOffset:function(e){var t=e.pageX;if(t==null){var r=be.getWindowPageOffset();return{x:e.clientX+r.x,y:e.clientY+r.y}}else{return{x:t,y:e.pageY}}}};var De={create:function(e,t){var r=document.createElement(e);if(t!=null){r.className=t}return r},remove:function(e){var t=e.parentNode;if(t){t.removeChild(e)}return e},appendText:function(e,t){e.appendChild(document.createTextNode(t))},empty:function(e){while(e.lastChild){e.removeChild(e.lastChild)}},scrollIntoView:function(e,t,r){r=r||10;var i=e.offsetTop;var n=t.scrollTop;var a=e.offsetHeight;var o=t.clientHeight;if(i<n+r){t.scrollTop=i-r}else if(i+a>n+o-r){t.scrollTop=i+a+r-o}var s=e.offsetLeft;var l=t.scrollLeft;var d=e.offsetWidth;var h=t.clientWidth;if(s-r<l){t.scrollLeft=s-r}else if(s+d+r>l+h){t.scrollLeft=s+d+r-h}},isInDom:function(e){return document.contains(e)}};if(!document.contains){De.isInDom=function(e){return document.body.contains(e)}}var Re=De.create;var we=De.remove;var Pe=De.empty;var xe=De.appendText;var Ae=De.isInDom;var ke={stop:function(e){e.stopPropagation()},prevent:function(e){e.preventDefault()},ctrl:function(e){return e.ctrlKey===true},shift:function(e){return e.shiftKey===true},alt:function(e){return e.altKey===true},meta:function(e){return e.metaKey===true},keyboardKey:function(e,t){return e.key===t}};var Te={getModifierHandler:function(e,t,r){if(ke.hasOwnProperty(t)){return ke[t]}if(e==="keydown"||e==="keyup"||e==="keypress"){return ke.keyboardKey}}};var Ee={_wrapperList:[],addEventListener:function(e,t,r,i){var n=Ee._addWrapper(e,t,r,i);e.addEventListener(n._event,n._listener,false)},removeEventListener:function(e,t,r,i){var n=Ee._removeWrapper(e,t,r,i);if(n){e.removeEventListener(n._event,n._listener,false)}},getEventTarget:function(e,t){return e.target.closest(t)},_addWrapper:function(e,t,n,a){var r=t.split(".");var o=r[0];var i;if(r.length<=1){i=function(e){n.apply(a,arguments)}}else{var s=r.slice(1);i=function(r){var i=true;u(s,function(e){var t=Te.getModifierHandler(o,e,r);if(t&&t(r,e)===false){i=false;return false}});if(i===false){return}n.apply(a,arguments)}}var l={element:e,type:t,listener:n,context:a,_event:o,_listener:i};Ee._wrapperList.push(l);return l},_removeWrapper:function(r,i,n,a){return p(Ee._wrapperList,function(e,t){return e.element===r&&e.type===i&&e.listener===n&&e.context===a})},addTypeEventListener:function(e,t,r,i){if(t==="resize"){return ze.addResizeListener(e,r,i)}else if(t==="wheel"){return Ue.addWheelListener(e,r,i)}return Ee.addEventListener(e,t,r,i)},removeTypeEventListener:function(e,t,r,i){if(t==="resize"){return ze.removeResizeListener(e,r,i)}else if(t==="wheel"){return Ue.removeWheelListener(e,r,i)}return Ee.removeEventListener(e,t,r,i)}};var Se=Ee.addEventListener;var Le=Ee.removeEventListener;var Ve=Ee.addTypeEventListener;var Me=Ee.removeTypeEventListener;var Ie={_readyListeners:[],addReadyListener:function(e,t){if(Ie._isDocumentReady()){e.apply(t)}else{if(Ie._readyListeners.length===0){Ee.addEventListener(document,"DOMContentLoaded",Ie._handleReady)}Ie._readyListeners.push({listener:e,context:t})}},_handleReady:function(t){U(function(){Ie._readyListeners.forEach(function(e){e.listener.apply(e.context,[t])})})},_isDocumentReady:function(){var e=document.readyState;if(e==="complete"){return true}if(!document.body){return false}return e==="interactive"}};var ze={_createResizeTrigger:function(e){var t=document.createElement("object");t.__ze_resize_element__=e;e.__ze_resize_trigger__=t;t.setAttribute("style","display:block;position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden;opacity:0;pointer-events:none;z-index: -1;");t.onload=ze._handleObjLoad;t.type="text/html";U(function(){e.insertBefore(t,e.firstChild);t.data="about:blank"});return t},_handleObjLoad:function(e){this.contentDocument.defaultView.__ze_resize_trigger__=this.__ze_resize_element__;this.contentDocument.defaultView.addEventListener("resize",ze._handleResize)},_handleResize:function(i){var e=i.target||i.srcElement;var t=e.__ze_resize_trigger__;t.__ze_resize_listeners__.forEach(function(e){var t=e.listener;var r=e.context;t.apply(r,[i])})}};if(document.attachEvent){ze.addResizeListener=function(e,t,r){var i=e.__ze_resize_listeners__;if(!i){i=[];e.__ze_resize_listeners__=i;e.__ze_resize_trigger__=e;e.attachEvent("onresize",ze._handleResize)}i.push({listener:t,context:r})};ze.removeResizeListener=function(e,t,r){var i=e.__ze_resize_listeners__;if(i){p(i,function(e){return e.listener===t&&e.context===r});if(i.length===0){e.detachEvent("onresize",ze._handleResize);delete e.__ze_resize_listeners__}}}}else{ze.addResizeListener=function(e,t,r){var i=e.__ze_resize_listeners__;if(!i){i=[];e.__ze_resize_listeners__=i;if(he.getStyle(e,"position")==="static"){he.setStyle(e,"position","relative")}ze._createResizeTrigger(e)}i.push({listener:t,context:r})};ze.removeResizeListener=function(e,t,r){var i=e.__ze_resize_listeners__;if(i){p(i,function(e){return e.listener===t&&e.context===r});if(i.length===0){var n=e.__ze_resize_trigger__;if(n){n.contentDocument.defaultView.removeEventListener("resize",ze._handleResize);e.removeChild(n);delete e.__ze_resize_trigger__}delete e.__ze_resize_listeners__}}}}var Oe="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==h?"mousewheel":"MozMousePixelScroll";var Ue={addWheelListener:function(e,t,r){Ee.addEventListener(e,Oe,t,r)},removeWheelListener:function(e,t,r){Ee.removeEventListener(e,Oe,t,r)}};var Be={_clickListeners:[],addClickListener:function(e,t){if(Be._clickListeners.length===0){Se(document,"click",Be._handleClick)}Be._clickListeners.push({listener:e,context:t})},removeClickListener:function(t,r){p(Be._clickListeners,function(e){return e.listener===t&&e.context===r});if(Be._clickListeners.length===0){Le(document,"click",Be._handleClick)}},_handleClick:function(t){Be._clickListeners.forEach(function(e){e.listener.apply(e.context,[t])})}};var Ne={timeout:12e4,headers:{"X-Requested-With":"XMLHttpRequest"}};var He={get:function(e){var t=c.call(arguments);t.unshift("GET");return He.ajax.apply(null,t)},post:function(e){var t=c.call(arguments);t.unshift("POST");return He.ajax.apply(null,t)},ajax:function(r,i){r=r.toUpperCase();var n=He._getAjaxParams.apply(null,c.call(arguments,2));if(d.Promise){return new Promise(function(e,t){He._request(r,i,n,e,t)})}else{He._request(r,i,n)}},_request:function(e,t,r,i,n){var a=r.data;var o=r.complete,s=r.context;var l=r.timeout||Ne.timeout;var d=r.responseType;var h=r.headers;var c=r.data_type;var u=r.async!==false;var f,_;if(b(Ne.beforeSend)){f=Ne.beforeSend}if(b(Ne.complete)){_=Ne.complete}if(e==="GET"&&a!=null){var p=K.getQueryString(a);if(p){t=t+(/\?/.test(t)?"&":"?")+p}a=null}var v=D({},Ne.headers);if(a){if(y(a)||m(a)){v["Content-Type"]="application/json; charset=utf-8";a=JSON.stringify(a)}else if(e==="POST"){v["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8"}}var g=false;var C=new XMLHttpRequest;if(u){C.onreadystatechange=function(){if(C.readyState===XMLHttpRequest.DONE){g=true;He._callBack(C,c,o,s,i,n);if(_){_(C)}}}}if(d){C.responseType=d}C.open(e,t,u);R(D(v,h),function(e,t){if(t!==false){C.setRequestHeader(e,t)}});if(f){f(C)}C.send(a);if(u===false){He._callBack(C,c,o,s,i,n);if(_){_(C)}}else{z(function(){if(g===true){return}if(C){C.onreadystatechange=null}if(o){o.apply(s,[408])}if(_){_(C,true)}if(n){n(408)}C=null},l)}},_callBack:function(e,t,r,i,n,a){var o=e.status;var s;if(!t){var l=e.getResponseHeader("Content-Type");if(l.indexOf("json")>=0){t="JSON"}}else{t=t.trim().toUpperCase()}if(t){s=e.responseText;if(t==="JSON"){s=JSON.parse(s)}}else{s=e.response}if(r){r.apply(i,[o,s])}if(n){n(s)}},_getAjaxParams:function(){var e;var t=arguments.length;if(t===1){e=arguments[0]}else if(t>1){e=D({data:arguments[0]},arguments[1])}if(!y(e)){return{}}return e},setup:function(e){C(Ne,e)}};var $e={jsonp:function(e){var t=He._getAjaxParams.apply(null,c.call(arguments,1));var r=t.data;var i=t.complete,n=t.context;var a=t.timeout||Ne.timeout;if(r){var o=K.getQueryString(r);if(o){e=e+(/\?/.test(e)?"&":"?")+o}}var s="_z_jsonp_callback_"+Date.now();var l=false;d[s]=function(e){l=true;delete d[s];i.apply(n,[false,true,e])};e=e+(/\?/.test(e)?"&":"?")+"callback="+s;$e._loadJS(e);z(function(){if(l===true){return}delete d[s];i.apply(n,[true])},a)},_loadJS:function(e){var t=document.createElement("script");t.type="text/javascript";t.onload=function(){t.onload=null;t.parentNode.removeChild(t)};t.onerror=function(){t.onerror=null;t.parentNode.removeChild(t)};var r=ee("head")||ee("body");r.appendChild(t);t.src=e}};e.$={TypeCheck:t,ArrayUtil:s,ObjectUtil:g,I18nUtil:k,ClassUtil:T,ArrayMap:S,TimeUtil:M,Util:N,Defaults:H,ZObject:$,EventDispatcher:W,ChangeSupport:F,CookieUtil:q,LocalStorageUtil:X,SessionStorageUtil:J,URLUtil:K,BrowserUtil:Y,DomQuery:Z,DomClass:ie,DomStyle:he,DomValue:pe,DomType:Ce,DomGeom:be,DomUtil:De,DomEventUtil:Ee,DomReadyEventUtil:Ie,DomResizeEventUtil:ze,DomWheelEventUtil:Ue,DomClickEventUtil:Be,AjaxUtil:He,JSONPUtil:$e};e.util={isArray:m,isString:n,isBoolean:o,isObject:y,isFunction:b,isNumber:a,mergeArray:l,eachArray:u,filterArray:f,findArray:_,removeArrayItem:p,toArrayMap:v,mergeObject:D,deepMergeObject:C,eachObject:R,filterObject:w,getObjectDeepValue:P,setObjectDeepValue:x,getObjectValues:A,extendClass:E,callBatch:function(e,t,r,i,n){r=r||d;i=i||"_call_batch_flag";I(e,t,r,i,n)},callLater:function(e,t,r){if(t==null||t<=0){t=20}return z(e,t,r)},cancelCallLater:function(e,t,r){if(t==null||t<=0){t=20}return M.cancelCallLater(e,t,r)},callInterval:function(e,t,r,i){if(t==null||t<=0){t=20}return O(e,t,r,i)},cancelCallInterval:function(e,t,r){if(t==null||t<=0){t=20}return M.cancelCallInterval(e,t,r)},callRAFLater:U,callRAFInterval:B,cancelCallRAFInterval:M.cancelCallRAFInterval};e.dom={query:function(e,t){if(t){t=re(t);if(t){return re(e,t)}return null}return re(e)},queryAll:function(e,t){if(t){t=re(t);if(t){return te(e,t)}return[]}return te(e)},nextElementSibling:function(e){return re(e).nextElementSibling},previousElementSibling:function(e){return re(e).previousElementSibling},addClass:function(e,t){var r=c.call(arguments,1);r.unshift(re(e));return ne.apply(null,r)},removeClass:function(e,t){var r=c.call(arguments,1);r.unshift(re(e));return ae.apply(null,r)},toggleClass:function(e,t,r){var i=c.call(arguments,1);i.unshift(re(e));return se.apply(null,i)},setClass:function(e,t){var r=c.call(arguments,1);r.unshift(re(e));return oe.apply(null,r)},containsClass:function(e,t){e=re(e);return le(e,t)},setStyle:function(r,e,t){r=re(r);if(y(e)){R(e,function(e,t){ce(r,_e(e),t)})}else{return ce(r,_e(e),t)}},getStyle:function(e,t){return ue(re(e),_e(t))},removeStyle:function(e,t){return fe(re(e),_e(t))},setAttribute:function(r,e,t){r=re(r);if(y(e)){R(e,function(e,t){r.setAttribute(e,t)})}else{return r.setAttribute(e,t)}},getAttribute:function(e,t){e=re(e);return e.getAttribute(t)},removeAttribute:function(e,t){e=re(e);return e.removeAttribute(t)},hasAttribute:function(e,t){e=re(e);return e.hasAttribute(t)},getAttributes:function(e){e=re(e);var t=e.attributes;var r={};for(var i=t.length-1;i>=0;i--){var n=t[i];r[n.name]=n.value}return r},setValue:function(e,t){e=re(e);return pe.setValue(e,t)},getValue:function(e){e=re(e);return pe.getValue(e)},isTagType:function(e,t){e=re(e);return Ce.isTagType(e,t.toUpperCase())},create:Re,appendText:function(e,t){return xe(re(e),t)},remove:function(e){return we(re(e))},empty:function(e){return Pe(re(e))},insertBefore:function(e,t){e=re(e);t=re(t);t.parentNode.insertBefore(e,t);return e},insertAfter:function(e,t){e=re(e);t=re(t);t.parentNode.insertBefore(e,t.nextSibling);return e},insertFirst:function(e,t){e=re(e);t=re(t);t.insertBefore(e,t.firstChild);return e},appendChild:function(e,t){e=re(e);t=re(t);t.appendChild(e);return e},focus:function(e,t){U(function(){z(function(){re(e).focus(t)},60)})},event:{ready:Ie.addReadyListener,addEventListener:function(e,t,r,i){return Ve(re(e),t,r,i)},removeEventListener:function(e,t,r,i){return Me(re(e),t,r,i)},on:function(e,t,r,i){return Ve(re(e),t,r,i)},off:function(e,t,r,i){return Me(re(e),t,r,i)},onclick:function(e,t,r){return Se(re(e),"click",t,r)},onchange:function(e,t,r){return Se(re(e),"change",t,r)},onresize:function(e,t,r){return ze.addResizeListener(re(e),t,r)},onwheel:function(e,t,r){return Ue.addWheelListener(re(e),t,r)},getTarget:function(e,t){return Ee.getEventTarget(e,t)}}};e.bom={setCookie:q.setCookie,getCookie:q.getCookie,removeCookie:q.removeCookie,setLocalStorage:X.setItem,getLocalStorage:X.getItem,removeLocalStorage:X.removeItem,clearLocalStorage:X.clear,setSessionStorage:J.setItem,getSessionStorage:J.getItem,removeSessionStorage:J.removeItem,clearSessionStorage:J.clear,getURLQuery:K.getURLQuery,getURLHash:K.getURLHash,browser:Y.browser,browserVersion:Y.version};e.ajax={get:He.get,post:He.post,ajax:He.ajax,setup:He.setup,jsonp:$e.jsonp};e.Defaults=H;e.ready=Ie.addReadyListener;e.ArrayMap=S;var We=d.z;e.noConflict=function(){if(d.z===e){d.z=We}return e};d.z=e;return e})(window);(function(r,i){var n=r.z;var e=n.$.TypeCheck;var t=n.$.ArrayUtil;var a=n.$.ObjectUtil;var o=n.$.I18nUtil;var l=n.$.ClassUtil;var s=n.$.ArrayMap;var d=n.$.TimeUtil;var h=n.$.Util;var c=n.$.Defaults;var u=n.$.ZObject;var f=n.$.EventDispatcher;var _=n.$.ChangeSupport;var p=n.$.CookieUtil;var v=n.$.LocalStorageUtil;var g=n.$.SessionStorageUtil;var C=n.$.URLUtil;var m=n.$.BrowserUtil;var y=n.$.DomQuery;var b=n.$.DomClass;var D=n.$.DomStyle;var R=n.$.DomValue;var w=n.$.DomType;var P=n.$.DomGeom;var x=n.$.DomUtil;var A=n.$.DomEventUtil;var k=n.$.DomReadyEventUtil;var T=n.$.DomResizeEventUtil;var E=n.$.DomWheelEventUtil;var S=n.$.DomClickEventUtil;var L=n.$.AjaxUtil;var V=n.$.JSONPUtil;var M=Array.prototype.slice;var I=Array.prototype.push;var z=e.isArray;var O=e.isString;var U=e.isBoolean;var B=e.isObject;var N=e.isFunction;var H=e.isNumber;var $=t.merge;var W=t.each;var F=t.filter;var j=t.find;var G=t.removeItem;var q=a.merge;var X=a.deepMerge;var J=a.each;var K=a.filter;var Y=a.getDeepValue;var Q=a.setDeepValue;var Z=a.getValues;var ee=l.extend;var te=d.callBatch;var re=d.callLater;var ie=d.callInterval;var ne=d.callRAFLater;var ae=d.callRAFInterval;var oe=y.querySelector;var se=y.querySelectorAll;var le=y.queryElement;var de=b.add;var he=b.remove;var ce=b.set;var ue=b.contains;var fe=b.toggle;var _e=b.formatClass;var pe=D.setStyle;var ve=D.getStyle;var ge=D.removeStyle;var Ce=D.formatStyle;var me=R.getValue;var ye=R.setValue;var be=w.isElement;var De=w.isTagType;var Re=x.create;var we=x.remove;var Pe=x.empty;var xe=x.appendText;var Ae=x.isInDom;var ke=A.addEventListener;var Te=A.removeEventListener;var Ee=A.addTypeEventListener;var Se=A.removeTypeEventListener;if(n.$.cvs){var Le=n.$.cvs.MathConvexHullUtil;var Ve=n.$.cvs.MathLineUtil;var Me=n.$.cvs.MathPointUtil;var Ie=n.$.cvs.MathRectUtil;var ze=n.$.cvs.MathUtil;var Oe=n.$.cvs.C2dUtil;var Ue=n.$.cvs.C2dTextUtil;var Be=n.$.cvs.C2dPathUtil;var Ne=n.$.cvs.C2dRectShapeUtil;var He=n.$.cvs.C2dGradientUtil;var $e=n.$.cvs.C2dPatternUtil;var We=n.$.cvs.CVSImageUtil;var Fe=ze.toRadians;var je=ze.calcDistance;var Ge=ze.calcAngle;var qe=Oe.set2DAttribute;var Xe=Oe.set2DAttributes;var Je=Oe.saveAndSet2DAttributes;var Ke=Oe.rotateAround;var Ye=Oe.renderPath;var Qe=Be.path;var Ze=He.createDirectionLinearGradient;var et=He.createLinearGradient;var tt=He.createDirectionRadialGradient;var rt=He.createRadialGradient}if(n.$.iview){var it=n.$.iview.Data;var nt=n.$.iview.Provider;var at=n.$.iview.CheckInterface;var ot=n.$.iview.ExpandInterface;var st=n.$.iview.IView;var lt=n.$.iview.IDataView;var dt=n.$.iview.IDataRendererView;var ht=n.$.iview.IDataRenderer;var ct=n.$.iview.IDataElementRendererView;var ut=n.$.iview.IDataElementRenderer;var ft=n.$.iview.IViewController;var _t=n.$.iview.ModelTypeCheck;var pt=n.$.iview.ArgsUtil;var vt=n.$.iview.DataLevelUtil;var gt=n.$.iview.JSONDataParser;var Ct=n.$.iview.HTMLDataParser;var mt=_t.isData;var yt=pt.getSingleObjectArg}var _t={isIModel:function(e){if(B(e)){if(e.__toTypeString_Model_$){return e.__toTypeString_Model_$()===bt.model}}return false},_isIModelType:function(e,t,r){if(_t.isIModel(e)){var i="__toTypeString_"+t+"_$";var n=e[i];if(n){return n.apply(e)===r}}return false},isData:function(e){return _t._isIModelType(e,"Data",bt.data)},isView:function(e){return _t._isIModelType(e,"View",bt.view)},isProvider:function(e){return _t._isIModelType(e,"Provider",bt.provider)}};var mt=_t.isData;var vt={isParentSettable:function(e,t){if(e===t){return true}return vt.isDescendantOf(t,e)},getDataRoot:function(e){var t=e.getProperty("parent");while(t){e=t;t=e.getProperty("parent")}return e},isDescendantOf:function(e,t){var r=e.getProperty("parent");while(r){if(t===r){return true}else{r=r.getProperty("parent")}}return false},getAncestorArray:function(e,t){var r=[];var i=e.getProperty("parent");while(i){r.push(i);if(t===i){return r}i=i.getProperty("parent")}return r},getAddedDescendantArray:function(e,t){var r=[];vt._getAddedDescendantArray(r,e,t);return r},_getAddedDescendantArray:function(t,r,e){var i=vt.getAddedChildren(r,e);if(i.length>0){$(t,i);i.forEach(function(e){vt._getAddedDescendantArray(t,r,e)})}},getAddedChildren:function(e,t){return F(t.getChildren(false),e.contains,e)},getAddedSiblingArray:function(e,t){var r=t.getProperty("parent");if(r){return F(r.getChildren(false),e.contains,e)}return e.toRootArray(false)},isAncestorAdded:function(t,e){var r=vt.getAncestorArray(e);if(r.length===0){return true}var i=true;r.forEach(function(e){if(!t.contains(e)){i=false}});return i}};var Ct={parse:function(e,t,r,i){var n=Ct.parseToObjectArray(e,t,r);return gt.parse(n,i)},parseToObjectArray:function(e,t,r){var i;if(t===true){i=Ct._parseLevelHTMLData(e)}else{i=Ct._parseListHTMLData(e)}if(N(r)){i.forEach(function(e){Ct._convertItemAttr(e,r)})}return i},_convertItemAttr:function(r,i){J(r,function(e,t){r[e]=i(e,t)});var e=r.children;if(e){e.forEach(function(e){Ct._convertItemAttr(e,i)})}},parseAttributes:function(e,t){var r=e.attributes;var i=r.length;for(var n=0;n<i;n++){var a=r[n];t[a.nodeName]=a.nodeValue}return t},_parseListHTMLData:function(e){var t=[];var r=e.children;var i=r.length;for(var n=0;n<i;n++){var a=r[n];var o={tag:a.tagName};Ct.parseAttributes(a,o);Ct.parseTemplate(a,o);if(o.content_type==="text"){Ct._parseTextContent(a,o)}else{Ct._parseElementContent(a,o)}t.push(o)}return t},parseTemplate:function(e,t){var r=oe("zw-template",e);if(r){t.template=Ct._htmlDecode(r.innerHTML);we(r)}return r},_htmlDecode:function(e){return String(e).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")},_getChildren:function(e){var t=e.children;if(t.length===1){var r=t[0];if(w.isTagType(r,"UL")||w.isTagType(r,"OL")){t=r.children}}return t},_parseLevelHTMLData:function(e){var t=[];var r=Ct._getChildren(e);var i=r.length;for(var n=0;n<i;n++){var a=r[n];var o={tag:a.tagName};Ct.parseAttributes(a,o);Ct.parseTemplate(a,o);Ct._parseElementChildren(a,o);t.push(o)}return t},_parseElementChildren:function(e,t){var r=Ct._getChildren(e);var i=r.length;if(i===0){Ct._parseTextContent(e,t)}else{var n=[];for(var a=0;a<i;a++){var o=r[a];var s={tag:o.tagName};Ct.parseAttributes(o,s);Ct.parseTemplate(o,s);Ct._parseElementChildren(o,s);n.push(s)}t.children=n}},_parseTextContent:function(e,t,r){var i=e.textContent.trim();if(i){if(!t.hasOwnProperty("content")){t.content=e.innerHTML}if(!t.hasOwnProperty("name")){t.name=i}}return t},_parseElementContent:function(e,t){var r=e.innerHTML;var i=r.trim();if(i){if(!t.hasOwnProperty("content")){var n=$([],e.children);if(n.length>0){var a=Re("div","element_content");W(n,function(e){a.appendChild(e)});t.content={type:"element",content:a}}else{t.content=r}}if(!t.hasOwnProperty("name")){t.name=i}}}};var gt={parse:function(e,t,r){t=q({clazz:"clazz",parent:"parent",children:"children",link_from:"link_from",link_to:"link_to"},t);var i=t.clazz,n=t.parent,a=t.children,o=t.link_from,s=t.link_to,l=t.id;var d=[i,n,a,o,s];var h="_z_"+i,c="_z_"+n,u="_z_"+a;var f=[];e.forEach(function(e){if(mt(e)){f.push(e)}else if(B(e)){gt._createItemData(gt._replaceKeyword(e,d,a),f,h,u)}else if(O(e)){gt._createItemData({name:e},f,h,u)}});var _={};var p;if(r){p=$([],r,f)}else{p=f}if(l){p.forEach(function(e){if(e.hasProperty(l)){_[e.getProperty(l)]=e}})}else{["name","id"].forEach(function(t){p.forEach(function(e){if(e.hasProperty(t)){_[e.getProperty(t)]=e}})})}f.forEach(function(e){var t=e.getProperty(c);if(t){var r;if(mt(t)){r=t}else{r=_[t]}if(r){e.set("parent",r)}}});d=["_z_"+i,"_z_"+n,"_z_"+a,"_z_"+o,"_z_"+s];f.forEach(function(e){d.forEach(e.removeProperty,e)});return f},_replaceKeyword:function(e,t,r){var i={};var n={};J(e,function(e,t){if(mt(t)){i[e]=t}else{n[e]=t}});var a=X({},n);a=q(a,i);var o=a[r];if(z(o)){var s=[];o.forEach(function(e){if(B(e)){s.push(gt._replaceKeyword(e,t,r))}else if(O(e)){s.push({name:e})}});a[r]=s}t.forEach(function(e){if(a.hasOwnProperty(e)){a["_z_"+e]=a[e];delete a[e]}});a["_$z_data"]=e;return a},_createItemData:function(e,t,r,i,n){var a=e[r]||it;var o=l.createInstance(a,[e]);if(n){o.set("parent",n)}t.push(o);var s=e[i];if(z(s)){s.forEach(function(e){gt._createItemData(e,t,r,i,o)})}}};var pt={getSingleObjectArg:function(e,t){if(e.length===1){var r=e[0];if(B(r)){return r[t]}}}};var yt=pt.getSingleObjectArg;var bt={data:"_z.data",model:"_z.model",view:"_z.view",provider:"_z.provider"};var Dt=function(){Dt.superClass.constructor.apply(this,arguments)};ee(Dt,_,{__toTypeString_Model_$:function(){return bt.model}});var it=function(e){if(!(this instanceof it)){return l.createInstance(it,arguments)}this.__zid__=h.guid();this._childArrayMap=new s;it.superClass.constructor.apply(this,arguments)};ee(it,Dt,{___zsg:["parent"],___zdefaults_:{parent:i,name:i,icon:i},__toTypeString_Data_$:function(){return bt.data},id:function(){return this.__zid__},isPropertyValid:function(e,t,r){if(e==="parent"){if(this.__pcrChanging===true){return false}if(t){if(!mt(t)){return false}if(vt.isParentSettable(this,t)){return false}}}return it.superClass.isPropertyValid.apply(this,arguments)},beforeSetProperty:function(e,t,r){if(e==="parent"){this.__pcrChanging=true;if(r){r.removeChild(this)}}it.superClass.beforeSetProperty.apply(this,arguments)},afterSetProperty:function(e,t,r){if(e==="parent"){if(t){t.addChild(this)}this.__pcrChanging=false}it.superClass.afterSetProperty.apply(this,arguments)},addChild:function(e){if(this.__pcrChanging===true){return}if(!mt(e)){return}if(this.isParentOf(e)){return}if(vt.isParentSettable(e,this)){return}this.__pcrChanging=true;this._childArrayMap.add(e.id(),e);e.setProperty("parent",this);this.__pcrChanging=false;this.dispatchChangeEvent("children",e,i)},removeChild:function(e){if(this.__pcrChanging===true){return}if(!mt(e)){return}if(!this.isParentOf(e)){return}this.__pcrChanging=true;this._childArrayMap.remove(e.id());e.removeProperty("parent");this.__pcrChanging=false;this.dispatchChangeEvent("children",null,e)},clearChildren:function(){this.__pcrChanging=true;var e=this._childArrayMap.toArray();e.forEach(function(e){e.removeProperty("parent")});this._childArrayMap.clear();this.__pcrChanging=false;this.dispatchChangeEvent("children",this._childArrayMap.toArray(),e)},getChildren:function(e){return this._childArrayMap.toArray(e)},isParentOf:function(e){return this._childArrayMap.has(e.id())},hasChildren:function(){return this._childArrayMap.size()>0},eachChildren:function(e,t){this._childArrayMap.eachArray(e,t)},clone:function(r,e){var t=this.getProperties(false);var i={};if(N(r)){J(t,function(e,t){if(r(e,t)!==false){i[e]=t}})}else if(B(r)){J(t,function(e,t){if(r[e]!==false){i[e]=t}})}else{i=q(i,t)}return l.createInstance(this.constructor,[q(i,e)])},_getAttachedDataArray:function(){return this._childArrayMap.toArray(false)}});var Rt=function(){this._dataArrayMap=new s;var e;var t;if(z(arguments[0])){t=arguments[0];e=M.call(arguments,1)}else{e=arguments}Rt.superClass.constructor.apply(this,e);if(t){t.forEach(this.add,this)}};ee(Rt,Dt,{__toTypeString_Provider_$:function(){return bt.provider},add:function(e,r){var t=arguments.length;if(z(e)){if(t>1){e.forEach(function(e,t){this.add(e,r+t)},this)}else{e.forEach(function(e){this.add(e)},this)}return}if(!mt(e)){h.throwError("Only z.Data instance is allowed")}if(this.isAddable(e)!==true||this.contains(e)){return}if(t>1){this._dataArrayMap.add(e.id(),e,r);this._onAdd(e,r)}else{this._dataArrayMap.add(e.id(),e);this._onAdd(e)}this.dispatchProviderChangeEvent("add",e)},_onAdd:function(e){},isAddable:function(e){return true},remove:function(e){if(this.contains(e)){this._dataArrayMap.remove(e.id());this._onRemove(e);this.dispatchProviderChangeEvent("remove",e)}},_onRemove:function(e){},clear:function(){if(this._dataArrayMap.size()>0){var e=this._dataArrayMap.toArray();this._dataArrayMap.clear();this._onClear(e);this.dispatchProviderChangeEvent("clear",e)}},_onClear:function(e){},contains:function(e){return this._dataArrayMap.has(e.id())},find:function(t,r){if(B(t)){return this._dataArrayMap.findArray(function(r){var i=true;J(t,function(e,t){if(r.getProperty(e)!==t){i=false;return false}});return i})}if(N(t)){return this._dataArrayMap.findArray.apply(this._dataArrayMap,arguments)}var e=arguments.length;if(e===1){return this._dataArrayMap.findArray(function(e){return e.hasProperty(t)})}else if(e>=2){return this._dataArrayMap.findArray(function(e){return e.getProperty(t)===r})}return i},filter:function(t,r){if(B(t)){return this._dataArrayMap.filterArray(function(r){var i=true;J(function(e,t){if(r.getProperty(e)!==t){i=false;return false}});return i})}if(N(t)){return this._dataArrayMap.filterArray.apply(this._dataArrayMap,arguments)}var e=arguments.length;if(e===1){return this._dataArrayMap.filterArray(function(e){return e.hasProperty(t)})}else if(e>=2){return this._dataArrayMap.filterArray(function(e){return e.getProperty(t)===r})}return[]},toArray:function(e){return this._dataArrayMap.toArray(e)},size:function(){return this._dataArrayMap.size()},each:function(e,t){this._dataArrayMap.eachArray(e,t)},addProviderChangeListener:function(e,t){this.addListener("provider.change",e,t)},removeProviderChangeListener:function(e,t){this.removeListener("provider.change",e,t)},dispatchProviderChangeEvent:function(e,t,r){this.dispatchEvent("provider.change",{type:e,data:t,info:r})}});var nt=function(){this._rootArrayMap=new s;nt.superClass.constructor.apply(this,arguments)};ee(nt,Rt,{_onAdd:function(e){if(e.getProperty("parent")==null){this._rootArrayMap.add(e.id(),e)}e.addChangeListener(this._handleDataChange,this)},_onRemove:function(e){var t=e._getAttachedDataArray();if(t){t.forEach(this.remove,this)}if(e.getProperty("parent")==null){this._rootArrayMap.remove(e.id())}e.removeChangeListener(this._handleDataChange,this)},_onClear:function(e){this._rootArrayMap.clear();e.forEach(function(e){e.removeChangeListener(this._handleDataChange,this)},this)},_handleDataChange:function(e){if(e.property==="parent"){var t=e.source;var r=e.old_value;var i=e.new_value;if(r==null&&i!=null){this._rootArrayMap.remove(t.id())}else if(i==null&&r!=null){this._rootArrayMap.add(t.id(),t)}}e.data=e.source;this.dispatchDataChangeEvent(e)},addDataChangeListener:function(e,t){this.addListener("provider.data.change",e,t)},removeDataChangeListener:function(e,t){this.removeListener("provider.data.change",e,t)},dispatchDataChangeEvent:function(e){this.dispatchEvent("provider.data.change",e)},toRootArray:function(e){return this._rootArrayMap.toArray(e)},hEach:function(t,r){this._rootArrayMap.eachArray(function(e){return this._hEach(e,t,r)},this)},hEachByData:function(e,t,r){e.eachChildren(function(e){if(this.contains(e)){return this._hEach(e,t,r)}},this)},_hEach:function(e,t,r){var i=t.apply(r,[e]);if(i===false){return false}e.eachChildren(function(e){if(this.contains(e)){i=this._hEach(e,t,r);if(i===false){return false}}},this);return i},getSelectProvider:function(){if(this._selectProvider==null){this._selectProvider=new wt(this)}return this._selectProvider},getCheckProvider:function(){if(this._checkProvider==null){this._checkProvider=new wt(this)}return this._checkProvider},getExpandProvider:function(){if(this._expandProvider==null){this._expandProvider=new wt(this)}return this._expandProvider},moveToPrevious:function(e){var t=this._getIndexArray(e);var r=t.indexOf(e);if(r===0){return}t.splice(r,1);t.splice(r-1,0,e);this.dispatchIndexChangeEvent(e,r,r-1)},moveToNext:function(e){var t=this._getIndexArray(e);var r=t.length;var i=t.indexOf(e);if(i===r-1){return}t.splice(i,1);t.splice(i+1,0,e);this.dispatchIndexChangeEvent(e,i+1,i)},moveToFirst:function(e){var t=this._getIndexArray(e);var r=t.indexOf(e);if(r===0){return}t.splice(r,1);t.unshift(e);this.dispatchIndexChangeEvent(e,0,r)},moveToLast:function(e){var t=this._getIndexArray(e);var r=t.length;var i=t.indexOf(e);if(i===r-1){return}t.splice(i,1);t.push(e);this.dispatchIndexChangeEvent(e,r-1,i)},moveTo:function(e,t){var r=this._getIndexArray(e);var i=r.indexOf(e);if(i===t){return}r.splice(i,1);r.splice(t,0,e);this.dispatchIndexChangeEvent(e,t,i)},_getIndexArray:function(e){var t=e.getProperty("parent");if(t){return t.getChildren(false)}else{return this._rootArrayMap.toArray(false)}},addIndexChangeListener:function(e,t){this.addListener("provider.index.change",e,t)},removeIndexChangeListener:function(e,t){this.removeListener("provider.index.change",e,t)},dispatchIndexChangeEvent:function(e,t,r){this.dispatchEvent("provider.index.change",{data:e,new_index:t,old_index:r})}});var wt=function(e){wt.superClass.constructor.apply(this);this.setProvider(e)};ee(wt,Rt,{set:function(e){this.clear();if(mt(e)){if(this.isAddable(e)){this._dataArrayMap.add(e.id(),e)}}else if(z(e)){W(e,function(e){if(mt(e)&&this.isAddable(e)){this._dataArrayMap.add(e.id(),e)}},this)}if(this._dataArrayMap.size()>0){this.dispatchProviderChangeEvent("set",this._dataArrayMap.toArray())}},getLast:function(){var e=this._dataArrayMap.toArray(false);return e[e.length-1]},isAddable:function(e){if(this._provider){return this._provider.contains(e)}return true},setProvider:function(e){if(this._provider){this._provider.removeProviderChangeListener(this._handleProviderChange,this)}this._provider=e;this.clear();if(e){e.addProviderChangeListener(this._handleProviderChange,this)}},_handleProviderChange:function(e){var t=e.type;if(t==="remove"){this._dataArrayMap.remove(e.data.id())}else if(t==="clear"){this._dataArrayMap.clear()}}});var Pt={parseHtml:function(e,t,r,i){return Ct.parse(e,t,r,i)},parseJSON:function(e,t,r){return gt.parse(e,t,r)}};var at=function(e){return{_isCheck_:true,isCheckable:function(e){return this._getDataViewProperty(e,"checkable")!==false},_updateCheckProvider:function(){this._removeCheckProviderListener();if(this._provider){if(this.getProperty("model_check")!==false){this._checkProvider=this._provider.getCheckProvider()}else{if(!this._checkProvider){this._checkProvider=new wt(this._provider)}this._checkProvider.setProvider(this._provider)}this._addCheckProviderListener()}},_removeCheckProviderListener:function(){if(this._checkProvider){this._checkProvider.removeProviderChangeListener(this._handleCheckProviderChange,this)}},_addCheckProviderListener:function(){this._checkProvider.addProviderChangeListener(this._handleCheckProviderChange,this)},_handleCheckProviderChange:function(e){var t=e.type;if(t==="add"){this._onCheckAdd(e.data)}else if(t==="remove"){this._onCheckRemove(e.data)}else if(t==="clear"){this._onCheckClear(e.data)}else if(t==="set"){this._onCheckSet(e.data)}this._onCheckChange(e)},_addCheckNeedUpdateData:function(e){this._addNeedUpdateData(e,true,true)},_onCheckAdd:function(e){this._addCheckNeedUpdateData(e);this._callOn("onCheckAdd","on.check.add",e,[e])},onCheckAdd:function(e,t){this.addListener("on.check.add",e,t)},_onCheckRemove:function(e){this._addCheckNeedUpdateData(e);this._callOn("onCheckRemove","on.check.remove",e,[e])},onCheckRemove:function(e,t){this.addListener("on.check.remove",e,t)},_onCheckClear:function(e){e.forEach(this._addCheckNeedUpdateData,this);this._callOn("onCheckClear","on.check.clear",e,[e])},onCheckClear:function(e,t){this.addListener("on.check.clear",e,t)},_onCheckSet:function(e){e.forEach(this._addCheckNeedUpdateData,this);this._callOn("onCheckSet","on.check.set",e,[e])},onCheckSet:function(e,t){this.addListener("on.check.set",e,t)},_onCheckChange:function(e){this._update();this._callOn("onCheckChange","on.check.change",e,[e])},onCheckChange:function(e,t){this.addListener("on.check.change",e,t)},check:function(e,t){var r=this._getModelData(e);if(r.length===0){return}if(t===true){return this.addCheck(r)}return this.setCheck(r)},uncheck:function(e){var t=this._getModelData(e);if(t.length===0){return}t.forEach(function(e){this.removeCheck(e)},this)},addCheck:function(e){return this._checkProvider.add(this._filterCheckableData(e))},removeCheck:function(e){return this._checkProvider.remove.apply(this._checkProvider,arguments)},clearCheck:function(){return this._checkProvider.clear.apply(this._checkProvider,arguments)},setCheck:function(e){return this._checkProvider.set(this._filterCheckableData(e))},checkAll:function(e){var t=this.getDataArray(false);if(e!==false){t=F(t,this._isVisible,this)}return this._checkProvider.set(this._filterCheckableData(t))},getChecked:function(e){return this._checkProvider.toArray.apply(this._checkProvider,arguments)},getLastChecked:function(){return this._checkProvider.getLast.apply(this._checkProvider,arguments)},isChecked:function(e){return this._checkProvider.contains.apply(this._checkProvider,arguments)},toggleCheck:function(e){if(this.isChecked(e)){this.removeCheck(e)}else{this.addCheck(e)}},_filterCheckableData:function(e){if(mt(e)){e=[e]}if(z(e)){e=e.filter(function(e){return this.isCheckable(e)&&!this.isDisabled(e)},this)}return e}}};var xt=function(e){return{_getControllerRoot:function(){return this._root},setControllers:function(e){this._controllerArray.forEach(function(e){e.remove()});this._controllerArray=$([],e);this._controllerArray.forEach(function(e){e.add(this)},this);this._onControllerChange("set")},addController:function(e){this._controllerArray.push(e);e.add(this);this._onControllerChange("add")},removeController:function(e){var t=this._controllerArray.indexOf(e);if(t>=0){e.remove();this._controllerArray.splice(t,1)}this._onControllerChange("remove")},_onControllerChange:function(e){},_onDataClick:function(e,t){this._callOn("onDataClick","on.data.click",{data:e,event:t},[e,t])},onDataClick:function(e,t){this.addListener("on.data.click",e,t)},_onDataDblClick:function(e,t){this._callOn("onDataDblClick","on.data.dblclick",{data:e,event:t},[e,t])},onDataDblClick:function(e,t){this.addListener("on.data.dblclick",e,t)}}};var ot=function(e){return{_isExpand_:true,_isExpandable:function(e){return this.isExpandable(e)},isExpandable:function(e){return this._getDataViewProperty(e,"expandable")!==false},_isAccordion:function(){return this.getProperty("accordion")===true},_updateExpandProvider:function(){this._removeExpandProviderListener();if(this._provider){if(this.getProperty("model_expand")!==false){this._expandProvider=this._provider.getExpandProvider()}else{if(!this._expandProvider){this._expandProvider=new wt(this._provider)}this._expandProvider.setProvider(this._provider)}this._addExpandProviderListener()}},_removeExpandProviderListener:function(){if(this._expandProvider){this._expandProvider.removeProviderChangeListener(this._handleExpandProviderChange,this)}},_addExpandProviderListener:function(){this._expandProvider.addProviderChangeListener(this._handleExpandProviderChange,this)},_handleExpandProviderChange:function(e){var t=e.type;if(t==="add"){this._onExpandAdd(e.data)}else if(t==="remove"){this._onExpandRemove(e.data)}else if(t==="clear"){this._onExpandClear(e.data)}else if(t==="set"){this._onExpandSet(e.data)}this._onExpandChange(e)},_addExpandNeedUpdateData:function(e){this._addNeedUpdateData(e,false,true)},_onExpandAdd:function(t){this._addExpandNeedUpdateData(t);this._callOn("onExpand","on.expand.add",t,[t]);if(this._isAccordion()){var e=this._expandProvider.toArray();var r=vt.getAncestorArray(t);e.forEach(function(e){if(e!==t&&r.indexOf(e)<0){this.collapse(e)}},this)}},onExpand:function(e,t){this.addListener("on.expand.add",e,t)},_onExpandRemove:function(e){this._addExpandNeedUpdateData(e,false);this._callOn("onCollapse","on.expand.remove",e,[e])},onCollapse:function(e,t){this.addListener("on.expand.remove",e,t)},_onExpandClear:function(e){e.forEach(this._addExpandNeedUpdateData,this);this._callOn("onCollapseAll","on.expand.clear",e,[e])},onCollapseAll:function(e,t){this.addListener("on.expand.clear",e,t)},_onExpandSet:function(e){e.forEach(this._addExpandNeedUpdateData,this);this._callOn("onExpandSet","on.expand.set",e,[e])},onExpandSet:function(e,t){this.addListener("on.expand.set",e,t)},_onExpandChange:function(e){this._update();this._callOn("onExpandChange","on.expand.change",e,[e])},onExpandChange:function(e,t){this.addListener("on.expand.change",e,t)},expand:function(e){var t=this._getModelData(e);if(t.length===0){return}return this._expandProvider.add(this._filterExpandableData(t))},collapse:function(e){var t=this._getModelData(e);if(t.length===0){return}t.forEach(function(e){return this._expandProvider.remove(e)},this)},expandAll:function(e){var t=this.getDataArray(false);if(e!==false){t=F(t,this._isLevelVisible,this)}return this._expandProvider.set(this._filterExpandableData(t))},collapseAll:function(){return this._expandProvider.clear.apply(this._expandProvider,arguments)},isExpanded:function(e){return this._expandProvider.contains(e)},toggleExpand:function(e){if(this.isExpanded(e)){this.collapse(e)}else{this.expand(e)}},_filterExpandableData:function(e){if(mt(e)){e=[e]}if(z(e)){e=e.filter(function(e){return this._isExpandable(e)&&!this.isDisabled(e)},this)}return e},_isDataAncestorExpanded:function(e){var t=vt.getAncestorArray(e);if(t.length===0){return true}var r=true;t.forEach(function(e){if(!this.isExpanded(e)){r=false}},this);return r}}};var At=function(e){return{setProvider:function(e){if(this._provider===e){return}if(!_t.isProvider(e)){h.throwError("Only z.Provider instance is allowed")}this._removeProviderListener();this._provider=e;this._addProviderListener();this._beforeModelChange("set_provider");this._onProviderChange();this._onModelChange("set_provider")},getProvider:function(){return this._provider},_onProviderChange:function(){},_removeProviderListener:function(){if(this._provider){this._provider.removeProviderChangeListener(this._handleProviderChange,this);this._provider.removeDataChangeListener(this._handleProviderDataChange,this);this._provider.removeIndexChangeListener(this._handleProviderDataIndexChange,this)}},_addProviderListener:function(){this._provider.addProviderChangeListener(this._handleProviderChange,this);this._provider.addDataChangeListener(this._handleProviderDataChange,this);this._provider.addIndexChangeListener(this._handleProviderDataIndexChange,this)},_handleProviderChange:function(e){this._beforeModelChange("provider",e);var t=e.type;if(t==="add"){this._onDataAdd(e.data)}else if(t==="remove"){this._onDataRemove(e.data)}else if(t==="clear"){this._onDataClear(e.data)}this._onModelChange("provider",e)},_handleProviderDataChange:function(e){this._beforeModelChange("data",e);this._onDataChange(e.data,e);this._onModelChange("data",e)},_handleProviderDataIndexChange:function(e){this._beforeModelChange("index",e);this._onDataIndexChange(e.data,e);this._onModelChange("index",e)},_beforeModelChange:function(e,t){},_onModelChange:function(e,t){this._update();this._callOn("onModelChange","on.model.change",{type:e,event:t},[e,t])},onModelChange:function(e,t){this.addListener("on.model.change",e,t)},_onDataAdd:function(e){this._callOn("onDataAdd","on.data.add",e,[e])},onDataAdd:function(e,t){this.addListener("on.data.add",e,t)},_onDataRemove:function(e){this._callOn("onDataRemove","on.data.remove",e,[e])},onDataRemove:function(e,t){this.addListener("on.data.remove",e,t)},_onDataClear:function(e){this._callOn("onDataClear","on.data.clear",e,[e])},onDataClear:function(e,t){this.addListener("on.data.clear",e,t)},_onDataIndexChange:function(e,t){this._callOn("onDataIndexChange","on.data.index.change",{data:e,event:t},[e,t])},onDataIndexChange:function(e,t){this.addListener("on.data.index.change",e,t)},_onDataChange:function(e,t){this._callOn("onDataChange","on.data.change",{data:e,event:t},[e,t])},onDataChange:function(e,t){this.addListener("on.data.change",e,t)},setData:function(e,t){if(!z(e)){e=[e]}var r=new nt;var i=Pt.parseJSON(e);if(t===true){i.forEach(function(e){e._bind(e.get("_$z_data"))})}r.add(i);this.setProvider(r)},addData:function(e,t){if(!mt(e)){if(!z(e)){e=[e]}if(!mt(e[0])){e=Pt.parseJSON(e,null,this.getDataArray())}}if(arguments.length>1){return this._provider.add(e,t)}return this._provider.add(e)},removeData:function(e){var t=this._getModelData(e);if(t.length===0){return}t.forEach(function(e){this._provider.remove(e)},this)},clearData:function(){return this._provider.clear.apply(this._provider,arguments)},containsData:function(e){if(!mt(e)){e=this._provider.find.apply(this._provider,arguments)}if(e){return this._provider.contains.apply(this._provider,arguments)}return false},findData:function(e,t){return this._provider.find.apply(this._provider,arguments)},filterData:function(e,t){return this._provider.filter.apply(this._provider,arguments)},eachData:function(e,t){if(this._provider){return this._provider.each.apply(this._provider,arguments)}},hEachData:function(e,t){if(this._provider){return this._provider.hEach.apply(this._provider,arguments)}},getDataArray:function(e){return this._provider.toArray.apply(this._provider,arguments)},getRootDataArray:function(e){return this._provider.toRootArray.apply(this._provider,arguments)},getDataSize:function(){return this._provider.size.apply(this._provider,arguments)},_getModelData:function(e){var r=[];if(mt(e)){r.push(e)}else if(z(e)){e.forEach(function(e){if(mt(e)){r.push(e)}else if(B(e)){var t=this.findData(e);if(t){r.push(t)}}},this)}else if(B(e)){e=this.findData(e);if(e){r.push(e)}}return r}}};var kt=function(e){return{_doViewOnResizeUpdate:function(e,t,r){if(e==="onresize"){if(r===true){T.removeResizeListener(this._root,this._handleViewResize,this)}if(t===true){T.addResizeListener(this._root,this._handleViewResize,this)}return true}},_handleViewResize:function(){this._callBatch(this._doBatResizeUpdate,"onresize_cb_")},_doBatResizeUpdate:function(){var e=this.getRootSize();if(e.width>0&&e.height>0){this._doResizeUpdate()}this._onViewResize()},_onViewResize:function(){this._callOn("onViewResize","on.view.resize",{},[])},onViewResize:function(e,t){this.addListener("on.view.resize",e,t)},_doResizeUpdate:function(){},getRootSize:function(){return{width:this._root.clientWidth,height:this._root.clientHeight}}}};var Tt=function(e){return{_doUpdateDataRenderer:function(e){var t=e.id();if(this._dataRendererUpdatedMap.hasOwnProperty(t)){return}this._dataRendererUpdatedMap[t]=true;var r=this.getDataRenderer(e);if(r){r.update()}},getDataRenderProperty:function(e,t){return e.getProperty(t)},_addDataRenderer:function(e){var t=this.createDataRenderer(e);if(t){this._rendererArrayMap.add(e.id(),t);this._addDataRendererImpl(e,t)}},_addDataRendererImpl:function(e,t){},_removeDataRenderer:function(e){var t=this._rendererArrayMap.get(e.id());if(t){this._rendererArrayMap.remove(e.id());this._removeDataRendererImpl(e,t);t.dispose()}},_removeDataRendererImpl:function(e,t){},_clearDataRendererImpl:function(){},_updateDataRenderer:function(e,t){var r=this._rendererArrayMap.get(e.id());if(r){this._updateDataRendererImpl(e,r,t.property==="parent")}},_updateDataRendererImpl:function(e,t,r){},_initAllDataRenderer:function(){this.getDataArray(false).forEach(function(e){var t=this.createDataRenderer(e);if(t){this._rendererArrayMap.add(e.id(),t);this._addDataRendererImpl(e,t)}},this)},_reorderAllDataRenderer:function(){},getDataRenderer:function(e){return this._rendererArrayMap.get(e.id())},createDataRenderer:function(e){var t=this.getDataRendererClass(e);return l.createInstance(t,[this,e])},getDataRendererClass:function(e){}}};var Et=function(e){return{isSelectable:function(e){return this._getDataViewProperty(e,"selectable")===true},_updateSelectProvider:function(){this._removeSelectProviderListener();if(this._provider){if(this.getProperty("model_select")!==false){this._selectProvider=this._provider.getSelectProvider()}else{if(!this._selectProvider){this._selectProvider=new wt(this._provider)}this._selectProvider.setProvider(this._provider)}this._addSelectProviderListener()}},_removeSelectProviderListener:function(){if(this._selectProvider){this._selectProvider.removeProviderChangeListener(this._handleSelectProviderChange,this)}},_addSelectProviderListener:function(){this._selectProvider.addProviderChangeListener(this._handleSelectProviderChange,this)},_handleSelectProviderChange:function(e){var t=e.type;if(t==="add"){this._onSelectAdd(e.data)}else if(t==="remove"){this._onSelectRemove(e.data)}else if(t==="clear"){this._onSelectClear(e.data)}else if(t==="set"){this._onSelectSet(e.data)}this._onSelectChange(e)},_addSelectNeedUpdateData:function(e){this._addNeedUpdateData(e,false,false)},_onSelectAdd:function(e){this._addSelectNeedUpdateData(e);this._callOn("onSelectAdd","on.select.add",e,[e])},onSelectAdd:function(e,t){this.addListener("on.select.add",e,t)},_onSelectRemove:function(e){this._addSelectNeedUpdateData(e);this._callOn("onSelectRemove","on.select.remove",e,[e])},onSelectRemove:function(e,t){this.addListener("on.select.remove",e,t)},_onSelectClear:function(e){e.forEach(this._addSelectNeedUpdateData,this);this._callOn("onSelectClear","on.select.clear",e,[e])},onSelectClear:function(e,t){this.addListener("on.select.clear",e,t)},_onSelectSet:function(e){e.forEach(this._addSelectNeedUpdateData,this);this._callOn("onSelectSet","on.select.set",e,[e])},onSelectSet:function(e,t){this.addListener("on.select.set",e,t)},_onSelectChange:function(e){this._update();this._callOn("onSelectChange","on.select.change",e,[e]);this._callBatch(this._onSelectBatchChange,"select_batch_cb_")},onSelectChange:function(e,t){this.addListener("on.select.change",e,t)},_onSelectBatchChange:function(){var e=this.getSelected();this._callOn("onSelectBatchChange","on.select.batch.change",e,[e]);if(e.length>0){if(this.getProperty("make_visible_on_select")===true){this.makeVisible(this.getLastSelected())}}},onSelectBatchChange:function(e,t){this.addListener("on.select.batch.change",e,t)},select:function(e,t){var r=this._getModelData(e);if(r.length===0){return}if(t===true){return this.addSelect(r)}return this.setSelect(r)},unselect:function(e){var t=this._getModelData(e);if(t.length===0){return}t.forEach(function(e){this.removeSelect(e)},this)},addSelect:function(e){return this._selectProvider.add(this._filterSelectableData(e))},removeSelect:function(e){return this._selectProvider.remove.apply(this._selectProvider,arguments)},clearSelect:function(){return this._selectProvider.clear.apply(this._selectProvider,arguments)},setSelect:function(e){return this._selectProvider.set(this._filterSelectableData(e))},selectAll:function(e){var t=this.getDataArray(false);if(e!==false){t=F(t,this._isVisible,this)}return this._selectProvider.set(this._filterSelectableData(t))},getSelected:function(e){return this._selectProvider.toArray.apply(this._selectProvider,arguments)},getLastSelected:function(){return this._selectProvider.getLast.apply(this._selectProvider,arguments)},isSelected:function(e){return this._selectProvider.contains.apply(this._selectProvider,arguments)},_filterSelectableData:function(e){if(mt(e)){e=[e]}if(z(e)){e=e.filter(function(e){return this.isSelectable(e)&&!this.isDisabled(e)},this)}return e}}};var St=function(e){return{_isVisible:function(e){return this.isVisible(e)&&this._isFilterVisible(e)},isVisible:function(e){return e.getProperty("visible")!==false},_isFilterVisible:function(t){var r=true;if(this._dataVisibleFilterArray.length>0){W(this._dataVisibleFilterArray,function(e){if(e(t)===false){r=false;return false}})}return r},addVisibleFilter:function(e){this._dataVisibleFilterArray.push(e);this._update()},removeVisibleFilter:function(e){this._dataVisibleFilterArray.__z_remove(e);this._update()},clearVisibleFilter:function(){this._dataVisibleFilterArray.length=0;this._update()}}};var st=function(){var e=yt(arguments,"appendTo");var t=document.createElement("div");this._root=t;this._controllerArray=[];st.superClass.constructor.apply(this,arguments);if(this.getProperty("onresize")===true&&this.hasProperty("onresize")===false){T.addResizeListener(t,this._handleViewResize,this)}this._appendToUpdate();pe(t,"visibility","hidden");if(e){this.appendTo(e)}re(function(){ge(t,"visibility")},20)};ee(st,Dt,q({__toTypeString_View_$:function(){return bt.view},appendTo:function(e){e=le(e);e.appendChild(this.getRoot())},_appendToUpdate:function(){var e=this.getRoot();ae(function(){if(Ae(e)){this.update();this._displayToResize();return false}},this)},_displayToResize:function(){if(this.getProperty("onresize")===true){var r=this.getRoot();ie(function(){var e=r.parentNode;var t=true;while(e){if(ve(e,"display")==="none"){t=false;break}e=e.parentNode;if(e===document){break}}if(t){this._doResizeUpdate();return false}},600,this)}},afterSetProperty:function(e,t,r){st.superClass.afterSetProperty.apply(this,arguments);this._onViewChange(e,t,r)},_onViewChange:function(e,t,r){this._callOn("onViewChange","on.view.change",{property:e,new_value:t,old_value:r},[e,t,r]);if(this._doViewCSSUpdate(e,t,r)===true){return}if(this._doViewOnResizeUpdate(e,t,r)===true){return}this._update()},onViewChange:function(e,t){this.addListener("on.view.change",e,t)},update:function(){this._doBatUpdate();this._doBatResizeUpdate()},_update:function(){this._callBatch(this._doBatUpdate,"update_cb_")},_doBatUpdate:function(){this._doUpdate();this._onViewUpdate()},_onViewUpdate:function(){this._callOn("onViewUpdate","on.view.update",{},[])},onViewUpdate:function(e,t){this.addListener("on.view.update",e,t)},_doUpdate:function(){},_doViewCSSUpdate:function(e,t,r){if(e==="style"){var i={};if(r){Object.keys(r).forEach(function(e){i[e]=""})}if(t){i=q(i,t)}n.dom.setStyle(this._root,i);return true}else if(e==="class"){if(r){he(this._root,r)}if(t){de(this._root,t)}return true}},_callBatch:function(e,t){te(e,{key:t,context:this})},_callOn:function(e,t,r,i){var n=this[e];if(n===this.constructor.prototype[e]){this.dispatchEvent(t,r)}else{n.apply(this,i)}},getRoot:function(){return this._root}},kt(st),xt(st)));var lt=function(){var e=yt(arguments,"data");this._dataVisibleFilterArray=[];lt.superClass.constructor.apply(this,arguments);this.setProvider(new nt);if(e){this.setData(e)}};ee(lt,st,q({makeVisible:function(e){},_isDisabled:function(e){return this.isDisabled(e)},isDisabled:function(e){return this._getDataViewProperty(e,"disabled")===true},_getDataViewProperty:function(e,t){var r=e.getProperty(t);if(r!=null){return r}return this.getProperty(t)}},At(lt),St(lt)));var dt=function(){this._rendererArrayMap=new s;this._needUpdateDataArray=[];this._needUpdateDataADMap={};dt.superClass.constructor.apply(this,arguments)};ee(dt,lt,q({___zdefaults_:{model_select:false,model_expand:false,model_check:false,make_visible_on_select:true,selectable:true,label_field:"name",label_visible:true},_onViewChange:function(e,t,r){this._updateAllDataVar();dt.superClass._onViewChange.apply(this,arguments);this._doAttachProviderUpdate(e)},_onProviderChange:function(){dt.superClass._onProviderChange.apply(this,arguments);this._updateSelectProvider();this._updateExpandProvider();this._updateCheckProvider()},_doAttachProviderUpdate:function(e){if(e==="model_select"){this._updateSelectProvider();return true}if(e==="model_expand"){this._updateExpandProvider();return true}if(e==="model_check"){this._updateCheckProvider();return true}},_updateSelectProvider:function(){},_updateExpandProvider:function(){},_updateCheckProvider:function(){},_updateAllDataVar:function(){this._update_all_data_=true;this._needUpdateDataArray.length=0},_updateAllData:function(){this._updateAllDataVar();this._update()},_updateData:function(e){this._addNeedUpdateData(e);this._update()},_onModelChange:function(e){if(e==="set_provider"){this._updateAllDataVar();this._clearDataRendererImpl();this._initAllDataRenderer()}dt.superClass._onModelChange.apply(this,arguments)},update:function(){this._updateAllDataVar();dt.superClass.update.apply(this,arguments)},_doUpdate:function(e,t,r){dt.superClass._doUpdate.apply(this,arguments);if(this._update_all_data_===true){this._doUpdateDataArray(this.getDataArray(false))}else{this._doUpdateDataArray(this._needUpdateDataArray)}this._needUpdateDataArray.length=0;this._update_all_data_=false},_doUpdateDataArray:function(e){this._dataRendererUpdatedMap={};e.forEach(function(e){this._doUpdateDataRenderer(e);var t=e.id();var r=this._getDataRelatedDataArray(e,this._needUpdateDataADMap[t+"_$_ancestor"]===true,this._needUpdateDataADMap[t+"_$_descendant"]===true);if(r&&r.length>0){r.forEach(this._doUpdateDataRenderer,this)}},this);this._needUpdateDataADMap={}},_addNeedUpdateData:function(e,t,r){if(this._update_all_data_!==true){this._needUpdateDataArray.push(e);var i=e.id();this._needUpdateDataADMap[i+"_$_ancestor"]=this._needUpdateDataADMap[i+"_$_ancestor"]||t!==false;this._needUpdateDataADMap[i+"_$_descendant"]=this._needUpdateDataADMap[i+"_$_descendant"]||r!==false}},_getDataRelatedDataArray:function(e,t,r){},getLabel:function(e){return e.getProperty(this.getProperty("label_field"))},_onDataAdd:function(e){this._addNeedUpdateData(e);this._addDataRenderer(e);dt.superClass._onDataAdd.apply(this,arguments)},_onDataRemove:function(e){this._addNeedUpdateData(e);this._removeDataRenderer(e);dt.superClass._onDataRemove.apply(this,arguments)},_onDataClear:function(){this._updateAllDataVar();this._clearDataRendererImpl();dt.superClass._onDataClear.apply(this,arguments)},_onDataChange:function(e,t){this._addNeedUpdateData(e,t);this._updateDataRenderer(e,t);dt.superClass._onDataChange.apply(this,arguments)},_onDataIndexChange:function(e){this._addNeedUpdateData(e);var t=this._rendererArrayMap.get(e.id());if(t){this._updateDataRendererImpl(e,t,true)}dt.superClass._onDataIndexChange.apply(this,arguments)}},Et(dt),Tt(dt)));var ct=function(){ct.superClass.constructor.apply(this,arguments)};ee(ct,dt,{___zdefaults_:{sort_compare:null},update:function(){if(this.getProperty("sort_compare")){this._reorderAllDataRenderer()}ct.superClass.update.apply(this,arguments)},_onViewChange:function(e,t,r){if(e==="sort_compare"){this._reorderAllDataRenderer()}ct.superClass._onViewChange.apply(this,arguments)},_onViewUpdate:function(){ct.superClass._onViewUpdate.apply(this,arguments);this._updateRendererVIndex()},_updateRendererVIndex:function(){se(".item:not(.hidden)",this.getRendererRootContainer()).forEach(function(e,t){e.setAttribute("v_index",t);e.setAttribute("v_index_oe",t%2===0?"odd":"even")})},getRendererRootContainer:function(){return this.getRoot()},getRendererContainer:function(e){return this.getRoot()},_getSortDataArray:function(e){var t=this.getProperty("sort_compare");if(N(t)){return e.slice().sort(t)}return e},_removeDataRendererImpl:function(e,t){we(t.getRenderer())},_clearDataRendererImpl:function(){Pe(this.getRendererRootContainer())},getDataRendererElement:function(e){var t=this.getDataRenderer(e);if(t){return t.getRenderer()}return null},getDataAt:function(e){var t=A.getEventTarget(e,"[__z_did_]");if(t){var r=t.getAttribute("__z_did_");return j(this.getDataArray(false),function(e){return e.id()===r})}return null},makeVisible:function(e){if(e){var t=this.getDataRendererElement(e);if(t){ne(function(){x.scrollIntoView(t,this._getScrollView())},this)}}},_getScrollView:function(){return this.getRoot()}});var ht=function(e,t){this._view=e;this._data=t};ee(ht,Object,{update:function(){var e=this._isRendererVisible(this._view,this._data);if(this._visible!==e){this._visible=e;this.onVisibleChange(e)}this._renderConfig={};if(this._visible===true){this.updateRenderConfig(this._view,this._data,this._renderConfig);this.updateRenderer(this._view,this._data,this._renderConfig)}},_isRendererVisible:function(e,t){return e._isVisible(t)},onVisibleChange:function(e){},updateRenderConfig:function(e,t,r){var i=this._view.getDataRenderProperty(t,"label_visible");var n;if(i===true||i===false){n=i}else{n=this.getViewRenderConfig("label_visible")!==false}if(n){var a=e.getLabel(t);if(a!=null){r["label_visible"]=true;r["label"]=a;r["label_font"]=this.getDataViewProperty(t,"label_font");r["label_color"]=this.getDataViewProperty(t,"label_color")}}r["selected"]=e.isSelected(t);r["disabled"]=e._isDisabled(t)},updateRenderer:function(e,t,r){this.updateRendererStatus()},updateRendererStatus:function(e,t,r){},getRenderConfig:function(e){return this._renderConfig[e]},getViewRenderConfig:function(e){return this._view.getProperty(e)},getDataViewProperty:function(e,t){var r=this._view.getDataRenderProperty(e,t);if(r!=null){return r}return this.getViewRenderConfig(t)},dispose:function(){}});var ut=function(){ut.superClass.constructor.apply(this,arguments);pe(this.getRenderer(),"display","none");this.getRenderer().setAttribute("__z_did_",this._data.id())};ee(ut,ht,{getRenderer:function(){return this._renderer},updateRenderConfig:function(e,t,r){ut.superClass.updateRenderConfig.apply(this,arguments);var i=e.getDataRenderProperty(t,"icon");if(i){r["icon"]=i}},updateRendererStatus:function(e,t,r){ut.superClass.updateRendererStatus.apply(this,arguments);fe(this._renderer,"disabled",this.getRenderConfig("disabled")===true);fe(this._renderer,"selected",this.getRenderConfig("selected")===true)},onVisibleChange:function(e){fe(this._renderer,"hidden",e===false);if(e===false){pe(this._renderer,"display","none");Pe(this._renderer)}else{pe(this._renderer,"display","");this.reBuildRenderer()}},reBuildRenderer:function(){}});var ft=function(){this._typeMap={}};ee(ft,Object,{removeViewListener:function(e){if(this._typeMap.hasOwnProperty("view_"+e)){delete this._typeMap["view_"+e];Se(this._controllerRoot,e,this["handle_"+e],this)}},addViewListener:function(e){if(this._typeMap.hasOwnProperty("view_"+e)){return}var t=this["handle_"+e];if(!t){console.error("handle_"+e+" is null");return}this._typeMap["view_"+e]=true;Ee(this._controllerRoot,e,t,this)},removeWindowListener:function(e){if(this._typeMap.hasOwnProperty("window_"+e)){delete this._typeMap["window_"+e];Se(r,e,this["handle_window_"+e],this)}},addWindowListener:function(e){if(this._typeMap.hasOwnProperty("window_"+e)){return}var t=this["handle_window_"+e];if(!t){console.error("handle_window_"+e+" is null");return}this._typeMap["window_"+e]=true;Ee(r,e,t,this)},add:function(e){this._view=e;this._controllerRoot=e._getControllerRoot();var t=this.getViewDefaultTypes();if(t){t.forEach(this.addViewListener,this)}var r=this.getWindowDefaultTypes();if(r){r.forEach(this.addWindowListener,this)}},remove:function(){J(this._typeMap,function(e){if(e.startsWith("view_")){this.removeViewListener(e.slice(5))}else if(e.startsWith("window_")){this.removeWindowListener(e.slice(7))}},this);this._view=null;this._controllerRoot=null;this._typeMap={}},getViewDefaultTypes:function(){},getWindowDefaultTypes:function(){},getView:function(){return this._view},getViewRoot:function(){return this._controllerRoot},update:function(){}});q(n.$,{iview:{Data:it,Provider:nt,CheckInterface:at,ExpandInterface:ot,IView:st,IDataView:lt,IDataRendererView:dt,IDataRenderer:ht,IDataElementRendererView:ct,IDataElementRenderer:ut,IViewController:ft,ModelTypeCheck:_t,ArgsUtil:pt,DataLevelUtil:vt,JSONDataParser:gt,HTMLDataParser:Ct}});n.Data=it;n.Provider=nt})(window);(function(e,t){var a=e.z;var r=a.$.TypeCheck;var i=a.$.ArrayUtil;var n=a.$.ObjectUtil;var o=a.$.I18nUtil;var m=a.$.ClassUtil;var s=a.$.ArrayMap;var l=a.$.TimeUtil;var d=a.$.Util;var D=a.$.Defaults;var h=a.$.ZObject;var c=a.$.EventDispatcher;var u=a.$.ChangeSupport;var f=a.$.CookieUtil;var _=a.$.LocalStorageUtil;var p=a.$.SessionStorageUtil;var v=a.$.URLUtil;var g=a.$.BrowserUtil;var C=a.$.DomQuery;var y=a.$.DomClass;var b=a.$.DomStyle;var R=a.$.DomValue;var w=a.$.DomType;var P=a.$.DomGeom;var x=a.$.DomUtil;var A=a.$.DomEventUtil;var k=a.$.DomReadyEventUtil;var T=a.$.DomResizeEventUtil;var E=a.$.DomWheelEventUtil;var S=a.$.DomClickEventUtil;var L=a.$.AjaxUtil;var V=a.$.JSONPUtil;var M=Array.prototype.slice;var I=Array.prototype.push;var z=r.isArray;var O=r.isString;var U=r.isBoolean;var B=r.isObject;var N=r.isFunction;var H=r.isNumber;var $=i.merge;var W=i.each;var F=i.filter;var j=i.find;var G=i.removeItem;var q=n.merge;var X=n.deepMerge;var J=n.each;var K=n.filter;var Y=n.getDeepValue;var Q=n.setDeepValue;var Z=n.getValues;var ee=m.extend;var te=l.callBatch;var re=l.callLater;var ie=l.callInterval;var ne=l.callRAFLater;var ae=l.callRAFInterval;var oe=C.querySelector;var se=C.querySelectorAll;var le=C.queryElement;var de=y.add;var he=y.remove;var ce=y.set;var ue=y.contains;var fe=y.toggle;var _e=y.formatClass;var pe=b.setStyle;var ve=b.getStyle;var ge=b.removeStyle;var Ce=b.formatStyle;var me=R.getValue;var ye=R.setValue;var be=w.isElement;var De=w.isTagType;var Re=x.create;var we=x.remove;var Pe=x.empty;var xe=x.appendText;var Ae=x.isInDom;var ke=A.addEventListener;var Te=A.removeEventListener;var Ee=A.addTypeEventListener;var Se=A.removeTypeEventListener;if(a.$.cvs){var Le=a.$.cvs.MathConvexHullUtil;var Ve=a.$.cvs.MathLineUtil;var Me=a.$.cvs.MathPointUtil;var Ie=a.$.cvs.MathRectUtil;var ze=a.$.cvs.MathUtil;var Oe=a.$.cvs.C2dUtil;var Ue=a.$.cvs.C2dTextUtil;var Be=a.$.cvs.C2dPathUtil;var Ne=a.$.cvs.C2dRectShapeUtil;var He=a.$.cvs.C2dGradientUtil;var $e=a.$.cvs.C2dPatternUtil;var We=a.$.cvs.CVSImageUtil;var Fe=ze.toRadians;var je=ze.calcDistance;var Ge=ze.calcAngle;var qe=Oe.set2DAttribute;var Xe=Oe.set2DAttributes;var Je=Oe.saveAndSet2DAttributes;var Ke=Oe.rotateAround;var Ye=Oe.renderPath;var Qe=Be.path;var Ze=He.createDirectionLinearGradient;var et=He.createLinearGradient;var tt=He.createDirectionRadialGradient;var rt=He.createRadialGradient}if(a.$.iview){var it=a.$.iview.Data;var nt=a.$.iview.Provider;var at=a.$.iview.CheckInterface;var ot=a.$.iview.ExpandInterface;var st=a.$.iview.IView;var lt=a.$.iview.IDataView;var dt=a.$.iview.IDataRendererView;var ht=a.$.iview.IDataRenderer;var ct=a.$.iview.IDataElementRendererView;var ut=a.$.iview.IDataElementRenderer;var ft=a.$.iview.IViewController;var _t=a.$.iview.ModelTypeCheck;var pt=a.$.iview.ArgsUtil;var vt=a.$.iview.DataLevelUtil;var gt=a.$.iview.JSONDataParser;var Ct=a.$.iview.HTMLDataParser;var mt=_t.isData;var yt=pt.getSingleObjectArg}q(D,{WIDGET_MESSAGEBOX_CONFIRM_CLASS:"z-button primary",WIDGET_MESSAGEBOX_CONFIRM_TEXT:"OK",WIDGET_MESSAGEBOX_CANCEL_CLASS:"z-button",WIDGET_MESSAGEBOX_CANCEL_TEXT:"Cancel"});var bt={to_left:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='15 18 9 12 15 6'></polyline></svg></span>",to_right:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='9 18 15 12 9 6'></polyline></svg></span>",to_up:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='18 15 12 9 6 15'></polyline></svg></span>",to_down:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'></polyline></svg></span>",more_h:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='1'></circle><circle cx='19' cy='12' r='1'></circle><circle cx='5' cy='12' r='1'></circle></svg></span>",x:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='18' y1='6' x2='6' y2='18'></line><line x1='6' y1='6' x2='18' y2='18'></line></svg></span>",loader:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='12' y1='2' x2='12' y2='6'></line><line x1='12' y1='18' x2='12' y2='22'></line><line x1='4.93' y1='4.93' x2='7.76' y2='7.76'></line><line x1='16.24' y1='16.24' x2='19.07' y2='19.07'></line><line x1='2' y1='12' x2='6' y2='12'></line><line x1='18' y1='12' x2='22' y2='12'></line><line x1='4.93' y1='19.07' x2='7.76' y2='16.24'></line><line x1='16.24' y1='7.76' x2='19.07' y2='4.93'></line></svg></span>",minus:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='5' y1='12' x2='19' y2='12'></line></svg></span>"};var Dt={remove:bt.x,refresh:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='1 4 1 10 7 10'></polyline><polyline points='23 20 23 14 17 14'></polyline><path d='M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15'></path></svg></span>",expand_collapsed:bt.to_right,expand_expanded:bt.to_down,checkbox_unchecked:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='3' y='3' width='18' height='18' rx='2' ry='2'></rect></svg></span>",checkbox_checked:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='20 6 9 17 4 12'></polyline></svg></span>",checkbox_indeterminate:bt.minus,sort_asc:bt.to_up,sort_desc:bt.to_down,pagination_to_prev:bt.to_left,pagination_to_next:bt.to_right,pagination_to_prev_more:bt.more_h,pagination_to_next_more:bt.more_h,tabs_scroll_to_left_arrow:bt.to_left,tabs_scroll_to_right_arrow:bt.to_right,tabs_scroll_to_up_arrow:bt.to_up,tabs_scroll_to_down_arrow:bt.to_down,notify_success:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><path d='M22 11.08V12a10 10 0 1 1-5.93-9.14'></path><polyline points='22 4 12 14.01 9 11.01'></polyline></svg></span>",notify_info:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><line x1='12' y1='16' x2='12' y2='12'></line><line x1='12' y1='8' x2='12' y2='8'></line></svg></span>",notify_warning:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><line x1='12' y1='8' x2='12' y2='12'></line><line x1='12' y1='16' x2='12' y2='16'></line></svg></span>",notify_error:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><line x1='15' y1='9' x2='9' y2='15'></line><line x1='9' y1='9' x2='15' y2='15'></line></svg></span>"};var Rt=function(e){return q({checkbox_visible:false,checkbox_unchecked_icon_template:Dt.checkbox_unchecked,checkbox_checked_icon_template:Dt.checkbox_checked,checkbox_indeterminate_icon_template:Dt.checkbox_indeterminate,three_states_check:true,check_on_click:false},e)};var wt=function(e){return q({expand_icon_visible:true,expand_collapsed_icon_template:Dt.expand_collapsed,expand_expanded_icon_template:Dt.expand_expanded,expand_on_click:false,expand_on_dbl_click:false,accordion:false},e)};var Pt=function(e){return q({sortable:false,sort_mode:"single",multiple_sort_key:"ctrl",sort_orders:["asc","desc",null],sort_asc_icon_template:Dt.sort_asc,sort_desc_icon_template:Dt.sort_desc},e)};var xt=function(e){return q({minimize_icon_template:bt.minus,minimize_width:20,minimize_label:"..."},e)};var At={render:function(e,t){t=q({icon:null,name:null},t);var r=/<%(.+?)%>/;if(r.test(e)===true){r=/<%(.+?)%>/g;var i=/(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g;var n="with(obj) { var r=[];\n";var a=0;var o;var s=function(e,t){t?n+=e.match(i)?e+"\n":"r.push("+e+");\n":n+=e!=""?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"";return s};while(o=r.exec(e)){s(e.slice(a,o.index))(o[1],true);a=o.index+o[0].length}s(e.substr(a,e.length-a));n=(n+'return r.join(""); }').replace(/[\r\t\n]/g," ");var l;try{l=new Function("obj",n).apply(t,[t])}catch(e){d.throwError("Template Engine error:'"+e.message+"'"+" in \n\nCode:\n"+n+"\n",null,"error")}return l}return e}};var kt={getContentInfo:function(e){if(e){var t,r;if(O(e)){if(e.startsWith("url:")){t="url";r=e.substr(4)}else if(e.startsWith("element:")){t="element";r=e.substr(8)}else{t="string";r=e}}else if(w.isElement(e)){t="element";r=e}else if(B(e)){t=e.type;r=e.content}return{type:t,content:r}}return null},getContentElement:function(e){var t=kt.getContentInfo(e);if(t&&t.type==="element"){var r=t.content;if(r){return le(r)}}return null},getLabelContent:function(e){if(B(e)){return e}return{content:e==null?"":e+""}},getContentObject:function(e){var t=kt.getContentInfo(e);if(t){var r=t.type,i=t.content,n,a;if(i){if(r==="string"){n=Re("div","text-content");n.innerHTML=i}else if(r==="element"){n=le(i);if(n){var o=n._z_$_init_parentNode||n.parentNode;n._z_$_init_parentNode=o;a={parent:o,display:ve(n,"display")}}}else if(r==="url"){n=kt.createContentIFrame(i)}if(n){return{type:r,contentEle:n,contentReleaseConfig:a}}}}return null},createContentIFrame:function(e){var t=Re("iframe");t.src=e;return t},releaseContent:function(e){if(e){var t=e.contentReleaseConfig;var r=e.contentEle;we(r);if(t){var i=t.parent;if(i){i.appendChild(r)}delete r._z_$_init_parentNode;pe(r,"display",t.display)}}},showContent:function(e){if(e){e.vislbe=true;var t=e.type;var r=e.contentEle;if(t==="string"||t==="element"){pe(r,"display","block")}else if(t==="url"){ge(r,"visibility");ge(r,"opacity");ge(r,"width");ge(r,"height")}}},hideContent:function(e){if(e){e.vislbe=false;var t=e.type;var r=e.contentEle;if(t==="string"||t==="element"){pe(r,"display","none")}else if(t==="url"){pe(r,"visibility","hidden");pe(r,"opacity",0);pe(r,"width",0);pe(r,"height",0)}}}};var Tt={addWidgetClass:function(e){de(e,"z-widget");e.setAttribute("tabindex",-1)},isEvtInRendererNode:function(e){var t=e.target;while(t&&t!==document){if(t.getAttribute("role")==="node"){return true}t=t.parentNode}return false},preventDefault:function(e){e.preventDefault()},findNextUsableDataByDom:function(e,t){var r;var i=se("[__z_did_]",e.getRendererRootContainer());if(i.length>0){if(t){var n=F(i,function(e){return e.parentNode===t.parentNode});r=Tt._findNextUsableDataByArray(e,n,t);if(r){return r}}r=Tt._findNextUsableDataByArray(e,i,t)}return r},_findNextUsableDataByArray:function(e,t,r){var i;var n=t.length;if(n>0){var a=-1;if(r){a=t.indexOf(r)}else{a=-1}for(var o=a+1;o<n;o++){i=Tt._isRenderDataUsable(e,t[o]);if(i){return i}}for(var s=a-1;s>=0;s--){i=Tt._isRenderDataUsable(e,t[s]);if(i){return i}}}},_isRenderDataUsable:function(e,t){var r=t.getAttribute("__z_did_");var i=j(e.getDataArray(false),function(e){return e.id()===r});if(i){if(e.isVisible(i)&&!e._isDisabled(i)&&e.isSelectable(i)){return i}}}};var Et={initAllDataRenderer:function(i){i._getSortDataArray(i.getDataArray(false)).forEach(function(e){var t=i.createDataRenderer(e);if(t){i._rendererArrayMap.add(e.id(),t);var r=t.getRenderer();if(r){i.getRendererContainer(e).appendChild(r)}}})},reorderAllDataRenderer:function(i){i._getSortDataArray(i.getDataArray(false)).forEach(function(e){var t=i.getDataRenderer(e);if(t){var r=t.getRenderer();if(r){i.getRendererContainer(e).appendChild(r)}}})},insertElementRenderer:function(e,t,r){var i=e._getSortDataArray(e.getDataArray(false));var n=i.indexOf(t);var a=i.length;var o,s;for(var l=n+1;l<a;l++){o=e.getDataRenderer(i[l]);if(o){s=o.getRenderer();if(s){s.parentNode.insertBefore(r.getRenderer(),s);return}}}e.getRendererContainer(t).appendChild(r.getRenderer())}};var St={initAllDataRenderer:function(t){t._getSortDataArray(t.getProvider().toRootArray(false)).forEach(function(e){St.appendDataRenderer(t,e)})},appendDataRenderer:function(e,t){var r=e.createDataRenderer(t);if(r){e._rendererArrayMap.add(t.id(),r);var i=r.getRenderer();if(i){e.getRendererContainer(t).appendChild(i);St.appendDataChildrenRenderer(e,t)}}},appendDataChildrenRenderer:function(t,e){var r=F(e.getChildren(false),t.containsData,t);if(r.length>0){r=t._getSortDataArray(r);r.forEach(function(e){St.appendDataRenderer(t,e)})}},reorderAllDataRenderer:function(t){t._getSortDataArray(t.getProvider().toRootArray(false)).forEach(function(e){St.reAppendDataRenderer(t,e)})},reAppendDataRenderer:function(e,t){var r=e.getDataRenderer(t);if(r){var i=r.getRenderer();if(i){e.getRendererContainer(t).appendChild(i);St.reAppendDataChildrenRenderer(e,t)}}},reAppendDataChildrenRenderer:function(t,e){var r=F(e.getChildren(false),t.containsData,t);if(r.length>0){r=t._getSortDataArray(r);r.forEach(function(e){St.reAppendDataRenderer(t,e)})}},insertElementRenderer:function(e,t,r,i){var n=e._getSortDataArray(vt.getAddedSiblingArray(e.getProvider(),t));var a=n.indexOf(t);var o=n[a+1];if(o){var s=e.getDataRenderer(o);var l=s.getRenderer();l.parentNode.insertBefore(r.getRenderer(),l)}else{e.getRendererContainer(t).appendChild(r.getRenderer())}if(i===true){St.appendDataChildrenRenderer(e,t)}},removeDataRenderer:function(e,t){if(e.getDataRenderer(t)){e._removeDataRenderer(t);St.removeDataChildrenRenderer(e,t)}},removeDataChildrenRenderer:function(t,e){var r=F(e.getChildren(false),t.containsData,t);if(r.length>0){r.forEach(function(e){St.removeDataRenderer(t,e)})}}};var Lt={appendDataChildrenRenderer:function(i,e){var t=vt.getAddedChildren(i.getProvider(),e);if(t.length>0){t=i._getSortDataArray(t);t.forEach(function(e){var t=i.createDataRenderer(e);if(t){i._rendererArrayMap.add(e.id(),t);var r=t.getRenderer();if(r){Lt.insertElementRenderer(i,e,t,true)}}})}},insertElementRenderer:function(e,t,r,i){var n=Lt._getNextData(e,t);if(n){var a=e.getDataRenderer(n);var o=a.getRenderer();o.parentNode.insertBefore(r.getRenderer(),o)}else{e.getRendererContainer(t).appendChild(r.getRenderer())}if(i===true){Lt.appendDataChildrenRenderer(e,t)}},_getNextData:function(e,t,r){if(r!==false){var i=vt.getAddedChildren(e.getProvider(),t);if(i.length>0){return e._getSortDataArray(i)[0]}}var n=e._getSortDataArray(vt.getAddedSiblingArray(e.getProvider(),t));var a=n[n.indexOf(t)+1];if(a){return a}t=t.getProperty("parent");if(t){return Lt._getNextData(e,t,false)}},updateDataRenderer:function(t,e){var r=t.getDataRenderer(e);if(r){var i=r.getRenderer();if(i){Lt.insertElementRenderer(t,e,r);var n=vt.getAddedChildren(t.getProvider(),e);if(n.length>0){n=t._getSortDataArray(n);n.forEach(function(e){Lt.updateDataRenderer(t,e)})}}}}};var Vt={getVisibleChildren:function(t,e){return F(e.getChildren(false),function(e){return t.containsData(e)&&t._isLevelVisible(e)})},hasChildrenVisible:function(e,t){return Vt.getVisibleChildren(e,t).length>0}};var Mt={initRenderNode:function(e){e._nodeWrapper=Re("a","node");e._nodeWrapper.setAttribute("role","node");e._inWrapper=Re("div","in");e._nodeWrapper.appendChild(e._inWrapper);e.getRenderer().appendChild(e._nodeWrapper)},updateRenderCheckConfig:function(e,t,r,i){if(e.getDataViewProperty(r,"checkbox_visible")===true){i["checkbox_visible"]=true;i["checked"]=t.isChecked(r);i["checkable"]=t.isCheckable(r)}},updateRenderLevelCheckConfig:function(e,t,r,i){if(e.getRenderConfig("checkbox_visible")===true){if(e.getRenderConfig("checked")!==true&&t._isTreeStatesCheck()){i["indeterminate_checked"]=t._hasChildrenChecked(r)}}},updateRenderRemoveConfig:function(e,t,r,i){var n=t.getDataRenderProperty(r,"remove_icon_visible");var a;if(n===true||n===false){a=n}else{a=e.getViewRenderConfig("remove_icon_visible")===true}i["remove_icon_visible"]=a},updateRenderExpandConfig:function(e,t,r,i){var n=t.hasChildrenVisible(r);i["has_children"]=n;if(n){i["expanded"]=t.isExpanded(r);i["expand_icon_visible"]=e.getDataViewProperty(r,"expand_icon_visible")!==false;i["expandable"]=t.isExpandable(r)}},updateRendererCheck:function(e,t,r,i){if(e.getRenderConfig("checkbox_visible")===true){var n=Mt._getCheckboxWrapper(e);n.innerHTML=Mt._getCheckboxTemplate(e);e.insertToNodeWrapperFirst(n)}else{if(e._checkBoxWrapper){we(e._checkBoxWrapper)}}},_getCheckboxTemplate:function(e){if(e.getRenderConfig("checked")===true){return e.getViewRenderConfig("checkbox_checked_icon_template")}else{if(e.getRenderConfig("indeterminate_checked")===true){return e.getViewRenderConfig("checkbox_indeterminate_icon_template")}return e.getViewRenderConfig("checkbox_unchecked_icon_template")}},_getCheckboxClass:function(e){var t=["checkbox"];if(e.getRenderConfig("checked")===true){t.push("checked")}else{if(e.getRenderConfig("indeterminate_checked")===true){t.push("indeterminate")}else{t.push("unchecked")}}if(e.getRenderConfig("checkable")===true){t.push("checkable")}else{t.push("uncheckable")}return t.join(" ")},_getCheckboxWrapper:function(e){if(!e._checkBoxWrapper){e._checkBoxWrapper=Re("span","checkbox");e._checkBoxWrapper.setAttribute("__z_dop_","check")}return e._checkBoxWrapper},updateRendererRemove:function(e,t,r,i){if(e.getRenderConfig("remove_icon_visible")===true){var n=Mt._getRemoveWrapper(e);e.appendToNodeWrapper(n)}else{if(e._removeWrapper){we(e._removeWrapper)}}},_getRemoveWrapper:function(e){if(!e._removeWrapper){e._removeWrapper=Re("span","remove");e._removeWrapper.innerHTML=e.getViewRenderConfig("remove_icon_template");e._removeWrapper.setAttribute("__z_dop_","remove")}return e._removeWrapper},updateRendererExpand:function(e,t,r,i){if(e.getRenderConfig("expand_icon_visible")===true){var n=Mt._getExpandWrapper(e);n.innerHTML=e._getExpandTemplate();ce(n,Mt._getExpandClass(e));e.insertToNodeWrapperFirst(n)}else{if(e._expandWrapper){we(e._expandWrapper)}}},_getExpandTemplate:function(e){if(e.getRenderConfig("expanded")===true){return e.getViewRenderConfig("expand_expanded_icon_template")}else{return e.getViewRenderConfig("expand_collapsed_icon_template")}},_getExpandClass:function(e){var t=["expand"];if(e.getRenderConfig("expanded")===true){t.push("expanded")}else{t.push("collapsed")}if(e.getRenderConfig("expandable")===true){t.push("expandable")}else{t.push("unexpandable")}return t.join(" ")},_getExpandWrapper:function(e){if(!e._expandWrapper){e._expandWrapper=Re("span");e._expandWrapper.setAttribute("__z_dop_","expand")}return e._expandWrapper},updateRenderIn:function(e,t,r,i){var n=e._inWrapper;Pe(n);var a=t.render;if(N(a)){if(a.apply(t,[r,n,e._renderer])===false){return}}else{var o=e.getRenderConfig("template");if(o){n.innerHTML=At.render(o,r.getProperties(false));return}}var s=e.getRenderConfig("icon");if(s){var l=Re("img");l.setAttribute("src",s);n.appendChild(l)}if(e.getRenderConfig("label_visible")===true){var d=Re("span","label");d.innerHTML=e.getRenderConfig("label");n.appendChild(d)}},updateRenderAttributes:function(r,e,t,i){if(r._nodeAttributes){J(r._nodeAttributes,function(e,t){Mt._removeNodeWrapperAttribute(r,e,t)})}r._nodeAttributes=r.getRenderConfig("attributes");if(r._nodeAttributes){J(r._nodeAttributes,function(e,t){Mt._setNodeWrapperAttribute(r,e,t)})}},_removeNodeWrapperAttribute:function(e,t,r){var i=e.getRenderer();if(t==="class"){he(i,r)}else{i.removeAttribute(t,r)}},_setNodeWrapperAttribute:function(e,t,r){var i=e.getRenderer();if(t==="class"){de(i,r)}else{i.setAttribute(t,r)}}};var It={toggleHoverController:function(e,t){if(t===true){if(!e._hoverController){e._hoverController=new Xt}e.addController(e._hoverController)}else{if(e._hoverController){e.removeController(e._hoverController);e._hoverController=null}}}};var zt={startAnimation:function(e,t,r,i){if(!e){return}if(t&&e){var n=function(){if(r){r.apply(i)}Te(e,"animationend",n);delete e._animationendListener_$;he(e,t)};ke(e,"animationend",n);e._animationendListener_$=n;de(e,t)}else{if(r){r.apply(i)}}},completeAnimation:function(e){if(!e){return}var t=e._animationendListener_$;if(t){t();delete e._animationendListener_$}}};var Ot={VIEW_ATTR_TYPE_MAP:{label_visible:"boolean",expand_icon_visible:"boolean",checkbox_visible:"boolean",remove_icon_visible:"boolean",selectable:"boolean",checkable:"boolean",expandable:"boolean",select_on_hover:"boolean",expand_on_click:"boolean",expand_on_dbl_click:"boolean",make_visible_on_select:"boolean",accordion:"boolean",auto_select:"boolean",three_states_check:"boolean",check_on_click:"boolean",sortable:"boolean"},VIEW_ATTR_METHOD_MAP:{on_data_click:"onDataClick",on_data_dblclick:"onDataDblClick",on_expand:"onExpand",on_collapse:"onCollapse"},VIEW_ATTR_INIT_METHOD_MAP:{init_expand_all:"expandAll"},DATA_ATTR_TYPE_MAP:{visible:"boolean",label_visible:"boolean",expand_icon_visible:"boolean",checkbox_visible:"boolean",remove:"boolean",selectable:"boolean",checkable:"boolean",expandable:"boolean",remove_icon_visible:"boolean",disabled:"boolean"},VIEWS:{"zw-pagination":{level:false,view:"Pagination"},"zw-grid":{level:false,view:"Grid",parse:function(e,t,r){var i=se("tr>th",t);var n=[];if(i.length>0){var a=[];i.forEach(function(e){var t=e.parentNode;if(a.indexOf(t)<0){a.push(t)}});var o=[];a.forEach(function(e){o=$(o,Ct.parseToObjectArray(e,true,r))});var s=o.length;var l=se("tr>td",t);var d;l.forEach(function(e,t){if(t%s===0){d={};Ct.parseAttributes(e.parentNode,d);n.push(d)}var r=o[t%s];d[r.field]=e.innerHTML});if(N(r)){n.forEach(function(e){Ct._convertItemAttr(e,r)})}e.setColumns(o)}return n}},"zw-listview":{level:false,view:"ListView"},"zw-tree":{level:true,view:"Tree"},"zw-collapse":{level:false,view:"Collapse"},"zw-carousel":{level:false,view:"Carousel"},"zw-tabs":{level:false,view:"Tabs"}},parse:function(i,n){i=i||{};J(Ot.VIEWS,function(t,e){var r=a.dom.queryAll(t,n);if(r.length===0){return}W(r,function(e){Ot.parseView(t,e,i)})})},parseView:function(e,t,r){r=r||{};var i=Ot.VIEWS[e];var n=Ot.VIEW_ATTR_TYPE_MAP;var a=function(e,t){return Ot._convertAttrValue(e,t,n,r)};var o=Ot.DATA_ATTR_TYPE_MAP;var s=function(e,t){return Ot._convertAttrValue(e,t,o,r)};var l=Ot.VIEW_ATTR_METHOD_MAP;var d=Ot.VIEW_ATTR_INIT_METHOD_MAP;var h=Ot.parseViewArgs(t,a);var c,u;if(h.hasOwnProperty("var_name")){c=h.var_name;delete h.var_name}if(h.hasOwnProperty("data")){u=r[h.data];delete h.data}var f=m.createInstance(i.view,[h]);if(!f){return}if(c){r[c]=f}var _;if(N(i.parse)){_=i.parse(f,t,s)}else{_=Ct.parseToObjectArray(t,i.level===true,s)}_=$(_,u);if(f.addData){var p=gt.parse(_,r.data_keyword_mapping);var v=[],g=[],C=[];p.forEach(function(e){Ot.filterDataAttach(e,"selected",v);Ot.filterDataAttach(e,"checked",g);Ot.filterDataAttach(e,"expanded",C)});f.addData(p);Ot.setViewAttachData(f,f.addSelect,v);Ot.setViewAttachData(f,f.addCheck,g);Ot.setViewAttachData(f,f.expand,C)}Ot.callViewInitMethod(f,h,d);Ot.setViewCallBackMethod(f,h,r,l);t.parentNode.insertBefore(f.getRoot(),t.nextSibling);f.update();we(t);return f},parseViewArgs:function(e,r){var i={};Ct.parseAttributes(e,i);Ct.parseTemplate(e,i);if(N(r)){J(i,function(e,t){i[e]=r(e,t)})}return i},callViewInitMethod:function(i,e,n){J(e,function(e,t){if(n.hasOwnProperty(e)){var r=i[n[e]];if(N(r)){i.removeProperty(e);r.apply(i,[])}}})},setViewCallBackMethod:function(i,e,n,a){J(e,function(e,t){if(a.hasOwnProperty(e)){var r=n[t];if(r){i.setCallBack(a[e],r,n)}i.removeProperty(e)}});return e},filterDataAttach:function(e,t,r){if(e.getProperty(t)==="true"){r.push(e);e.removeProperty(t)}return r},setViewAttachData:function(e,t,r){if(r.length>0&&t){t.apply(e,[r])}},_convertAttrValue:function(e,t,r,i){if(r.hasOwnProperty(e)){var n=r[e];if(n==="boolean"){return t==="true"}if(n==="app_value"){t=i[t]}}return t}};var Ut=function(e){return{setCurrentContent:function(e,t){if(t===true){kt.releaseContent(this._currentContentObj)}this._currentContentObj=e;if(this._currentContentObj){this.appendContent(this._currentContentObj);this._showContent(this._currentContentObj)}},appendContent:function(e,t){if(e){if(t===true){kt.hideContent(e)}var r=e.contentEle;var i=this.getContentContainer();if(r.parentNode!==i){i.appendChild(r)}}},_showContent:function(e){if(!e){return}if(this.beforeShowContent(e)===false){return}kt.showContent(e)},beforeShowContent:function(e){},_hideContent:function(e){if(!e){return}if(this.beforeHideContent(e)===false){return}kt.hideContent(e)},beforeHideContent:function(e){}}};var Bt=function(e){return q({_getDataContentArrayMap:function(){if(!this._dataContentArrayMap){this._dataContentArrayMap=new s}return this._dataContentArrayMap},isDataContentAdded:function(e){return this._getDataContentArrayMap().hasOwnProperty(e.id())},setCurrentDataContent:function(e){var r=e.id();this._getDataContentArrayMap().eachObject(function(e,t){if(e!==r){this._hideContent(t)}},this);var t;if(!this._getDataContentArrayMap().has(r)){this.addDataContent(e)}t=this._getDataContentArrayMap().get(r);this.setCurrentContent(t)},addDataContent:function(e){var t=kt.getContentObject(e.getProperty("content"));var r=e.id();if(t){t._id=r}this._getDataContentArrayMap().add(r,t);this.appendContent(t,true);return t},removeDataContent:function(e){var t=e.id();var r=this._getDataContentArrayMap().get(t);this._getDataContentArrayMap().remove(t);kt.releaseContent(r);if(r===this._currentContentObj){this._currentContentObj=null}},clearDataContent:function(){this._currentContentObj=null;this._getDataContentArrayMap().eachArray(kt.releaseContent);this._getDataContentArrayMap().clear()},getDataContent:function(e){return this._getDataContentArrayMap()[e.id()]}},Ut(e))};var Nt=function(n){return q({_isTreeStatesCheck:function(){return this.getProperty("three_states_check")!==false},_isCheckedByDefault:function(e){return this._checkProvider.contains.apply(this._checkProvider,arguments)},_onCheckAddByDefault:function(e){this._addCheckNeedUpdateData(e);this._callOn("onCheckAdd","on.check.add",e,[e])},_onCheckRemoveByDefault:function(e){this._addCheckNeedUpdateData(e);this._callOn("onCheckRemove","on.check.remove",e,[e])},_onCheckSetByDefault:function(e){e.forEach(this._addCheckNeedUpdateData,this);this._callOn("onCheckSet","on.check.set",e,[e])},_isAllChildrenOrDataChecked:function(e){var t=vt.getAddedChildren(this.getProvider(),e);if(t.length===0){return this._isCheckedByDefault(e)}var r=true;W(t,function(e){if(!this._isAllChildrenOrDataChecked(e)){r=false;return false}},this);return r},_hasChildrenChecked:function(e){var t=vt.getAddedChildren(this.getProvider(),e);var r=false;W(t,function(e){if(this._hasChildrenCheckedImpl(e)===true){r=true;return false}},this);return r},_hasChildrenCheckedImpl:function(e){var t=vt.getAddedChildren(this.getProvider(),e);if(t.length===0){return this._isCheckedByDefault(e)}var r=false;W(t,function(e){if(this._hasChildrenCheckedImpl(e)===true){r=true;return false}},this);return r},_addDescendantCheck:function(e){var t=vt.getAddedDescendantArray(this.getProvider(),e);if(t.length===0){return}this._isUpdatingRelatedDataCheck=true;t.forEach(function(e){if(!this._isCheckedByDefault(e)){this.addCheck(e)}},this);this._isUpdatingRelatedDataCheck=false},_addAncestorCheck:function(e){this._isUpdatingRelatedDataCheck=true;W(vt.getAncestorArray(e),function(e){if(this._isCheckedByDefault(e)||!this._isAllChildrenOrDataChecked(e)){return false}else{this.addCheck(e)}},this);this._isUpdatingRelatedDataCheck=false},_removeAncestorCheck:function(e){this._isUpdatingRelatedDataCheck=true;W(vt.getAncestorArray(e),function(e){if(!this._isCheckedByDefault(e)){return false}else{this.removeCheck(e)}},this);this._isUpdatingRelatedDataCheck=false},_removeDescendantCheck:function(e){var t=vt.getAddedDescendantArray(this.getProvider(),e);if(t.length===0){return}this._isUpdatingRelatedDataCheck=true;t.forEach(function(e){if(this._isCheckedByDefault(e)){this.removeCheck(e)}},this);this._isUpdatingRelatedDataCheck=false},_onDataAdd:function(e){n.superClass._onDataAdd.apply(this,arguments);if(this._isTreeStatesCheck()){this._updateParentCheck(e.getProperty("parent"))}},_onDataRemove:function(e){n.superClass._onDataRemove.apply(this,arguments);if(this._isTreeStatesCheck()){this._updateParentCheck(e.getProperty("parent"))}},_onDataChange:function(e,t){n.superClass._onDataChange.apply(this,arguments);if(this._isTreeStatesCheck()&&t.property==="parent"){var r=t.old_value;var i=t.new_value;this._updateParentCheck(r);this._updateParentCheck(i)}},_updateParentCheck:function(e){if(e){if(this._isCheckedByDefault(e)){if(!this._isAllChildrenOrDataChecked(e)){this.removeCheck(e)}}else{if(this._isAllChildrenOrDataChecked(e)){this.addCheck(e)}}}}},at(n),{isChecked:function(e){if(this._isTreeStatesCheck()){return this._isAllChildrenOrDataChecked(e)}return this._isCheckedByDefault(e)},_onCheckAdd:function(e){if(this._isTreeStatesCheck()){if(this._isUpdatingRelatedDataCheck!==true){this._addAncestorCheck(e);this._addDescendantCheck(e)}}this._onCheckAddByDefault(e)},_onCheckRemove:function(e){if(this._isTreeStatesCheck()){if(this._isUpdatingRelatedDataCheck!==true){this._removeAncestorCheck(e);this._removeDescendantCheck(e)}}this._onCheckRemoveByDefault(e)},_onCheckSet:function(e){if(this._isTreeStatesCheck()){if(this._isUpdatingRelatedDataCheck!==true){e.forEach(this._addAncestorCheck,this);e.forEach(this._addDescendantCheck,this)}}this._onCheckSetByDefault(e)}})};var Ht=function(e){return{_initAllDataRenderer:function(){return Et.initAllDataRenderer(this)},_reorderAllDataRenderer:function(){return Et.reorderAllDataRenderer(this)},_addDataRendererImpl:function(e,t){return Et.insertElementRenderer(this,e,t)},_updateDataRendererImpl:function(e,t,r){if(this.getProperty("sort_compare")){return Et.insertElementRenderer(this,e,t)}}}};var $t=function(i){return{getRendererContainer:function(e){var t=e.getProperty("parent");if(t){var r=this.getDataRenderer(t);return r.getChildrenRendererContainer(e)}else{return i.superClass.getRendererContainer.apply(this,arguments)}},_initAllDataRenderer:function(){return St.initAllDataRenderer(this)},_reorderAllDataRenderer:function(){return St.reorderAllDataRenderer(this)},_addDataRenderer:function(e){if(vt.isAncestorAdded(this.getProvider(),e)){return i.superClass._addDataRenderer.apply(this,arguments)}},_addDataRendererImpl:function(e,t){return St.insertElementRenderer(this,e,t,true)},_updateDataRenderer:function(e){if(vt.isAncestorAdded(this.getProvider(),e)){if(!this.getDataRenderer(e)){var t=this.createDataRenderer(e);if(t){this._rendererArrayMap.add(e.id(),t);St.insertElementRenderer(this,e,t,true)}}else{return i.superClass._updateDataRenderer.apply(this,arguments)}}else{St.removeDataRenderer(e)}},_updateDataRendererImpl:function(e,t,r){if(r===true||this.getProperty("sort_compare")){return St.insertElementRenderer(this,e,t)}},expandAll:function(e){var t=this.getDataArray(false);if(e!==false){t=F(t,this._isLevelVisible,this)}return this._expandProvider.set(this._filterExpandableData(t))},_getDataLevel:function(e){var t=this.getProperty("root_data");var r=0;var i=e.getProperty("parent");if(t){r++;while(i&&i!==t){r++;i=i.getProperty("parent")}if(i!==t){return-1}}else{while(i){r++;i=i.getProperty("parent")}}return r},hasChildrenVisible:function(e){return Vt.hasChildrenVisible(this,e)},_isLevelVisible:function(e){if(this.isVisible(e)===false){return false}if(this._isFilterVisible(e)===false){return this._hasDescendantVisible(e)}return true},_hasDescendantVisible:function(e){var t=vt.getAddedDescendantArray(this.getProvider(),e);var r=false;W(t,function(e){if(this._isLevelVisible(e)){r=true;return false}},this);return r},_isVisible:function(e){if(this._isLevelVisible(e)===false){return false}if(this._isExpand_===true){if(!this._isDataAncestorExpanded(e)){return false}}return true},_getDataRelatedDataArray:function(e,t,r){var i;if(t){i=vt.getAncestorArray(e)}else{i=[]}var n;if(r){n=vt.getAddedDescendantArray(this.getProvider(),e)}else{n=[]}return $(n,i)},_isVisibleByRootData:function(e){var t=this.getProperty("root_data");if(t){if(t===e){return true}if(vt.getAncestorArray(t).indexOf(e)>=0){return true}if(vt.getAddedDescendantArray(this.getProvider(),t).indexOf(e)>=0){return true}return false}return true},_isBodyVisibleByRootData:function(e){var t=this.getProperty("root_data");if(t){if(vt.getAncestorArray(t).indexOf(e)>=0){return false}}return true},_isRootData:function(e){var t=this.getProperty("root_data");if(t){return t===e}return false}}};var Wt=function(r){var e=$t(r);delete e.getRendererContainer;return q(e,{_addDataRendererImpl:function(e,t){return Lt.insertElementRenderer(this,e,t,true)},_updateDataRenderer:function(e){if(vt.isAncestorAdded(this.getProvider(),e)){if(!this.getDataRenderer(e)){var t=view.createDataRenderer(e);if(t){this._rendererArrayMap.add(e.id(),t);Lt.insertElementRenderer(this,e,t,true)}}else{return r.superClass._updateDataRenderer.apply(this,arguments)}}else{St.removeDataRenderer(e)}},_updateDataRendererImpl:function(e,t,r){if(r===true||this.getProperty("sort_compare")){Lt.updateDataRenderer(this,e,t)}},_isVisibleByRootData:function(e){var t=this.getProperty("root_data");if(t){if(t===e){return true}if(vt.getAddedDescendantArray(this.getProvider(),t).indexOf(e)>=0){return true}return false}return true}})};var Ft=function(t){return{_onDataRemove:function(e){t.superClass._onDataRemove.apply(this,arguments);this._removeHover(e,false)},_onDataClear:function(){t.superClass._onDataClear.apply(this,arguments);this._clearHover(false)},_onModelChange:function(e){t.superClass._onModelChange.apply(this,arguments);if(e==="set_provider"){this._clearHover(false)}},setHoverData:function(e){this._setHoverData(e,true)},isHover:function(e){if(e){return this._hoverData===e}return false},isHoverable:function(e){return true},_removeHover:function(e,t){if(e===this._hoverData){this._setHoverData(null,t)}},_clearHover:function(e){this._setHoverData(null,e)},_setHoverData:function(e,t){if(this._hoverData!==e){var r=t!==false;if(r&&this._hoverData){this._onHoverChange(this._hoverData,false)}this._hoverData=e;if(r&&this._hoverData){this._onHoverChange(this._hoverData,true)}}},_addHoverNeedUpdateData:function(e){this._addNeedUpdateData(e,false,false)},_onHoverChange:function(e,t){this._addHoverNeedUpdateData(e);this._update();this._callOn("onHoverChange","on.hover.change",{data:e,isHover:t},[e,t])},onHoverChange:function(e,t){this.addListener("on.hover.change",e,t)}}};var jt=function(){jt.superClass.constructor.apply(this,arguments);Tt.addWidgetClass(this.getRoot());this.addController(new qt);this._toggleHoverController()};ee(jt,ct,q({___zdefaults_:{template:null,remove_icon_visible:false,remove_icon_template:Dt.remove,auto_select:false,select_on_hover:false,hoverable:false},_onViewChange:function(e,t,r){jt.superClass._onViewChange.apply(this,arguments);if(e==="select_on_hover"){this._toggleHoverController()}else if(e==="hoverable"){this._toggleHoverController()}else if(e==="auto_select"&&this._selectProvider){this._doViewAutoSelectUpdate()}},_doViewAutoSelectUpdate:function(){if(this._needAutoSelect()){var e=Tt.findNextUsableDataByDom(this);if(e){this.setSelect(e)}}},_toggleHoverController:function(){It.toggleHoverController(this,this.getProperty("hoverable")===true||this.getProperty("select_on_hover")===true)},_onControllerChange:function(e){if(e==="set"){this._toggleHoverController()}},beforeRemove:function(e){},_onDataAdd:function(e){jt.superClass._onDataAdd.apply(this,arguments);if(this._needAutoSelect()&&this._isDataAutoSelectable(e)){this.setSelect(e)}},_needAutoSelect:function(e){if(arguments.length>0){return this.getLastSelected()===e&&this.getProperty("auto_select")!==false}return!this.getLastSelected()&&this.getProperty("auto_select")!==false},_isDataAutoSelectable:function(e){return e!=null&&this.isVisible(e)&&!this._isDisabled(e)&&this.isSelectable(e)}},Ft(jt),{_onDataRemove:function(e){var t;if(this._needAutoSelect(e)){var r=this.getDataRenderer(e);var i;if(r){i=r.getRenderer()}t=Tt.findNextUsableDataByDom(this,i)}jt.superClass._onDataRemove.apply(this,arguments);if(t){this.setSelect(t)}this._removeHover(e,false)},_onModelChange:function(e){jt.superClass._onModelChange.apply(this,arguments);if(e==="set_provider"){if(this._needAutoSelect()){var t=Tt.findNextUsableDataByDom(this);if(t){this.setSelect(t)}}this._clearHover(false)}}}));var Gt=function(){Gt.superClass.constructor.apply(this,arguments)};ee(Gt,ut,{getChildrenRendererContainer:function(e){return this._childrenRendererContainer},updateRenderConfig:function(e,t,r){Gt.superClass.updateRenderConfig.apply(this,arguments);r["template"]=this.getDataViewProperty(t,"template");r["selectable"]=e.isSelectable(t);r["hover"]=e.isHover(t)},updateRendererStatus:function(e,t,r){Gt.superClass.updateRendererStatus.apply(this,arguments);fe(this._renderer,"unselectable",this.getRenderConfig("selectable")!==true);fe(this._renderer,"hover",this.getRenderConfig("hover")===true)}});var qt=function(){qt.superClass.constructor.apply(this,arguments)};ee(qt,ft,{getViewDefaultTypes:function(){return["click","dblclick"]},handle_click:function(e){var t=this.getView();var r=t.getDataAt(e);if(r){if(t._isDisabled(r)){return}if(this.isHitRemove(e)){this.handleRemove(r,e);return}if(this.isHitCheckBox(e)){this.handleCheck(r,e);return}if(this.isHitExpand(e)){this.handleExpand(r,e);return}this._handleClickAction(r,e);t._onDataClick(r,e)}},_handleClickAction:function(e,t){var r=this.getView();if(r._isExpandable&&r._isExpandable(e)&&r.getProperty("expand_on_click")===true){if(this.handleExpand(e,t)===true){return true}}if(r.isCheckable&&(r._getDataViewProperty(e,"checkbox_visible")===true||r.hasCheckColumn&&r.hasCheckColumn()===true)){if(r.isCheckable(e)&&r.getProperty("check_on_click")===true){if(this.handleCheck(e,t)===true){return true}}}this.handleSelect(e,t)},handleRemove:function(e,t){var r=this.getView();var i=r.beforeRemove(e);if(N(i)){i(function(){r.removeData(e)});return}if(i!==false){r.removeData(e)}},handleSelect:function(e,t){var r=this.getView();if(r.isSelectable(e)){if(!r.isSelected(e)){r.setSelect(e)}return true}return false},handleCheck:function(e,t){var r=this.getView();if(r.toggleCheck&&r.isCheckable(e)){r.toggleCheck(e);return true}return false},handleExpand:function(e,t){var r=this.getView();if(r.toggleExpand&&r.isExpandable(e)){r.toggleExpand(e);return true}return false},handle_dblclick:function(e){e.stopPropagation();var t=this.getView();var r=t.getDataAt(e);if(r){if(t._isDisabled(r)){return}if(!this._isHitOPTarget(e)){if(t.getProperty("expand_on_click")!==true&&t.getProperty("expand_on_dbl_click")===true){this.handleExpand(r,e)}}t._onDataDblClick(r,e)}},isHitCheckBox:function(e){return this._isHitOPTypeTarget(e,"check")},isHitRemove:function(e){return this._isHitOPTypeTarget(e,"remove")},isHitExpand:function(e){return this._isHitOPTypeTarget(e,"expand")},_isHitOPTarget:function(e){var t=A.getEventTarget(e,"[__z_dop_]");return t!=null},_isHitOPTypeTarget:function(e,t){var r=A.getEventTarget(e,"[__z_dop_]");if(r){return r.getAttribute("__z_dop_")===t}return false}});var Xt=function(){Xt.superClass.constructor.apply(this,arguments)};ee(Xt,ft,{getViewDefaultTypes:function(){return["mouseover","mouseleave"]},handle_mouseover:function(e){var t=this._view.getDataAt(e);if(t){if(this._view._isDisabled(t)){return}if(this._view.isHoverable(t)){if(!this._view.isHover(t)){this._view.setHoverData(t);if(this._view.getProperty("select_on_hover")===true){if(this._view.isSelectable(t)){if(!this._view.isSelected(t)){this._view.setSelect(t)}}}}}}},handle_mouseleave:function(e){this._view.setHoverData(null)}});var Jt=function(){this._rootUL=Re("ul","items");Jt.superClass.constructor.apply(this,arguments);this.getRoot().appendChild(this._rootUL)};ee(Jt,jt,{getRendererRootContainer:function(){return this._rootUL},getRendererContainer:function(e){return this._rootUL},getDataRendererClass:function(e){return Qt}});var Kt=function(){Kt.superClass.constructor.apply(this,arguments)};ee(Kt,Jt,q({___zdefaults_:Rt()},Ht(Kt),at(Kt)));var Yt=function(){Yt.superClass.constructor.apply(this,arguments)};ee(Yt,Jt,q({___zdefaults_:q(Rt(),wt()),_onViewChange:function(e,t,r){Yt.superClass._onViewChange.apply(this,arguments);this._doViewThreeStatesCheckUpdate(e)},_doViewThreeStatesCheckUpdate:function(e){if(e==="three_states_check"){if(this._checkProvider)this.clearCheck()}},getDataRendererClass:function(e){return Zt},getDataAt:function(e){if(!Tt.isEvtInRendererNode(e)){return null}return Yt.superClass.getDataAt.apply(this,arguments)},makeVisible:function(e){if(e){var t=vt.getAncestorArray(e);t.forEach(function(e){this.expand(e)},this);Yt.superClass.makeVisible.apply(this,arguments)}}},$t(Yt),Nt(Yt),ot(Yt),{_isExpandable:function(e){var t=false;if(!this.hasChildrenVisible(e)){t=true}if(t===true){return false}if(this.isExpandable(e)===false){return false}return true}}));var Qt=function(){this._renderer=Re("li","item");Mt.initRenderNode(this);Qt.superClass.constructor.apply(this,arguments)};ee(Qt,Gt,{updateRenderConfig:function(e,t,r){Qt.superClass.updateRenderConfig.apply(this,arguments);r["attributes"]=e.getDataRenderProperty(t,"attributes");Mt.updateRenderCheckConfig(this,e,t,r);Mt.updateRenderRemoveConfig(this,e,t,r)},updateRenderer:function(e,t,r){Qt.superClass.updateRenderer.apply(this,arguments);Mt.updateRendererCheck(this,e,t,r);Mt.updateRendererRemove(this,e,t,r);Mt.updateRenderIn(this,e,t,r);Mt.updateRenderAttributes(this,e,t,r)},updateRendererStatus:function(e,t,r){Qt.superClass.updateRendererStatus.apply(this,arguments);fe(this._renderer,"checked",this.getRenderConfig("checked")===true);fe(this._renderer,"uncheckable",this.getRenderConfig("checkable")===false)},insertToNodeWrapperFirst:function(e){var t=this._nodeWrapper.firstElementChild;if(t!==e){this._nodeWrapper.insertBefore(e,t)}},appendToNodeWrapper:function(e){this._nodeWrapper.appendChild(e)},getNodeWrapper:function(){return this._nodeWrapper},reBuildRenderer:function(){this._renderer.appendChild(this._nodeWrapper)}});var Zt=function(){this._childrenRendererContainer=Re("ul","children");Zt.superClass.constructor.apply(this,arguments)};ee(Zt,Qt,{_isRendererVisible:function(e,t){var r=Zt.superClass._isRendererVisible.apply(this,arguments);if(r===true){r=e._isVisibleByRootData(t)}return r},_isRendererBodyVisible:function(e,t){return e._isBodyVisibleByRootData(t)},updateRenderConfig:function(e,t,r){Zt.superClass.updateRenderConfig.apply(this,arguments);r["body_visible"]=this._isRendererBodyVisible(e,t);r["is_root_data"]=e._isRootData(t);Mt.updateRenderLevelCheckConfig(this,e,t,r);Mt.updateRenderExpandConfig(this,e,t,r)},updateRenderer:function(e,t,r){var i=this._renderer;fe(i,"body_hidden",this.getRenderConfig("body_visible")===false);if(this.getRenderConfig("body_visible")===false){pe(this.getNodeWrapper(),"display","none")}else{ge(this.getNodeWrapper(),"display")}fe(i,"root_data",this.getRenderConfig("is_root_data")===true);Zt.superClass.updateRenderer.apply(this,arguments);fe(i,"leaf",this.getRenderConfig("has_children")!==true);Mt.updateRendererExpand(this,e,t,r);this._updateChildrenRendererContainer()},updateRendererStatus:function(e,t,r){Zt.superClass.updateRendererStatus.apply(this,arguments);var i=this._renderer;fe(i,"indeterminate-checked",this.getRenderConfig("indeterminate_checked")===true);fe(i,"expanded",this.getRenderConfig("expanded")===true);fe(i,"unexpandable",this.getRenderConfig("expandable")===false)},_getExpandTemplate:function(){return Mt._getExpandTemplate(this)},_updateChildrenRendererContainer:function(){var e=this._childrenRendererContainer;if(this.getRenderConfig("has_children")===true){if(!e.parentNode){this._renderer.appendChild(e)}if(this.getRenderConfig("expanded")===true){ge(e,"display")}else{pe(e,"display","none")}}else{we(e)}}});var er=function(){this._table=Re("table","table");this._tableColGroup=Re("colgroup");this._table.appendChild(this._tableColGroup);er.superClass.constructor.apply(this,arguments);this.getRoot().appendChild(this._table)};ee(er,jt,{getRendererContainer:function(e){return this._table},getColGroup:function(){return this._tableColGroup}});var tr={isAscSort:function(e){return e==="asc"},getColumnNextOrder:function(e,t){var r=e._getDataViewProperty(t,"sort_orders");var i=t.getProperty("sort");var n=tr.getSortOrder(i);var a=r.indexOf(n);if(a===r.length-1){return r[0]}return r[a+1]},getSortOrder:function(e){if(e){if(B(e)){return e.order}return e}return null},getSortIndex:function(e){if(B(e)){return e.index+1}return null},getSortedColumnArray:function(e){var t=e.filter(function(e){return e.hasProperty("sort")});t.sort(tr._sortMultipleColumnArray);return t},getSortCompare:function(e,t){var o=tr._getSortedColumnCompareArray(e,t);var r;if(o){var s=o.length;if(s>0){r=function(e,t){var r;for(var i=0;i<s;i++){var n=o[i];var a=n.compare;if(tr.isAscSort(n.order)){r=a(e,t)}else{r=-a(e,t)}if(r!==0){return r}}return r}}}return r},_getSortedColumnCompareArray:function(a,e){var t=tr.getSortedColumnArray(e);var r=[];t.forEach(function(n){var e=n.compare;if(!N(e)){e=function(e,t){var r=a._getCellValue(e,n);var i=a._getCellValue(t,n);if(r>i){return 1}if(r<i){return-1}return 0}}r.push({order:tr.getSortOrder(n.getProperty("sort")),compare:e})});return r},setColumnSort:function(e,t,r,i){if(r){if(i){var n=tr.getSortedColumnArray(e);var a=n.length;if(a===0){t.set("sort",r)}else if(a===1){if(n[0]===t){t.set("sort",r)}else{t.set("sort",{order:r,index:1});tr.updateColumnSortIndex(e)}}else{var o;if(n.indexOf(t)>=0){o=t.getProperty("sort").index}else{o=a}t.set("sort",{order:r,index:o})}}else{tr._clearOtherColumnSort(e,t);t.set("sort",r)}}else{if(i){t.removeProperty("sort");tr.updateColumnSortIndex(e)}else{tr.clearColumnSort(e)}}},clearColumnSort:function(e){e.each(function(e){e.removeProperty("sort")})},_clearOtherColumnSort:function(e,t){e.each(function(e){if(t!==e){e.removeProperty("sort")}})},updateColumnSortIndex:function(e){var t=tr.getSortedColumnArray(e);var r=t.length;if(r===1){var i=t[0];var n=i.getProperty("sort");if(B(n)){i.set("sort",n.order)}}else if(r>1){t.forEach(function(e,t){var r=e.getProperty("sort");var i=B(r);if(i&&r.index===t){return}e.set("sort",{order:i?r.order:r,index:t})})}},_sortMultipleColumnArray:function(e,t){var r=e.getProperty("sort");var i=t.getProperty("sort");var n=B(r);var a=B(i);if(n&&!a){return 1}if(!n&&a){return-1}if(n&&a){var o=r.index;var s=i.index;if(o<s){return-1}if(o>s){return 1}}return 0}};var rr={calcMaxLevel:function(t){var n=0;t.toRootArray(false).forEach(function(r){var e=vt.getAddedDescendantArray(t,r);var i=1;e.forEach(function(e){e=e.getProperty("parent");var t=1;while(e){t++;if(e===r){break}e=e.getProperty("parent")}i=Math.max(i,t)});n=Math.max(n,i)});return n},calcDataRowIndex:function(e){var t=0;e=e.getProperty("parent");while(e){t++;e=e.getProperty("parent")}return t},calcColSpan:function(t,e){var r=0;vt.getAddedDescendantArray(t.getProvider(),e).forEach(function(e){if(t._isVisible(e)&&!t.hasChildrenVisible(e)){r++}});return Math.max(1,r)},calcRowSpan:function(e,t){if(e.hasChildrenVisible(t)){return 1}var r=rr.calcMaxLevel(e.getProvider());var i=rr.calcDataRowIndex(t);return r-i},appendAllDataRenderer:function(t){t._getSortDataArray(t.getProvider().toRootArray(false)).forEach(function(e){rr._appendDataRenderer(t,e)})},_appendDataRenderer:function(e,t){var r=e.getDataRenderer(t);if(r){e.getRendererContainer(t).appendChild(r.getRenderer());rr.appendDataChildrenRenderer(e,t)}},appendDataChildrenRenderer:function(t,e){var r=F(e.getChildren(false),t.containsData,t);if(r.length>0){r=t._getSortDataArray(r);r.forEach(function(e){rr._appendDataRenderer(t,e)})}}};var ir=function(){this._tableHead=Re("thead");this._rowTRArray=[];ir.superClass.constructor.apply(this,arguments);this._table.appendChild(this._tableHead);this.setControllers([new nr]);de(this.getRoot(),"z-thead")};ee(ir,er,q({___zdefaults_:q({model_select:true,model_check:true,template:null},Rt({checkbox_visible:false}),Pt(),xt()),getRendererRootContainer:function(){return this._tableHead},getDataRendererClass:function(e){return ar},isCheckColumn:function(e){return this.getProvider()._checkColumn===e},hasCheckColumn:function(e){return this.getProvider()._checkColumn!=null},isTreeColumn:function(e){return this.getProvider()._treeColumn===e},_onModelChange:function(e,t){rr.appendAllDataRenderer(this);ir.superClass._onModelChange.apply(this,arguments)},_clearDataRendererImpl:function(){ir.superClass._clearDataRendererImpl.apply(this,arguments);this._updateHeadTR()},_beforeModelChange:function(e,t){if(e!=="data"||t.property==="parent"){this._updateHeadTR()}ir.superClass._beforeModelChange.apply(this,arguments)},_updateHeadTR:function(){var e=rr.calcMaxLevel(this.getProvider());this._rowTRArray=[];Pe(this._tableHead);for(var t=0;t<e;t++){var r=Re("tr");this._rowTRArray[t]=r;this._tableHead.appendChild(r)}},getRowTRArray:function(){return this._rowTRArray},_onViewUpdate:function(){this._updateColGroup();ir.superClass._onViewUpdate.apply(this,arguments)},_updateColGroup:function(){Pe(this._tableColGroup);var e=this.getProvider();this._colGroupWidth=0;if(e){var t=this.getProperty("root_data");if(t){if(!this.hasChildrenVisible(t)){this._appendColGroupItem(t)}else{e.hEachByData(t,this._appendColGroupItem,this)}}else{e.hEach(this._appendColGroupItem,this)}}this.onColGroupChange(this._tableColGroup)},onColGroupChange:function(){},_getColGroupWidth:function(){return this._colGroupWidth},_isColNeedAdded:function(e){if(this.isVisible(e)===false){return false}if(this._isAllChildrenHidden(e)){return false}if(!this.hasChildrenVisible(e)){var t=this._isVisible(e);if(!t&&!e.getProperty("parent")){return false}return{visible:t}}return false},_isAllChildrenHidden:function(e){if(e.hasChildren()){return!this.hasChildrenVisible(e)}return false},_appendColGroupItem:function(e){var t=this._isColNeedAdded(e);if(t===false){return}var r=0;var i=Re("col");if(t.visible===true){if(this.isColumnMinimized(e)){r=this.getProperty("minimize_width")|0}else{r=parseFloat(e.getProperty("width"))}}r=Math.max(0,r);this._colGroupWidth+=r;i._width=r;pe(i,"width",r+"px");this._tableColGroup.appendChild(i)},hEachColumn:function(r,i){var e=this.getProvider();if(e){var t=this.getProperty("root_data");if(t){e.hEachByData(t,function(e){var t=this._isColNeedAdded(e);if(t===false){return}r.apply(i,[e,t.visible])},this)}else{e.hEach(function(e){if(!this.hasChildrenVisible(e)){var t=this._isColNeedAdded(e);if(t===false){return}r.apply(i,[e,t.visible])}},this)}}},setColumnMinimize:function(e,t){if(t===true){e.set("minimized",true)}else{e.remove("minimized")}},isColumnMinimized:function(e){return e.get("minimized")===true}},$t(ir),Nt(ir),{getRendererContainer:function(e){var t=rr.calcDataRowIndex(e);return this._rowTRArray[t]}}));var nr=function(){nr.superClass.constructor.apply(this,arguments)};ee(nr,ft,{getViewDefaultTypes:function(){return["click"]},handle_click:function(e){var t=this.getView();var r=t.getDataAt(e);if(r){if(t._isDisabled(r)){return}if(t.isColumnMinimized(r)){t.setColumnMinimize(r,false);return}if(this.isCheckBox(e)){this.handleCheck(r,e);return}if(this.isMinimize(e)){t.setColumnMinimize(r,true);return}if(this._isSortable(r)){var i=tr.getColumnNextOrder(t,r);var n=t._getDataViewProperty(r,"sort_mode")==="multiple";if(n){var a=t.getProperty("multiple_sort_key");if(a==="ctrl"&&!e.ctrlKey){n=false}if(a==="alt"&&!e.altKey){n=false}}tr.setColumnSort(t.getProvider(),r,i,n)}t._onDataClick(r,e)}},isCheckBox:function(e){return this._isOPTypeTarget(e,"check")},isRemove:function(e){return this._isOPTypeTarget(e,"remove")},isExpand:function(e){return this._isOPTypeTarget(e,"expand")},isMinimize:function(e){return this._isOPTypeTarget(e,"minimize")},_isOPTarget:function(e){var t=A.getEventTarget(e,"[__z_dop_]");return t!=null},_isOPTypeTarget:function(e,t){var r=A.getEventTarget(e,"[__z_dop_]");if(r){return r.getAttribute("__z_dop_")===t}return false},handleCheck:function(e,t){var r=this.getView();if(r.toggleCheck&&r.isCheckable(e)){r.toggleCheck(e);return true}return false},_isSortable:function(e){var t=this.getView();if(t.hasChildrenVisible(e)){return false}return t._getDataViewProperty(e,"sortable")===true}});var ar=function(){this._renderer=Re("th");Mt.initRenderNode(this);ar.superClass.constructor.apply(this,arguments)};ee(ar,Gt,{_isRendererVisible:function(e,t){var r=ar.superClass._isRendererVisible.apply(this,arguments);if(r===true){r=e._isVisibleByRootData(t)}if(r===true){r=e._isBodyVisibleByRootData(t)}if(r===true){r=!e._isAllChildrenHidden(t)}return r},updateRenderConfig:function(e,t,r){ar.superClass.updateRenderConfig.apply(this,arguments);r["template"]=this.getDataViewProperty(t,"head_template");r["is_root_data"]=e._isRootData(t);r["colspan"]=rr.calcColSpan(e,t);r["rowspan"]=rr.calcRowSpan(e,t);r["tree_column"]=e.isTreeColumn(t);r["has_children"]=e.hasChildrenVisible(t);var i=e.getDataRenderProperty(t,"attributes");this.updateRenderMinimizeConfig(e,t,r);if(this.getRenderConfig("minimized")!==true){this.updateRenderCheckConfig(e,t,r);Mt.updateRenderLevelCheckConfig(this,e,t,r);this.updateRenderSortConfig(e,t,r)}else{var n=this.getRenderConfig("label");if(n){if(i==null){i={title:n}}else if(B(i)){if(!i.hasOwnProperty("title")){i.title=n}}}}r["attributes"]=i},updateRenderCheckConfig:function(e,t,r){if(e.isCheckColumn(t)){r["check_column"]=true;r["checkbox_visible"]=true;r["checked"]=e.isChecked(t);r["checkable"]=e.isCheckable(t)}else{Mt.updateRenderCheckConfig(this,e,t,r)}},updateRenderer:function(e,t,r){ar.superClass.updateRenderer.apply(this,arguments);fe(this._renderer,"root_data",this.getRenderConfig("is_root_data")===true);fe(this._renderer,"leaf",this.getRenderConfig("has_children")!==true);this._renderer.setAttribute("colspan",this.getRenderConfig("colspan"));this._renderer.setAttribute("rowspan",this.getRenderConfig("rowspan"));var i=this.getRenderConfig("minimized")===true;fe(this._renderer,"minimized",i);Mt.updateRenderAttributes(this,e,t,r);if(!i){Mt.updateRendererCheck(this,e,t,r);Mt.updateRenderIn(this,e,t,r);this.updateRendererSort(e,t,r);this.updateRendererMinimize(e,t,r)}else{if(this._checkBoxWrapper){we(this._checkBoxWrapper)}if(this._sortWrapper){we(this._sortWrapper)}if(this._minimizeWrapper){we(this._minimizeWrapper)}var n=this._inWrapper;n.innerHTML=this.getRenderConfig("minimize_label")}},updateRendererStatus:function(e,t,r){ar.superClass.updateRendererStatus.apply(this,arguments);fe(this._renderer,"tree-column",this.getRenderConfig("tree_column")===true);fe(this._renderer,"check-column",this.getRenderConfig("check_column")===true);fe(this._renderer,"checked",this.getRenderConfig("checked")===true);fe(this._renderer,"uncheckable",this.getRenderConfig("checkable")===false);fe(this._renderer,"indeterminate-checked",this.getRenderConfig("indeterminate_checked")===true)},updateRenderSortConfig:function(e,t,r){if(this.getRenderConfig("has_children")!==true){r["sortable"]=this.getDataViewProperty(t,"sortable")===true;r["sort"]=e.getDataRenderProperty(t,"sort")}else{r["sortable"]=false}},updateRendererSort:function(e,t,r){fe(this._renderer,"sortable",this.getRenderConfig("sortable")===true);var i=this.getRenderConfig("sort");if(this.getRenderConfig("has_children")!==true&&i!=null){var n=this._getSortWrapper();var a=this._getSortTemplate();var o=tr.getSortIndex(i);if(o>0){a+="<span class='index'>"+o+"</span>"}n.innerHTML=a;ce(n,this._getSortClass());this.appendToNodeWrapper(n)}else{if(this._sortWrapper){we(this._sortWrapper)}}},_getSortClass:function(){var e=["sort"];var t=this.getRenderConfig("sort");if(t!=null){e.push("sorted");e.push(tr.getSortOrder(t))}if(this.getRenderConfig("sortable")===true){e.push("sortable")}else{e.push("unsortable")}return e.join(" ")},_getSortWrapper:function(){if(!this._sortWrapper){this._sortWrapper=Re("span");this._sortWrapper.setAttribute("__z_dop_","sort")}return this._sortWrapper},_getSortTemplate:function(){if(tr.isAscSort(tr.getSortOrder(this.getRenderConfig("sort")))){return this.getViewRenderConfig("sort_asc_icon_template")}else{return this.getViewRenderConfig("sort_desc_icon_template")}},updateRenderMinimizeConfig:function(e,t,r){if(this.getRenderConfig("has_children")!==true){var i=this.getDataViewProperty(t,"minimizable")===true;r["minimizable"]=i;if(i){var n=e.isColumnMinimized(t);r["minimized"]=n;if(n){r["minimize_width"]=this.getViewRenderConfig("minimize_width");r["minimize_label"]=this.getViewRenderConfig("minimize_label")}else{r["minimize_icon_template"]=this.getViewRenderConfig("minimize_icon_template")}}}else{r["minimizable"]=false}},updateRendererMinimize:function(e,t,r){var i=this.getRenderConfig("minimizable");fe(this._renderer,"minimizable",i);if(i){var n=this.getRenderConfig("minimized");fe(this._renderer,"minimized",n);if(!n){this.appendToNodeWrapper(this._getMinimizeWrapper())}}else if(this._minimizeWrapper){we(this._minimizeWrapper)}},_getMinimizeWrapper:function(){if(!this._minimizeWrapper){this._minimizeWrapper=Re("span","minimize");this._minimizeWrapper.setAttribute("__z_dop_","minimize");this._minimizeWrapper.innerHTML=this.getViewRenderConfig("minimize_icon_template")}return this._minimizeWrapper},insertToNodeWrapperFirst:function(e){var t=this._nodeWrapper.firstElementChild;if(t!==e){this._nodeWrapper.insertBefore(e,t)}},appendToNodeWrapper:function(e){this._nodeWrapper.appendChild(e)},getNodeWrapper:function(){return this._nodeWrapper},reBuildRenderer:function(){this._renderer.appendChild(this._nodeWrapper)}});var or={getCellValue:function(e,t){var r=t.getProperty("field");if(r){var i=Y(e.getProperties(false),r);if(i==null){return""}return i}return""}};var sr=function(){this._tableBody=Re("tbody");sr.superClass.constructor.apply(this,arguments);this._table.appendChild(this._tableBody);de(this.getRoot(),"z-tbody")};ee(sr,er,q({___zdefaults_:q({model_select:true,model_expand:true,model_check:true},Rt()),makeVisible:function(e){},setTableHead:function(e){this._tableHead=e},getRendererRootContainer:function(){return this._tableBody},getRendererContainer:function(e){return this._tableBody},hEachColumn:function(e,t){if(this._tableHead){this._tableHead.hEachColumn(e,t)}},isColumnMinimized:function(e){if(this._tableHead){return this._tableHead.isColumnMinimized(e)}return false},hasCheckColumn:function(){return false},isCheckColumn:function(e){return false},_getCellValue:function(e,t){return this.getCellValue(e,t)},getCellValue:function(e,t){return or.getCellValue(e,t)},getDataRendererClass:function(e){return lr}},Ht(sr),at(sr)));var lr=function(){this._renderer=Re("tr","item");lr.superClass.constructor.apply(this,arguments)};ee(lr,ut,{updateRenderConfig:function(e,t,r){lr.superClass.updateRenderConfig.apply(this,arguments);this._renderConfig["row_template"]=this.getDataViewProperty(t,"row_template");this._renderConfig["selectable"]=e.isSelectable(t);this._renderConfig["hover"]=e.isHover(t);if(e.hasCheckColumn()){r["checkbox_visible"]=true;r["checked"]=e.isChecked(t);r["checkable"]=e.isCheckable(t)}},updateRenderer:function(e,t,r){lr.superClass.updateRenderer.apply(this,arguments);Pe(this._renderer);var i=this.getRenderConfig("row_template");if(i){this._renderer.innerHTML=At.render(i,t.getProperties(false))}else{e.hEachColumn(this._renderColumn,this)}},updateRendererStatus:function(e,t,r){lr.superClass.updateRendererStatus.apply(this,arguments);fe(this._renderer,"unselectable",this.getRenderConfig("selectable")===false);fe(this._renderer,"hover",this.getRenderConfig("hover")===true);fe(this._renderer,"checked",this.getRenderConfig("checked")===true);fe(this._renderer,"uncheckable",this.getRenderConfig("checkable")===false)},_renderColumn:function(e,t){var r=this._view;var i=Re("td");this._renderer.appendChild(i);if(t===true){if(!r.isColumnMinimized(e)){this._renderCommonColumn(i,e);if(r.isCheckColumn(e)){this._renderCheckColumn(i,e)}}}return i},_renderCommonColumn:function(e,t){var r=this._view;var i=this._data;var n=t.render;if(N(n)){n(e,i,t,r,this._renderer)}else{var a=t.getProperty("template");var o;if(a){o=At.render(a,i.getProperties(false))}else{o=r._getCellValue(i,t)}e.innerHTML=o}},_renderCheckColumn:function(e,t){de(e,"check-column");var r=Mt._getCheckboxWrapper(this);r.innerHTML=Mt._getCheckboxTemplate(this);e.insertBefore(r,e.firstChild)}});var dr=function(){this._tableBody=Re("tbody");dr.superClass.constructor.apply(this,arguments);this._table.appendChild(this._tableBody);de(this.getRoot(),"z-tbody")};ee(dr,er,q({___zdefaults_:q({model_select:true,model_expand:true,model_check:true},Rt(),wt()),_onViewChange:function(e,t,r){dr.superClass._onViewChange.apply(this,arguments);this._doViewThreeStatesCheckUpdate(e)},_doViewThreeStatesCheckUpdate:function(e){if(e==="three_states_check"){if(this._checkProvider)this.clearCheck()}},makeVisible:function(e){},setTableHead:function(e){this._tableHead=e},getRendererRootContainer:function(){return this._tableBody},getRendererContainer:function(e){return this._tableBody},hEachColumn:function(e,t){if(this._tableHead){this._tableHead.hEachColumn(e,t)}},isColumnMinimized:function(e){if(this._tableHead){return this._tableHead.isColumnMinimized(e)}return false},hasCheckColumn:function(){return this._tableHead.hasCheckColumn()},isCheckColumn:function(e){return this._tableHead.isCheckColumn(e)},isTreeColumn:function(e){return e.getProperty("tree")===true},_getCellValue:function(e,t){return this.getCellValue(e,t)},getCellValue:function(e,t){return or.getCellValue(e,t)},getDataRendererClass:function(e){return hr}},Wt(dr),Nt(dr),ot(dr),{_isExpandable:function(e){var t=false;if(!this.hasChildrenVisible(e)){t=true}if(t===true){return false}if(this.isExpandable(e)===false){return false}return true}}));var hr=function(){hr.superClass.constructor.apply(this,arguments)};ee(hr,lr,{_isRendererVisible:function(e,t){var r=hr.superClass._isRendererVisible.apply(this,arguments);if(r===true){r=e._isVisibleByRootData(t)}return r},updateRenderConfig:function(e,t,r){hr.superClass.updateRenderConfig.apply(this,arguments);this._renderConfig["is_root_data"]=e._isRootData(t);Mt.updateRenderLevelCheckConfig(this,e,t,r);Mt.updateRenderExpandConfig(this,e,t,r);this._renderConfig["data_level"]=e._getDataLevel(t)},updateRenderer:function(e,t,r){fe(this._renderer,"root_data",this.getRenderConfig("is_root_data")===true);hr.superClass.updateRenderer.apply(this,arguments);fe(this._renderer,"leaf",this.getRenderConfig("has_children")!==true)},updateRendererStatus:function(e,t,r){hr.superClass.updateRendererStatus.apply(this,arguments);fe(this._renderer,"unexpandable",this.getRenderConfig("expandable")===false);fe(this._renderer,"indeterminate-checked",this.getRenderConfig("indeterminate_checked")===true)},_renderColumn:function(e,t){var r=this._view;var i=hr.superClass._renderColumn.apply(this,arguments);if(t===true){if(!r.isColumnMinimized(e)){if(r.isTreeColumn(e)){this._renderTreeColumn(i,e)}}}},_renderTreeColumn:function(e,t){de(e,"tree-column");if(this.getRenderConfig("has_children")===true){if(this.getRenderConfig("expand_icon_visible")!==false){var r=Mt._getExpandWrapper(this);r.innerHTML=Mt._getExpandTemplate(this);ce(r,Mt._getExpandClass(this));e.insertBefore(r,e.firstChild)}}var i=this.getRenderConfig("data_level");for(var n=0;n<i;n++){e.insertBefore(Re("span","indent"),e.firstChild)}}});var cr=function(){if(!(this instanceof cr)){return m.createInstance(cr,arguments)}var e=arguments[0];if(w.isElement(e)){return Ot.parseView("zw-listview",e)}cr.superClass.constructor.apply(this,arguments);de(this.getRoot(),"z-listview")};ee(cr,Kt,{__className_:"ListView"});var ur=function(){ur.superClass.constructor.apply(this,arguments)};ee(ur,ft,{add:function(e){ur.superClass.add.apply(this,arguments);var t=e._prevEle;ke(t,"mousedown",this.toPrev,this);ke(t,"mouseup",this.stopScroll,this);ke(t,"mouseleave",this.stopScroll,this);var r=e._nextEle;ke(r,"mousedown",this.toNext,this);ke(r,"mouseup",this.stopScroll,this);ke(r,"mouseleave",this.stopScroll,this);E.addWheelListener(e._tabsView,this.handleTabsWheel,this)},remove:function(){var e=this._view._prevEle;Te(e,"mousedown",this.toPrev,this);Te(e,"mouseup",this.stopScroll,this);Te(e,"mouseleave",this.stopScroll,this);var t=this._view._nextEle;Te(t,"mousedown",this.toNext,this);Te(t,"mouseup",this.stopScroll,this);Te(t,"mouseleave",this.stopScroll,this);E.removeWheelListener(this._view._tabsView,this.handleTabsWheel,this);ur.superClass.remove.apply(this,arguments)},handleTabsWheel:function(e){var t=e.wheelDelta<0||e.deltaY>0||e.detail>0;var r=t?10:-10;var i=this._view.getProperty("tab_position");var n=i==="top"||i==="bottom"?"scrollLeft":"scrollTop";var a=this._view._rootUL[n];this._view._rootUL[n]+=r;if(a!==this._view._rootUL[n]){e.preventDefault()}},stopScroll:function(){this._scrollStop=true},toPrev:function(){this.startScroll(-6)},toNext:function(){this.startScroll(6)},startScroll:function(e){this._scrollStop=false;this._scrollOffset=e;var t=this._view.getProperty("tab_position");this._scrollDirection=t==="top"||t==="bottom"?"scrollLeft":"scrollTop";l.cancelCallRAFInterval(this.scroll,this);ae(this.scroll,this)},scroll:function(){if(this._scrollStop===true){return false}var e=this._view._rootUL[this._scrollDirection];this._view._rootUL[this._scrollDirection]+=this._scrollOffset;if(e===this._view._rootUL[this._scrollDirection]){this.stopScroll()}}});var fr=function(){if(!(this instanceof fr)){return m.createInstance(fr,arguments)}var e=arguments[0];if(w.isElement(e)){return Ot.parseView("zw-tabs",e)}this._contentContainer=Re("div","contents");this._prevEle=Re("span","to_prev");this._nextEle=Re("span","to_next");this._tabsView=Re("div","tabs");fr.superClass.constructor.apply(this,arguments);var t=this.getRoot();de(t,"z-tabs");this._tabsView.appendChild(this._rootUL);this._tabsView.appendChild(this._prevEle);this._tabsView.appendChild(this._nextEle);t.appendChild(this._tabsView);this._doTabPositionUpdate();this._doTabContentVisibleUpdate();this._doUpdateTabScrollAndSize();this.addController(new ur)};ee(fr,Kt,q({__className_:"Tabs",___zdefaults_:{onresize:true,content_visible:true,content_lazy_load:false,content_auto_resize:true,content_container:null,tab_position:"top",auto_select:true,scroll_to_left_arrow_icon_template:Dt.tabs_scroll_to_left_arrow,scroll_to_right_arrow_icon_template:Dt.tabs_scroll_to_right_arrow,scroll_to_up_arrow_icon_template:Dt.tabs_scroll_to_up_arrow,scroll_to_down_arrow_icon_template:Dt.tabs_scroll_to_down_arrow},_getPrevEle:function(){return this._prevEle},_getNextEle:function(){return this._nextEle},_onViewUpdate:function(){fr.superClass._onViewUpdate.apply(this,arguments);this._doUpdateTabScrollAndSize()},_onViewChange:function(e,t,r){fr.superClass._onViewChange.apply(this,arguments);if(e==="tab_position"){this._doTabPositionUpdate()}else if(e==="content_visible"){this._doTabContentVisibleUpdate()}else if(e==="content_lazy_load"){this._doTabContentLazyLoadUpdate()}else if(e==="content_container"){this._doTabContentContainerUpdate()}},_doTabPositionUpdate:function(){var e=this.getRoot();he(e,"top bottom left right");de(e,this.getProperty("tab_position"));if(this._isContentVisible()&&this._isUseDefaultContentContainer()){this._insertContentContainerByOrder()}this._doTabScrollArrowUpdate()},_doTabScrollArrowUpdate:function(){var e=this.getProperty("tab_position");if(e==="left"||e==="right"){this._prevEle.innerHTML=this.getProperty("scroll_to_up_arrow_icon_template");this._nextEle.innerHTML=this.getProperty("scroll_to_down_arrow_icon_template")}else{this._prevEle.innerHTML=this.getProperty("scroll_to_left_arrow_icon_template");this._nextEle.innerHTML=this.getProperty("scroll_to_right_arrow_icon_template")}},_insertContentContainerByOrder:function(){var e=this.getRoot();if(this.getProperty("tab_position")==="bottom"){e.insertBefore(this._contentContainer,e.firstElementChild)}else{e.appendChild(this._contentContainer)}},_doTabContentVisibleUpdate:function(){if(this._isContentVisible()){if(this._isUseDefaultContentContainer()){this._insertContentContainerByOrder()}this._doTabContentLazyLoadUpdate();var e=this.getLastSelected();if(e){this.setCurrentDataContent(e)}}else{this.clearDataContent();if(this._isUseDefaultContentContainer()){we(this._contentContainer)}}},_doTabContentLazyLoadUpdate:function(){if(!this._isContentLazyLoad()){this.eachData(function(e){if(!this.isDataContentAdded(e)){this.addDataContent(e)}},this)}},_doTabContentContainerUpdate:function(){if(!this._isUseDefaultContentContainer()){we(this._contentContainer)}else{if(this._isContentVisible()){this._insertContentContainerByOrder()}}},getContentContainer:function(){var e=this.getProperty("content_container");if(e){return le(e)}return this._contentContainer},_isUseDefaultContentContainer:function(){return this.getProperty("content_container")==null},_onDataAdd:function(e){fr.superClass._onDataAdd.apply(this,arguments);if(this._isContentVisible()&&!this._isContentLazyLoad()){this.addDataContent(e)}},_onDataRemove:function(e){fr.superClass._onDataRemove.apply(this,arguments);if(this._isContentVisible()){this.removeDataContent(e)}},_onDataClear:function(){fr.superClass._onDataClear.apply(this,arguments);if(this._isContentVisible()){this.clearDataContent()}},_onDataChange:function(e,t){fr.superClass._onDataChange.apply(this,arguments);if(this._isContentVisible()){if(t.property==="content"){this.removeDataContent(e);if(this.getLastSelected()===e){this.setCurrentDataContent(e)}else if(!this._isContentLazyLoad()){this.addDataContent(e)}}}},_onModelChange:function(e){fr.superClass._onModelChange.apply(this,arguments);if(e==="set_provider"){this._doTabContentLazyLoadUpdate()}},_onSelectBatchChange:function(){fr.superClass._onSelectBatchChange.apply(this,arguments);if(this._isContentVisible()){var e=this.getLastSelected();if(e){this.setCurrentDataContent(e)}}},_getScrollView:function(){return this._rootUL},_isContentVisible:function(){return this.getProperty("content_visible")!==false},_isContentLazyLoad:function(){return this.getProperty("content_lazy_load")===true},_doResizeUpdate:function(){fr.superClass._doResizeUpdate.apply(this,arguments);this._doUpdateTabScrollAndSize()},_doUpdateTabScrollAndSize:function(e){this._doUpdateTabScroll();this._doUpdateTabSize()},_doUpdateTabScroll:function(){var e=this.getProperty("tab_position");ge(this._tabsView,"padding-top");ge(this._tabsView,"padding-bottom");ge(this._tabsView,"padding-left");ge(this._tabsView,"padding-right");if(e==="top"||e==="bottom"){var t=this._rootUL.scrollWidth;var r=this._tabsView.clientWidth;if(t>r){if(ve(this._prevEle,"display")==="none"){ge(this._prevEle,"display");ge(this._nextEle,"display")}pe(this._tabsView,"padding-left",this._prevEle.offsetWidth+"px");pe(this._tabsView,"padding-right",this._nextEle.offsetWidth+"px")}else{pe(this._prevEle,"display","none");pe(this._nextEle,"display","none")}}else{var i=this._rootUL.scrollHeight;var n=this._tabsView.clientHeight;if(i>n){if(ve(this._prevEle,"display")==="none"){ge(this._prevEle,"display");ge(this._nextEle,"display")}pe(this._tabsView,"padding-top",this._prevEle.offsetHeight+"px");pe(this._tabsView,"padding-bottom",this._nextEle.offsetHeight+"px")}else{pe(this._prevEle,"display","none");pe(this._nextEle,"display","none")}}},_doUpdateTabSize:function(){if(this._isContentVisible()&&this._isUseDefaultContentContainer()){if(this.getProperty("content_auto_resize")!==false){var e=this.getRoot().parentNode;if(e&&ve(e,"height")){var t=this.getProperty("tab_position");if(t==="top"||t==="bottom"){var r=this.getRootSize();var i=this._rootUL.offsetHeight;pe(this._contentContainer,"height",r.height-i-1+"px");return}}}ge(this._contentContainer,"height")}}},Bt(fr)));var _r=function(){if(!(this instanceof _r)){return m.createInstance(_r,arguments)}var e=arguments[0];if(w.isElement(e)){return Ot.parseView("zw-tree",e)}_r.superClass.constructor.apply(this,arguments);de(this.getRoot(),"z-tree")};ee(_r,Yt,{__className_:"Tree"});var pr=function(){this._contentContainer=Re("div","content");pr.superClass.constructor.apply(this,arguments)};ee(pr,Qt,{updateRenderConfig:function(e,t,r){pr.superClass.updateRenderConfig.apply(this,arguments);this._renderConfig["expanded"]=e.isExpanded(t);var i=this.getDataViewProperty(t,"expand_icon_visible")!==false;this._renderConfig["expand_icon_visible"]=i;if(i===true){this._renderConfig["expandable"]=e.isExpandable(t)}this._renderConfig["content"]=e.getDataRenderProperty(t,"content")},updateRenderer:function(e,t,r){pr.superClass.updateRenderer.apply(this,arguments);fe(this._renderer,"expanded",this.getRenderConfig("expanded")===true);fe(this._renderer,"unexpandable",this.getRenderConfig("expandable")!==true);this._updateRendererExpand();this._updateRendererContent()},_updateRendererExpand:function(){if(this.getRenderConfig("expand_icon_visible")!==false){var e=this._getExpandWrapper();e.innerHTML=this._getExpandTemplate();ce(e,this._getExpandClass());this.insertToNodeWrapperFirst(e)}else{if(this._expandWrapper){we(this._expandWrapper)}}},_getExpandTemplate:function(){if(this.getRenderConfig("expanded")===true){return this.getViewRenderConfig("expand_expanded_icon_template")}else{return this.getViewRenderConfig("expand_collapsed_icon_template")}},_getExpandClass:function(){var e=["expand"];if(this.getRenderConfig("expanded")===true){e.push("expanded")}else{e.push("collapsed")}if(this.getRenderConfig("expandable")===true){e.push("expandable")}else{e.push("unexpandable")}return e.join(" ")},_getExpandWrapper:function(){if(!this._expandWrapper){this._expandWrapper=Re("span");this._expandWrapper.setAttribute("__z_dop_","expand")}return this._expandWrapper},_updateRendererContent:function(){var e=this.getRenderConfig("content");if(this._currentContent!==e){kt.releaseContent(this._currentContentObj);this._currentContent=e;this._currentContentObj=kt.getContentObject(e);if(this._currentContentObj){var t=this._currentContentObj.contentEle;if(t){this._contentContainer.appendChild(t)}kt.showContent(this._currentContentObj)}}if(!this._contentContainer.parentNode){this._renderer.appendChild(this._contentContainer)}if(this.getRenderConfig("expanded")===true){kt.showContent(this._currentContentObj);if(this._currentContentObj&&this._currentContentObj.contentEle){ge(this._contentContainer,"display")}else{pe(this._contentContainer,"display","none")}}else{kt.hideContent(this._currentContentObj);pe(this._contentContainer,"display","none")}},dispose:function(){pr.superClass.dispose.apply(this,arguments);if(this._currentContentObj){kt.releaseContent(this._currentContentObj)}}});var vr=function(){if(!(this instanceof vr)){return m.createInstance(vr,arguments)}var e=arguments[0];if(w.isElement(e)){return Ot.parseView("zw-collapse",e)}vr.superClass.constructor.apply(this,arguments);de(this.getRoot(),"z-collapse")};ee(vr,Kt,q({__className_:"Collapse",___zdefaults_:q({make_visible_on_select:false},wt({expand_on_click:true})),getDataRendererClass:function(e){return pr},getDataAt:function(e){if(!Tt.isEvtInRendererNode(e)){return null}return vr.superClass.getDataAt.apply(this,arguments)}},ot(vr)));var gr=function(){if(!(this instanceof gr)){return m.createInstance(gr,arguments)}var e=arguments[0];if(w.isElement(e)){return Ot.parseView("zw-carousel",e)}this._contentContainer=Re("div","contents");this._initDataContentInterface(true);this._indicatorView=Re("div","indicators");gr.superClass.constructor.apply(this,arguments);this._initIndicatorView();de(this.getRoot(),"z-carousel")};ee(gr,Kt,q({__className_:"Carousel",___zdefaults_:{auto_select:true,indicator_visible:true,scroll_arrow_visible:true,auto_play:true,interval:3e3,hover_pause:true,scroll_to_prev_arrow_template:"<a class='fz-icon fz-angle-left'></a>",scroll_to_next_arrow_template:"<a class='fz-icon fz-angle-right'></a>"},_initIndicatorView:function(){this._prevEle=Re("span","to_prev");this._prevEle.innerHTML=this._getCommonProperty("scroll_to_prev_arrow_template");this._nextEle=Re("span","to_next");this._nextEle.innerHTML=this._getCommonProperty("scroll_to_next_arrow_template");this._indicatorView.appendChild(this._rootUL);this.getRoot().appendChild(this._contentContainer);this.getRoot().appendChild(this._prevEle);this.getRoot().appendChild(this._nextEle);this.getRoot().appendChild(this._indicatorView)},_getPrevEle:function(){return this._prevEle},_getNextEle:function(){return this._nextEle},_getContentContainer:function(){return this._contentContainer},_onDataAdd:function(e){gr.superClass._onDataAdd.apply(this,arguments);this.addDataContent(e)},_onDataRemove:function(e){gr.superClass._onDataRemove.apply(this,arguments);this.removeDataContent(e)},_onDataClear:function(){gr.superClass._onDataClear.apply(this,arguments);this.clearDataContent()},_onDataChange:function(e,t){gr.superClass._onDataChange.apply(this,arguments);if(t.property==="content"){this.removeDataContent(e);if(this.getLastSelect()===e){this.setCurrentDataContent(e)}else{this.addDataContent(e)}}},_onSelectBatchChange:function(){gr.superClass._onSelectBatchChange.apply(this,arguments);var e=this.getLastSelect();if(e){this.setCurrentDataContent(e)}l.cancelCallLater(this.toNext,3e3,this);if(this._getCommonProperty("auto_play")===true){re(this.toNext,1e3,this)}},toNext:function(){var e=this._getNextData();if(e){this.setSelect(e)}},_getPrevData:function(){var e=this._getSortDataArray(this.getProvider().toRootArray(false));var t=-1;var r=0;var i=this.getLastSelect();if(i){t=e.indexOf(i);r=1}var n=e.length;if(t>=0){var a=e.splice(t);a.shift();e.unshift.apply(e,a)}for(var o=n-1;o>=r;o--){var s=e[o];if(this.isVisible(s)&&!this.isDisabled(s)&&this.isSelectable(s)){return s}}},_getNextData:function(){var e=this._getSortDataArray(this.getProvider().toRootArray(false));var t=this.getLastSelect();if(t){var r=e.splice(0,e.indexOf(t));e.shift();e.push.apply(e,r)}var i=e.length;for(var n=0;n<i;n++){var a=e[n];if(this.isVisible(a)&&!this.isDisabled(a)&&this.isSelectable(a)){return a}}}},Ut(gr),{beforeHideContent:function(e){this._lastContent=e;var t=this.getLastSelect();if(t){var r=this.getDataContent(t);var i=this._lastContent._id;var n=r._id}}}));var Cr={getPagerDataInfo:function(e,t,r,i,n){if(t===0){return"to_prev"}t-=1;r=Math.max(1,r);if(r<=n){if(t<=r-1){return t}if(t===r){return"to_next"}}else{if(i<=n/2){if(t===n-1){return"to_next_more"}else if(t===n){return r-1}else if(t===n+1){return"to_next"}else if(t<n-1){return t}}else if(i>r-n/2-1){if(t===0){return 0}else if(t===1){return"to_prev_more"}else if(t===n+1){return"to_next"}else if(t<=n){return r+t-n-1}}else{if(t===0){return 0}else if(t===1){return"to_prev_more"}else if(t===n+2){return"to_next"}else if(t===n+1){return r-1}else if(t===n){return"to_next_more"}else if(t<n){return i-((n-2)/2|0)+(t-2)}}}}};var mr=function(e){this._pager=e;mr.superClass.constructor.apply(this,[])};ee(mr,Kt,{_getPagerCommonProperty:function(e){return this._pager.getProperty(e)},_getPagerPageIndex:function(){return this._pager._getPageIndex()-1},_setPagerPageIndex:function(e){this._pager.set("page_index",e+1)},_getPagerPageNumber:function(){return this._pager._getPageNumber()},_getPagerPagerCount:function(){return this._pager._getPagerCount()},isVisible:function(e){return e.getProperty("role")!=null},getLabel:function(e){var t=e.getProperty("role");if(t!=null){if(t==="to_prev"){return this._getPagerCommonProperty("to_prev_icon_template")}else if(t==="to_next"){return this._getPagerCommonProperty("to_next_icon_template")}else if(t==="to_prev_more"){return this._getPagerCommonProperty("to_prev_more_icon_template")}else if(t==="to_next_more"){return this._getPagerCommonProperty("to_next_more_icon_template")}return t+1}return t},isDisabled:function(e){var t=e.getProperty("role");if(t==null){return true}var r=this._getPagerPageIndex();if(t==="to_prev"){return r<=0}if(t==="to_next"){return r>=this._getPagerPageNumber()-1}return false},_onDataClick:function(e){var t=e.getProperty("role");if(t==null){return}if(H(t)){this._setPagerPageIndex(t);return}var r=this._getPagerPageIndex();if(t==="to_prev"){if(r>0){this._setPagerPageIndex(r-1)}}else if(t==="to_next"){if(r<this._getPagerPageNumber()-1){this._setPagerPageIndex(r+1)}}else if(t==="to_prev_more"){this._setPagerPageIndex(Math.max(0,r-(this._getPagerPagerCount()-2)))}else if(t==="to_next_more"){this._setPagerPageIndex(Math.min(this._getPagerPageNumber()-1,r+(this._getPagerPagerCount()-2)))}},updatePagerData:function(){this._updatePagerDataCount();this._updatePagerDataRole()},_updatePagerDataCount:function(){var e=this._getPagerPagerCount()+4;var t=this.getDataSize();if(t===e){return}if(t<e){for(var r=t;r<e;r++){this.addData(new it)}}else{var i=this.getDataArray();for(var n=e;n<t;n++){this.removeData(i[n])}}},_updatePagerDataRole:function(){var i=this._getPagerPageNumber();var n=this._getPagerPageIndex();var a=this._getPagerPagerCount();this.clearSelect();this.eachData(function(e,t){var r=Cr.getPagerDataInfo(e,t,i,n,a);e.set("role",r);if(r===n){this.setSelect(e)}},this);this.update()},getDataRendererClass:function(e){return yr}});var yr=function(){yr.superClass.constructor.apply(this,arguments)};ee(yr,Qt,{updateRenderConfig:function(e,t,r){yr.superClass.updateRenderConfig.apply(this,arguments);this._renderConfig["role"]=t.getProperty("role")},updateRenderer:function(e,t,r){yr.superClass.updateRenderer.apply(this,arguments);fe(this._renderer,"to_prev",this.getRenderConfig("role")==="to_prev");fe(this._renderer,"to_next",this.getRenderConfig("role")==="to_next");fe(this._renderer,"to_prev_more",this.getRenderConfig("role")==="to_prev_more");fe(this._renderer,"to_next_more",this.getRenderConfig("role")==="to_next_more")}});var br=function(){br.superClass.constructor.apply(this,arguments)};ee(br,ft,{add:function(e){br.superClass.add.apply(this,arguments);ke(e._gerRefreshWrapper(),"click",this.handleRefresh,this);ke(e._gerSizeSelect(),"change",this.handleSizeChange,this)},remove:function(e){Te(this._view._gerRefreshWrapper(),"click",this.handleRefresh,this);Te(this._view._gerSizeSelect(),"change",this.handleSizeChange,this);br.superClass.remove.apply(this,arguments)},handleRefresh:function(){this._view._onRefresh(this._view.getPageConfig())},handleSizeChange:function(){var e=this._view._gerSizeSelect().value|0;this._view.set("page_size",e)}});var Dr=function(){if(!(this instanceof Dr)){return m.createInstance(Dr,arguments)}var e=arguments[0];if(w.isElement(e)){return Ot.parseView("zw-pagination",e)}Dr.superClass.constructor.apply(this,arguments);this._initPageView();Tt.addWidgetClass(this.getRoot());de(this.getRoot(),"z-pagination");this.addController(new br)};ee(Dr,st,{__className_:"Pagination",___zdefaults_:{layout:"sizes,pager,total,refresh",page_sizes:[20,50,100],page_size:20,total_template:"<%start%>-<%end%> | <%total%>",refresh_icon_template:Dt.refresh,page_index:1,total:0,pager_count:7,to_prev_icon_template:Dt.pagination_to_prev,to_next_icon_template:Dt.pagination_to_next,to_prev_more_icon_template:Dt.pagination_to_prev_more,to_next_more_icon_template:Dt.pagination_to_next_more},_initPageView:function(){this._pagerULView=new mr(this);var e=this._pagerULView.getRoot();de(e,"pager");this.getRoot().appendChild(e);this._updatePageSizeSelect();this._handlePageChange();this._doViewLayoutUpdate()},_onViewChange:function(e,t,r){Dr.superClass._onViewChange.apply(this,arguments);switch(e){case"page_index":this._doViewPageIndexUpdate();break;case"page_size":this._doViewPageSizeUpdate();break;case"total":this._doViewTotalUpdate();break;case"page_sizes":this._doViewPageSizesUpdate();break;case"pager_count":this._doViewPagerCountUpdate();break;case"layout":this._doViewLayoutUpdate();break;case"total_template":this._updateTotalInfo();break;case"to_prev_icon_template":this._updatePagerULView();break;case"to_next_icon_template":this._updatePagerULView();break;case"to_prev_more_icon_template":this._updatePagerULView();break;case"to_next_more_icon_template":this._updatePagerULView();break;case"refresh_icon_template":this._doViewRefreshIconUpdate();break}},_doViewPageIndexUpdate:function(){this._handlePageChange()},_doViewPageSizeUpdate:function(){this._updatePageSizeSelect(true);this._updatePageIndex();this._handlePageChange()},_doViewTotalUpdate:function(){this._updatePageIndex();this._handlePageChange()},_doViewPageSizesUpdate:function(){this._updatePageSizeSelect();var e=this.getProperty("page_sizes");var t=this._getPageSize();if(e.indexOf(t)<0){this.set("page_size",e[0])}},_updatePageSizeSelect:function(e){var t=this.getProperty("page_sizes");var r=this._gerSizeSelect();if(e===true){r.value=this._getPageSize()}else{if(t.length>1){Pe(r);t.forEach(function(e){var t=Re("option");t.setAttribute("value",e);t.innerHTML=e;r.appendChild(t)});r.value=this._getPageSize()}else{we(r)}}},_doViewPagerCountUpdate:function(){this._updatePagerULView()},_doViewLayoutUpdate:function(){var r=this.getRoot();Pe(r);this.getProperty("layout").split(",").forEach(function(e){var t;switch(e){case"sizes":t=this._gerSizeSelect();break;case"pager":if(this._pagerULView){t=this._pagerULView.getRoot()}break;case"total":t=this._gerTotalWrapper();break;case"refresh":t=this._gerRefreshWrapper();break}if(t){r.appendChild(t)}},this)},_gerSizeSelect:function(){if(!this._sizeSelect){this._sizeSelect=Re("select","sizes");this._sizeSelect.setAttribute("__z_dop_","size_select")}return this._sizeSelect},_gerTotalWrapper:function(){if(!this._totalWrapper){this._totalWrapper=Re("span","total")}return this._totalWrapper},_gerRefreshWrapper:function(){if(!this._refreshWrapper){this._refreshWrapper=Re("span","refresh");this._refreshWrapper.setAttribute("__z_dop_","refresh");this._refreshWrapper.innerHTML=this.getProperty("refresh_icon_template")}return this._refreshWrapper},_updatePagerULView:function(){if(!this._pagerULView){return}this._pagerULView.update()},_updateTotalInfo:function(){this._gerTotalWrapper().innerHTML=At.render(this.getProperty("total_template"),this.getPageConfig())},_doViewRefreshIconUpdate:function(){this._gerRefreshWrapper().innerHTML=this.getProperty("refresh_icon_template")},_updatePageIndex:function(){var e=Math.max(1,this._getPageNumber());var t=this._getPageIndex();if(t>e){t=e-1;this.set("page_index",t);return true}return false},_handlePageChange:function(){if(!this._pagerULView){return}this._pagerULView.updatePagerData();this._callBatch(this._onPageChange,"page_change_cb_")},_onPageChange:function(){var e=this.getPageConfig();this._updateTotalInfo();if(this._currentPagerConfig){if(this._currentPagerConfig.index===e.index&&this._currentPagerConfig.size===e.size){return}e.changed=true}this._currentPagerConfig=q({},e);this._callOn("onPageChange","on.page.change",e,[e])},_getPageNumber:function(){return Math.ceil(this._getTotal()/this._getPageSize())},_getPageSize:function(){return this.getProperty("page_size")},_getTotal:function(){return this.getProperty("total")},_getPagerCount:function(){return this.getProperty("pager_count")},_getPageIndex:function(){return this.getProperty("page_index")},getPageConfig:function(){var e=this._getPageIndex();var t=e-1;var r=this._getPageSize();var i=t*r;var n=this._getTotal();var a=0,o=0;if(n>0){a=t*r+1;o=Math.min(n,(t+1)*r)}return{index:e,size:r,skip:i,limit:r,offset:i,number:this._getPageNumber(),start:a,end:o,total:n}},onPageChange:function(e,t){this.addListener("on.page.change",e,t)},_onRefresh:function(e){this._callOn("onRefresh","on.page.refresh",e,[e])},onRefresh:function(e,t){this.addListener("on.page.refresh",e,t)}});var Rr={sortable:function(e,t){var r=e.getProperty("sortable");t.set("sortable",r===true||r==="custom")},sort_mode:"sort_mode",multiple_sort_key:"multiple_sort_key",sort_orders:"sort_orders",sort_asc_icon_template:"sort_asc_icon_template",sort_desc_icon_template:"sort_desc_icon_template",minimize_icon_template:"minimize_icon_template",minimize_width:"minimize_width",minimize_label:"minimize_label"};var wr={selectable:"selectable",row_template:"row_template",expand_icon_visible:"expand_icon_visible",expand_collapsed_icon_template:"expand_collapsed_icon_template",expand_expanded_icon_template:"expand_expanded_icon_template",expand_on_click:"expand_on_click",expand_on_dbl_click:"expand_on_dbl_click",accordion:"accordion",checkbox_unchecked_icon_template:"checkbox_unchecked_icon_template",checkbox_checked_icon_template:"checkbox_checked_icon_template",checkbox_indeterminate_icon_template:"checkbox_indeterminate_icon_template",check_on_click:"check_on_click",three_states_check:"three_states_check",root_data:"root_data"};var Pr={getOffsetHeight:function(e){return P.getElementWindowBounds(e).height},createFixedHeadView:function(e){var t=Pr._createHeadView(e,function(e){if(e.getProperty("visible")===false){return false}var t=vt.getDataRoot(e);var r=t.getProperty("fixed");return r===true||r==="left"});Pr.initHeadViewShareProperty(e,t);return t},createFixedRightHeadView:function(e){var t=Pr._createHeadView(e,function(e){if(e.getProperty("visible")===false){return false}var t=vt.getDataRoot(e);return t.getProperty("fixed")==="right"});Pr.initHeadViewShareProperty(e,t);return t},createCenterHeadView:function(e){return Pr._createHeadView(e,function(e){if(e.getProperty("visible")===false){return false}var t=vt.getDataRoot(e);var r=t.getProperty("fixed");return r!==true&&r!=="left"&&r!=="right"})},_createHeadView:function(t,e){var r=new ir({isVisible:e,_hasChildrenChecked:function(e){if(this.isCheckColumn(e)){return xr._hasDataChecked(t)}else{return ir.prototype._hasChildrenChecked.apply(this,arguments)}}});r.onViewUpdate(t._onColumnUpdate,t);return r},initHeadViewShareProperty:function(r,i){J(Rr,function(e,t){if(N(t)){t(r,i)}else{i.set(t,r.getProperty(e))}},r)},createBodyView:function(e,t,r){var i=new sr(Pr.getBodyOverridingMethods(e));Pr._onBodyViewChange(e,i);if(r!==false){Pr.initBodyViewShareProperty(e,i)}i.setTableHead(t);return i},getBodyOverridingMethods:function(r){return{isHover:function(e){return r.isHover(e)},_getCellValue:function(e,t){return r._getCellValue(e,t)},_isFilterVisible:function(e){return r._isFilterVisible(e)},isVisible:function(e){return r.isVisible(e)},isCheckColumn:function(e){return r._isCheckColumn(e)},hasCheckColumn:function(){return r._hasCheckColumn()},isCheckable:function(e){return r.isCheckable(e)},isSelectable:function(e){return r.isSelectable(e)}}},_onBodyViewChange:function(t,e){e.onDataClick(function(e){t._onDataClick.apply(t,[e.data,e.event])});e.onDataDblClick(function(e){t._onDataDblClick.apply(t,[e.data,e.event])});e.onViewUpdate(function(){t._onBodyUpdate()})},initBodyViewShareProperty:function(r,i){J(wr,function(e,t){if(N(t)){t(r,i)}else{i.set(t,r.getProperty(e))}},r)}};var xr={bubblingBodyEventToGrid:function(t){var e=t._bodyCenterTable;e.onCheckChange(function(e){t._onCheckChange(e)},t);e.onSelectChange(function(e){t._onSelectChange(e)});e.onSelectBatchChange(function(e){t._onSelectBatchChange(e)})},syncHeadViewProperty:function(e,t,r,i){if(Rr.hasOwnProperty(t)){var n=Rr[t];if(N(n)){if(e._headCenterTable){n(e,e._headCenterTable)}if(e._headLeftTable){n(e,e._headLeftTable)}if(e._headRightTable){n(e,e._headRightTable)}}else{if(e._headCenterTable){e._headCenterTable.set(n,r)}if(e._headLeftTable){e._headLeftTable.set(n,r)}if(e._headRightTable){e._headRightTable.set(n,r)}}}},syncBodyViewProperty:function(e,t,r,i){if(wr.hasOwnProperty(t)){var n=wr[t];if(N(n)){if(e._bodyCenterTable){n(e,e._bodyCenterTable)}if(e._bodyLeftTable){n(e,e._bodyLeftTable)}if(e._bodyRightTable){n(e,e._bodyRightTable)}}else{if(e._bodyCenterTable){e._bodyCenterTable.set(n,r)}if(e._bodyLeftTable){e._bodyLeftTable.set(n,r)}if(e._bodyRightTable){e._bodyRightTable.set(n,r)}}}},syncBodyHeadCheck:function(r){r._headCenterTable.onCheckChange(function(e){xr._syncBodyCheckFromHead(r)});r._bodyCenterTable.onCheckChange(function(e){r._callBatch(function(){xr._syncHeadCheckFromBody(r)},"sync_head_check_from_body__cb_")});r._bodyCenterTable.onModelChange(function(e){var t=e.type;if(t==="set_provider"||t==="provider"){r._callBatch(function(){xr._syncHeadCheckFromBody(r)},"sync_head_check_from_body__cb_")}})},_syncHeadCheckFromBody:function(e){if(e._$is_sync_body_head_check_columning===true){return}e._$is_sync_body_head_check_columning=true;var t=e._columnProvider;if(t){var r=t._checkColumn;if(r){var i=xr._isAllDataChecked(e);var n=xr._getCheckColumnTable(e);var a=n.isChecked(r);var o=true;if(i){if(!a){n.addCheck(r);o=false}}else{if(a){n.removeCheck(r);o=false}}if(o){n._updateData(r)}}}delete e._$is_sync_body_head_check_columning},_syncBodyCheckFromHead:function(e){if(e._$is_sync_body_head_check_columning===true){return}e._$is_sync_body_head_check_columning=true;var t=e._columnProvider;if(t){var r=t._checkColumn;if(r){var i=e._headCenterTable;if(i.isChecked(r)){e._bodyCenterTable.checkAll();var n=xr._isAllDataChecked(e);if(!n){i.removeCheck(r)}}else{e._bodyCenterTable.clearCheck()}}}delete e._$is_sync_body_head_check_columning},_isAllDataChecked:function(e){var t=e._bodyCenterTable.getDataArray(false).length;return t>0&&e._bodyCenterTable.getChecked(false).length===t},_hasDataChecked:function(e){return e._bodyCenterTable.getChecked(false).length>0},_getCheckColumnTable:function(e){var t=e._columnProvider;if(t){var r=t._checkColumn;if(r){var i;if(e._hasColumnFixed){if(e._headLeftTable.isVisible(r)){i=e._headLeftTable}}if(!i){if(e._hasColumnFixedRight){if(e._headRightTable.isVisible(r)){i=e._headRightTable}}}if(!i){i=e._headCenterTable}return i}}},syncColGroupUpdate:function(e,t){e.setCallBack("onColGroupChange",function(e){t._tableColGroup.innerHTML=e.innerHTML})}};var Ar={getColumnFixedConfig:function(e){var r=false;var i=false;e.toRootArray(false).forEach(function(e){var t=e.getProperty("fixed");if(t===true||t==="left"){r=true}else if(t==="right"){i=true}});return{fixed:r,fixed_right:i}}};var kr=function(){kr.superClass.constructor.apply(this,arguments)};ee(kr,ft,{add:function(e){kr.superClass.add.apply(this,arguments);ke(e._vScrollbarDiv,"scroll",this.handleVScroll,this);ke(e._hScrollbarDiv,"scroll",this.handleHScroll,this);ke(e._bodyCenterDiv,"touchstart",this.handleTouchStart,this);ke(e._bodyCenterDiv,"touchmove",this.handleTouchMove,this);ke(e._bodyCenterDiv,"touchend",this.handleTouchEnd,this)},remove:function(){var e=this._view;Te(e._vScrollbarDiv,"scroll",this.handleVScroll,this);Te(e._hScrollbarDiv,"scroll",this.handleHScroll,this);Te(e._bodyCenterDiv,"touchstart",this.handleTouchStart,this);Te(e._bodyCenterDiv,"touchmove",this.handleTouchMove,this);Te(e._bodyCenterDiv,"touchend",this.handleTouchEnd,this);kr.superClass.remove.apply(this,arguments)},getViewDefaultTypes:function(){return["keydown","wheel"]},handle_keydown:function(e){var t=e.keyCode;var r=this._view;var i=r._vScrollbarDiv;var n=20;if(i.parentNode){var a=i.scrollTop;if(t===38){i.scrollTop-=n}else if(t===40){i.scrollTop+=n}else if(t===33){i.scrollTop-=r._bodyDiv.clientHeight-3}else if(t===34){i.scrollTop+=r._bodyDiv.clientHeight-3}if(t===38||t===40||t===33||t===34){if(i.scrollTop!==a){e.preventDefault()}}}var o=r._hScrollbarDiv;if(o.parentNode){var s=o.scrollLeft;if(t===37){o.scrollLeft-=n}else if(t===39){o.scrollLeft+=n}if(t===37||t===39){if(o.scrollLeft!==s){e.preventDefault()}}}},handle_wheel:function(e){var t=e.wheelDelta<0||e.deltaY>0||e.detail>0;var r=this._view;var i=r._vScrollbarDiv;var n=r._hScrollbarDiv;var a=e.target;var o="v";if(n.contains(a)){o="h"}if(o==="v"){if(!i.parentNode){o=null}}else{if(!n.parentNode){o=null}}if(o==="v"){var s=i.scrollTop;if(t){i.scrollTop+=60}else{i.scrollTop-=60}if(i.scrollTop!==s){e.preventDefault()}}else if(o==="h"){var l=n.scrollLeft;if(t){n.scrollLeft+=60}else{n.scrollLeft-=60}if(n.scrollLeft!==l){e.preventDefault();this._view._syncBodyHScroll()}}},handleTouchStart:function(e){if(this._view._hScrollbarDiv.parentNode||this._view._vScrollbarDiv.parentNode){this._touchPoint=this._getTouchPoint(e)}},handleTouchMove:function(e){if(this._touchPoint){e.preventDefault();var t=this._getTouchPoint(e);var r=t.x-this._touchPoint.x;var i=t.y-this._touchPoint.y;if(Math.abs(r)>Math.abs(i)){if(this._view._hScrollbarDiv.parentNode){this._view._hScrollbarDiv.scrollLeft-=r}}else{if(this._view._vScrollbarDiv.parentNode){this._view._vScrollbarDiv.scrollTop-=i}}this._touchPoint=t}},handleTouchEnd:function(e){this._touchPoint=null},_getTouchPoint:function(e){var t=e.touches;var r=t[0];return{x:r.clientX,y:r.clientY}},handleVScroll:function(){this._view._syncBodyVScroll()},handleHScroll:function(){this._view._syncBodyHScroll()}});var Tr=function(){if(!(this instanceof Tr)){return m.createInstance(Tr,arguments)}var e=arguments[0];if(w.isElement(e)){return Ot.parseView("zw-grid",e)}this._initGridView();var t=yt(arguments,"columns");Tr.superClass.constructor.apply(this,arguments);this._initCenterTables();this._initDefaultColumns();var r=this.getRoot();Tt.addWidgetClass(r);de(r,"z-grid");r.appendChild(this._headDiv);r.appendChild(this._bodyDiv);r.appendChild(this._pagerDiv);this._updateLayout();this.addController(new kr);this._toggleHoverController();if(t){this.setColumns(t)}};ee(Tr,lt,q({__className_:"Grid",___zdefaults_:q({onresize:true,overflow:"hidden",pageable:false,hoverable:false,selectable:false,make_visible_on_select:true},Rt(),Pt(),xt()),_onViewChange:function(e,t,r){Tr.superClass._onViewChange.apply(this,arguments);if(e==="pageable"){this._doViewPagerUpdate(e,t,r);return}if(e==="select_on_hover"||e==="hoverable"){this._toggleHoverController();return}xr.syncHeadViewProperty(this,e,t,r);xr.syncBodyViewProperty(this,e,t,r)},makeVisible:function(e){if(e){var t=this._bodyCenterTable.getDataRendererElement(e);if(t){ne(function(){x.scrollIntoView(t,this._getScrollView());this._syncVScrollByBody()},this)}}},_getScrollView:function(){return this._bodyDiv}},{_initGridView:function(){this._headDiv=Re("div","head");this._headLeftDiv=Re("div","left");this._headCenterDiv=Re("div","center");this._headRightDiv=Re("div","right");this._headDiv.appendChild(this._headCenterDiv);this._headDiv.appendChild(this._headLeftDiv);this._headDiv.appendChild(this._headRightDiv);this._bodyDiv=Re("div","body");this._bodyLeftDiv=Re("div","left");this._bodyCenterDiv=Re("div","center");this._bodyRightDiv=Re("div","right");this._bodyDiv.appendChild(this._bodyCenterDiv);this._bodyDiv.appendChild(this._bodyLeftDiv);this._bodyDiv.appendChild(this._bodyRightDiv);this._pagerDiv=Re("div","pager");this._vScrollbarHeightDiv=Re("div");this._vScrollbarDiv=Re("div","v-scrollbar");this._vScrollbarDiv.appendChild(this._vScrollbarHeightDiv);this._hScrollbarHeightDiv=Re("div","scroll");this._hScrollbarDiv=Re("div","h-scrollbar");this._hScrollbarDiv.appendChild(this._hScrollbarHeightDiv);this._headCenterTable=Pr.createCenterHeadView(this);this._headCenterTableRoot=this._headCenterTable.getRoot();this._headCenterDiv.appendChild(this._headCenterTableRoot);this._bodyCenterTable=this._createBodyView(this._headCenterTable,false);this._bodyCenterTableRoot=this._bodyCenterTable.getRoot();this._bodyCenterDiv.appendChild(this._bodyCenterTableRoot);xr.syncBodyHeadCheck(this)},_initCenterTables:function(){Pr.initHeadViewShareProperty(this,this._headCenterTable);Pr.initBodyViewShareProperty(this,this._bodyCenterTable);xr.syncColGroupUpdate(this._headCenterTable,this._bodyCenterTable);xr.bubblingBodyEventToGrid(this)}},{_onProviderChange:function(){Tr.superClass._onProviderChange.apply(this,arguments);this._bodyCenterTable.setProvider(this.getProvider());if(this._hasColumnFixed){this._bodyLeftTable.setProvider(this.getProvider())}if(this._hasColumnFixedRight){this._bodyRightTable.setProvider(this.getProvider())}},_updateBodyData:function(e){if(e){if(this._bodyCenterTable){this._bodyCenterTable._updateData(e)}if(this._bodyLeftTable){this._bodyLeftTable._updateData(e)}if(this._bodyRightTable){this._bodyRightTable._updateData(e)}}},_updateBodyAllData:function(){if(this._bodyCenterTable){this._bodyCenterTable._updateAllData()}if(this._bodyLeftTable){this._bodyLeftTable._updateAllData()}if(this._bodyRightTable){this._bodyRightTable._updateAllData()}},_updateHeadColumn:function(e){if(e){if(this._headCenterTable){this._headCenterTable._updateData(e)}if(this._headLeftTable){this._headLeftTable._updateData(e)}if(this._headRightTable){this._headRightTable._updateData(e)}}},update:function(e){if(e===true){this._updateBody();return}Tr.superClass.update.apply(this,arguments);this._updateBody();if(this._headCenterTable){this._headCenterTable.update()}if(this._headLeftTable){this._headLeftTable.update()}if(this._headRightTable){this._headRightTable.update()}},_updateBody:function(){if(this._bodyCenterTable){this._bodyCenterTable.update()}if(this._bodyLeftTable){this._bodyLeftTable.update()}if(this._bodyRightTable){this._bodyRightTable.update()}}},{_initDefaultColumns:function(){this._columnProvider=new nt;this._headCenterTable.setProvider(this._columnProvider);this._addColumnProviderListener()},setColumns:function(e,t){if(!z(e)){e=[e]}var r=gt.parse(e);if(t===true){r.forEach(function(e){e._bind(e.get("_$z_data"))})}var i=new nt;i.add(r);tr.updateColumnSortIndex(i);this._setColumnProvider(i)},findColumn:function(e,t){return this._columnProvider.find.apply(this._columnProvider,arguments)},getColumnArray:function(e){return this._columnProvider.toArray.apply(this._provider,arguments)},_beforeSetColumnProvider:function(e){e._checkColumn=e.find(function(e){return e.getProperty("type")==="check"&&!e.hasChildren()&&!e.getProperty("parent")})},_setColumnProvider:function(e){this._beforeSetColumnProvider(e);this._removeColumnProviderListener();this._columnProvider=e;this._updateFixedColumns();this._headCenterTable.setProvider(e);if(this._hasColumnFixed){this._headLeftTable.setProvider(e)}if(this._hasColumnFixedRight){this._headRightTable.setProvider(e)}this._addColumnProviderListener();this._onColumnChange("set_provider")},_isCheckColumn:function(e){if(e){return this._columnProvider._checkColumn===e}return false},_hasCheckColumn:function(){return this._columnProvider._checkColumn!=null},_addColumnProviderListener:function(){this._columnProvider.addProviderChangeListener(this._handleColumnProviderChange,this);this._columnProvider.addDataChangeListener(this._handleColumnChange,this);this._columnProvider.removeIndexChangeListener(this._handleColumnIndexChange,this)},_removeColumnProviderListener:function(){if(this._columnProvider){this._columnProvider.removeProviderChangeListener(this._handleColumnProviderChange,this);this._columnProvider.removeDataChangeListener(this._handleColumnChange,this);this._columnProvider.removeIndexChangeListener(this._handleColumnIndexChange,this)}},_handleColumnProviderChange:function(e){this._updateFixedColumns();tr.updateColumnSortIndex(this._columnProvider);this._onColumnChange("provider",e)},_handleColumnChange:function(e){var t=e.property;if(t==="fixed"){this._updateFixedColumns()}else if(t==="sort"){this._onSortChange()}this._onColumnChange("data",e)},_handleColumnIndexChange:function(e){this._onModelChange("index",e)},_onColumnChange:function(e,t){this._callOn("onColumnChange","on.column.change",{type:e,event:t},[e,t])},onColumnChange:function(e,t){this.addListener("on.column.change",e,t)},_updateFixedColumns:function(){var e=this._columnProvider;var t=Ar.getColumnFixedConfig(e);if(this._hasColumnFixed===t.fixed&&this._hasColumnFixedRight===t.fixed_right){return}this._hasColumnFixed=t.fixed;this._hasColumnFixedRight=t.fixed_right;if(this._hasColumnFixed){this._createLeftTables()}else{this._removeFixedTable(this._headLeftTable,this._bodyLeftTable)}if(this._hasColumnFixedRight){this._createRightTables()}else{this._removeFixedTable(this._headRightTable,this._bodyRightTable)}},_createLeftTables:function(){if(!this._headLeftTable){this._headLeftTable=Pr.createFixedHeadView(this)}if(!this._bodyLeftTable){this._bodyLeftTable=this._createBodyView(this._headLeftTable);xr.syncColGroupUpdate(this._headLeftTable,this._bodyLeftTable)}var e=this._headLeftTable.getRoot();if(!e.parentNode){this._headLeftDiv.appendChild(e);this._headLeftTable.setProvider(this._columnProvider)}var t=this._bodyLeftTable.getRoot();if(!t.parentNode){this._bodyLeftDiv.appendChild(t);this._bodyLeftTable.setProvider(this.getProvider())}this._bodyLeftTable.set("sort_compare",this._getSortCompare())},_createRightTables:function(){if(!this._headRightTable){this._headRightTable=Pr.createFixedRightHeadView(this)}if(!this._bodyRightTable){this._bodyRightTable=this._createBodyView(this._headRightTable);xr.syncColGroupUpdate(this._headRightTable,this._bodyRightTable)}var e=this._headRightTable.getRoot();if(!e.parentNode){this._headRightDiv.appendChild(e);this._headRightTable.setProvider(this._columnProvider)}var t=this._bodyRightTable.getRoot();if(!t.parentNode){this._bodyRightDiv.appendChild(t);this._bodyRightTable.setProvider(this.getProvider())}this._bodyRightTable.set("sort_compare",this._getSortCompare())},_removeFixedTable:function(e,t){if(t){we(t.getRoot());t.setProvider(new nt)}if(e){we(e.getRoot());e.setProvider(new nt)}},_createBodyView:function(e,t){return Pr.createBodyView(this,e,t)}},{_onSortChange:function(){this._callBatch(this._onSortBatchChange,"sort_batch_change__cb_")},_onSortBatchChange:function(){var e=this.getSortConfig();if(this.getProperty("sortable")!=="custom"){this._sortBodyData()}this._callOn("onSortChange","on.column.sort.change",e,[e])},_sortBodyData:function(){var e=this._getSortCompare();if(this._hasColumnFixed){this._bodyLeftTable.set("sort_compare",e)}if(this._hasColumnFixedRight){this._bodyRightTable.set("sort_compare",e)}this._bodyCenterTable.set("sort_compare",e)},onSortChange:function(e,t){this.addListener("on.column.sort.change",e,t)},clearSort:function(){tr.clearColumnSort(this._columnProvider)},getSortConfig:function(){var e=tr.getSortedColumnArray(this._columnProvider);if(e.length>0){if(this.getProperty("sort_mode")==="multiple"){var r=[];e.forEach(function(e,t){r.push({field:e.getProperty("field"),order:tr.getSortOrder(e.getProperty("sort")),index:t})});return r}else{var t=e[0];var i=t.getProperty("sort");return{field:t.getProperty("field"),order:tr.getSortOrder(t.getProperty("sort"))}}}return null},_getSortCompare:function(){return tr.getSortCompare(this,this._columnProvider)}},{_doViewPagerUpdate:function(){var e=this.getProperty("pageable");if(e===true){this._addPager()}else if(B(e)){this._addPager(e)}else{this._removePager()}},_addPager:function(e){if(!this._pager){this._pager=new Dr;this._pagerDiv.appendChild(this._pager.getRoot());this._pager.setCallBack("onPageChange",this._onPageChange,this);this._pager.setCallBack("onRefresh",this._onPageRefresh,this)}if(e){this._pager.set(e)}},_removePager:function(){if(this._pager){this._pager.resetCallBack("onPageChange");this._pager.resetCallBack("onRefresh");Pe(this._pagerDiv);this._pager=null}},_onPageChange:function(e){this._callOn("onPageChange","on.page.change",e,[e])},onPageChange:function(e,t){this.addListener("on.page.change",e,t)},_onPageRefresh:function(e){this._callOn("onPageRefresh","on.page.refresh",e,[e])},onPageRefresh:function(e,t){this.addListener("on.page.refresh",e,t)},getPagination:function(){return this._pager},getPageConfig:function(){if(this._pager){return this._pager.getPageConfig()}}},{_onColumnUpdate:function(){this._callBatch(this._doColumnUpdateSync,"_do_column_update_sync_cb_")},_doColumnUpdateSync:function(){this._syncHeadRowHeight();this._bodyCenterTable.update();if(this._hasColumnFixed){this._bodyLeftTable.update()}if(this._hasColumnFixedRight){this._bodyRightTable.update()}},_onBodyUpdate:function(){this._callBatch(this._doBodyUpdateSync,"_do_body_update_sync_cb_")},_doBodyUpdateSync:function(){this._updateLayout();this._syncBodyRowHeight()},_doResizeUpdate:function(){Tr.superClass._doResizeUpdate.apply(this,arguments);this._syncHeadRowHeight();this._syncBodyRowHeight();this._updateLayout()},_updateLayout:function(){this._updateFixedLayout();this._updateFixedRightLayout();this._updateScrollbar()},_updateScrollbar:function(){var e=this.getRoot();var t=this.getRootSize();var r=t.height;var i=Pr.getOffsetHeight(this._headDiv);var n=Pr.getOffsetHeight(this._pagerDiv);var a=Math.floor(r-i-n);var o=t.width;var s=this._headCenterDiv.scrollWidth;var l=s-o>1;if(l){if(!this._hScrollbarDiv.parentNode){e.insertBefore(this._hScrollbarDiv,this._pagerDiv)}a-=Pr.getOffsetHeight(this._hScrollbarDiv)}pe(this._bodyDiv,"margin-top",i+"px");var d=false;if(this.getProperty("overflow")==="scroll"){pe(this._bodyDiv,"height",a+"px");d=Pr.getOffsetHeight(this._bodyCenterDiv)>a}if(d){if(!this._vScrollbarDiv.parentNode){e.appendChild(this._vScrollbarDiv)}o-=this._vScrollbarDiv.offsetWidth-1;pe(this._vScrollbarDiv,"height",a+i+"px");pe(this._vScrollbarHeightDiv,"height",this._bodyDiv.scrollHeight+i+"px");pe(this._headDiv,"width",o+"px");pe(this._bodyDiv,"width",o+"px")}else{we(this._vScrollbarDiv);ge(this._headDiv,"width");ge(this._bodyDiv,"width")}if(l){pe(this._hScrollbarDiv,"width",o+"px");pe(this._hScrollbarHeightDiv,"width",s+"px")}else{we(this._hScrollbarDiv)}},_updateFixedLayout:function(){var e=0;if(this._hasColumnFixed){e=this._headLeftTable._getColGroupWidth();var t=e;if(e>0){t+=1}pe(this._headLeftDiv,"width",t+"px");pe(this._bodyLeftDiv,"width",t+"px")}pe(this._headCenterTableRoot,"padding-left",e+"px");pe(this._bodyCenterTableRoot,"padding-left",e+"px")},_updateFixedRightLayout:function(){var e=0;if(this._hasColumnFixedRight){e=this._headRightTable._getColGroupWidth();var t=e;if(e>0){t+=1}pe(this._headRightDiv,"width",t+"px");pe(this._bodyRightDiv,"width",t+"px")}pe(this._headCenterTableRoot,"padding-right",e+"px");pe(this._bodyCenterTableRoot,"padding-right",e+"px")},_syncHeadRowHeight:function(){var e=[this._headCenterTable];if(this._hasColumnFixed){e.push(this._headLeftTable)}if(this._hasColumnFixedRight){e.push(this._headRightTable)}e.forEach(function(e){var t=e.getRowTRArray();t.forEach(function(e){ge(e,"height")})});if(e.length>1){var r=[];e.forEach(function(e){var t=e.getRowTRArray();t.forEach(function(e,t){r[t]=Math.max(r[t]|0,e.offsetHeight)})});e.forEach(function(e){var t=e.getRowTRArray();t.forEach(function(e,t){pe(e,"height",r[t]+"px")})})}},_syncBodyRowHeight:function(){var e=[this._bodyCenterTable];if(this._hasColumnFixed){e.push(this._bodyLeftTable)}if(this._hasColumnFixedRight){e.push(this._bodyRightTable)}var i=[];e.forEach(function(e,t){var r=se("tr[__z_did_]",e._tableBody);i[t]=r;r.forEach(function(e){ge(e,"height")})});if(e.length>1){var r=[];i.forEach(function(e){e.forEach(function(e,t){r[t]=Math.max(r[t]|0,e.offsetHeight)})});i.forEach(function(e){e.forEach(function(e,t){pe(e,"height",r[t]+"px")})})}}},{_syncBodyVScroll:function(){this._bodyDiv.scrollTop=this._vScrollbarDiv.scrollTop},_syncBodyHScroll:function(){this._headCenterDiv.scrollLeft=this._hScrollbarDiv.scrollLeft;this._bodyCenterDiv.scrollLeft=this._hScrollbarDiv.scrollLeft},_syncVScrollByBody:function(){this._vScrollbarDiv.scrollTop=this._bodyDiv.scrollTop}},{_getCellValue:function(e,t){return this.getCellValue(e,t)},getCellValue:function(e,t){return or.getCellValue(e,t)}},{_onControllerChange:function(e){if(e==="set"){this._toggleHoverController()}},_toggleHoverController:function(){It.toggleHoverController(this,this.getProperty("hoverable")===true||this.getProperty("select_on_hover")===true)},getDataAt:function(e){var t=A.getEventTarget(e,"[__z_did_]");if(t){var r=t.getAttribute("__z_did_");return j(this.getDataArray(false),function(e){return e.id()===r})}return null}},Ft(Tr),{_onHoverChange:function(e,t){this._updateBodyData(e);this._callOn("onHoverChange","on.hover.change",{data:e,isHover:t},[e,t])}},{check:function(e,t){return this._bodyCenterTable.check.apply(this._bodyCenterTable,arguments)},uncheck:function(e){return this._bodyCenterTable.uncheck.apply(this._bodyCenterTable,arguments)},addCheck:function(e){return this._bodyCenterTable.addCheck.apply(this._bodyCenterTable,arguments)},removeCheck:function(e){return this._bodyCenterTable.removeCheck.apply(this._bodyCenterTable,arguments)},clearCheck:function(){return this._bodyCenterTable.clearCheck.apply(this._bodyCenterTable,arguments)},setCheck:function(e){return this._bodyCenterTable.setCheck.apply(this._bodyCenterTable,arguments)},checkAll:function(e){return this._bodyCenterTable.checkAll.apply(this._bodyCenterTable,arguments)},toggleCheck:function(e){return this._bodyCenterTable.toggleCheck.apply(this._bodyCenterTable,arguments)},getChecked:function(e){return this._bodyCenterTable.getChecked.apply(this._bodyCenterTable,arguments)},isChecked:function(e){return this._bodyCenterTable.isChecked.apply(this._bodyCenterTable,arguments)},isCheckable:function(e){return this._getDataViewProperty(e,"checkable")!==false},_onCheckChange:function(e){this._callOn("onCheckChange","on.check.change",e,[e])},onCheckChange:function(e,t){this.addListener("on.check.change",e,t)}},{isSelectable:function(e){return this._getDataViewProperty(e,"selectable")===true},select:function(e,t){return this._bodyCenterTable.select.apply(this._bodyCenterTable,arguments)},unselect:function(e){return this._bodyCenterTable.unselect.apply(this._bodyCenterTable,arguments)},addSelect:function(e){return this._bodyCenterTable.addSelect.apply(this._bodyCenterTable,arguments)},removeSelect:function(e){return this._bodyCenterTable.removeSelect.apply(this._bodyCenterTable,arguments)},clearSelect:function(){return this._bodyCenterTable.clearSelect.apply(this._bodyCenterTable,arguments)},setSelect:function(e){return this._bodyCenterTable.setSelect.apply(this._bodyCenterTable,arguments)},selectAll:function(e){return this._bodyCenterTable.selectAll.apply(this._bodyCenterTable,arguments)},getSelected:function(e){return this._bodyCenterTable.getSelected.apply(this._bodyCenterTable,arguments)},getLastSelected:function(){return this._bodyCenterTable.getLastSelected.apply(this._bodyCenterTable,arguments)},isSelected:function(e){return this._bodyCenterTable.isSelected.apply(this._bodyCenterTable,arguments)},_onSelectChange:function(e){this._callOn("onSelectChange","on.select.change",e,[e])},onSelectChange:function(e,t){this.addListener("on.select.change",e,t)},_onSelectBatchChange:function(e){this._callOn("onSelectBatchChange","on.select.batch.change",e,[e]);if(e.length>0){if(this.getProperty("make_visible_on_select")===true){this.makeVisible(this.getLastSelected())}}},onSelectBatchChange:function(e,t){this.addListener("on.select.batch.change",e,t)}},{}));var Er={createBodyView:function(t,e,r){var i=new dr(q(Pr.getBodyOverridingMethods(t),{isTreeColumn:function(e){return t._isTreeColumn(e)},hasChildrenVisible:function(e){if(t.hasChildrenVisible){return t.hasChildrenVisible(e)}return dr.prototype.hasChildrenVisible.apply(this,arguments)}}));Pr._onBodyViewChange(t,i);if(r!==false){Pr.initBodyViewShareProperty(t,i)}i.setTableHead(e);return i},bubblingBodyEventToGrid:function(t){var e=t._bodyCenterTable;e.onExpand(function(e){t._onExpandAdd.apply(t,arguments)});e.onCollapse(function(e){t._onExpandRemove.apply(t,arguments)});e.onCollapseAll(function(e){t._onExpandClear.apply(t,arguments)});e.onExpandSet(function(e){t._onExpandSet.apply(t,arguments)});e.onExpandChange(function(e){t._onExpandChange.apply(t,arguments)})},syncBodyViewExpand:function(e,t,r){if(t._$is_body_expand_syncing===true){return}var i=r.type;if(i==="add"){e._onExpandAdd(r.data)}else if(i==="remove"){e._onExpandRemove(r.data)}else if(i==="clear"){e._onExpandClear(r.data)}else if(i==="set"){e._onExpandSet(r.data)}e._onExpandChange(r);var n=[];if(e._bodyCenterTable!==t){n.push(e._bodyCenterTable)}if(e._hasColumnFixed){if(e._bodyLeftTable!==t){n.push(e._bodyLeftTable)}}if(e._hasColumnFixedRight){if(e._bodyRightTable!==t){n.push(e._bodyRightTable)}}if(n.length>0){n.forEach(function(e){e._$is_body_expand_syncing=true});var a=r.data;if(i==="add"){n.forEach(function(e){e.expand(a)})}else if(i==="remove"){n.forEach(function(e){e.collapse(a)})}else if(i==="clear"){n.forEach(function(e){e.collapseAll()})}else if(i==="set"){}n.forEach(function(e){delete e._$is_body_expand_syncing})}}};var Sr=function(){if(!(this instanceof Sr)){return m.createInstance(Sr,arguments)}var e=arguments[0];if(w.isElement(e)){return Ot.parseView("zw-treegrid",e)}Sr.superClass.constructor.apply(this,arguments);Er.bubblingBodyEventToGrid(this);de(this.getRoot(),"z-treegrid")};ee(Sr,Tr,{__className_:"TreeGrid",___zdefaults_:q(wt()),_createBodyView:function(e,t){return Er.createBodyView(this,e,t)},_beforeSetColumnProvider:function(e){Sr.superClass._beforeSetColumnProvider.apply(this,arguments);var t=e.find(function(e){return e.getProperty("tree")===true&&!e.hasChildren()});if(!t){t=e._checkColumn;if(!t){t=e.find(function(e){return!e.hasChildren()})}}e._treeColumn=t},_isTreeColumn:function(e){if(e){return this._columnProvider._treeColumn===e}return false},makeVisible:function(e){if(e){var t=vt.getAncestorArray(e);t.forEach(function(e){this.expand(e)},this);Sr.superClass.makeVisible.apply(this,arguments)}},expand:function(e){return this._bodyCenterTable.expand.apply(this._bodyCenterTable,arguments)},collapse:function(e){return this._bodyCenterTable.collapse.apply(this._bodyCenterTable,arguments)},expandAll:function(e){return this._bodyCenterTable.expandAll.apply(this._bodyCenterTable,arguments)},collapseAll:function(){return this._bodyCenterTable.collapseAll.apply(this._bodyCenterTable,arguments)},toggleExpand:function(e){return this._bodyCenterTable.toggleExpand.apply(this._bodyCenterTable,arguments)},isExpanded:function(e){return this._bodyCenterTable.isExpanded.apply(this._bodyCenterTable,arguments)},_onExpandAdd:function(e){this._callOn("onExpand","on.expand.add",e,[e])},onExpand:function(e,t){this.addListener("on.expand.add",e,t)},_onExpandRemove:function(e){this._callOn("onCollapse","on.expand.remove",e,[e])},onCollapse:function(e,t){this.addListener("on.expand.remove",e,t)},_onExpandClear:function(e){this._callOn("onCollapseAll","on.expand.clear",e,[e])},onCollapseAll:function(e,t){this.addListener("on.expand.clear",e,t)},_onExpandSet:function(e){this._callOn("onExpandSet","on.expand.set",e,[e])},onExpandSet:function(e,t){this.addListener("on.expand.set",e,t)},_onExpandChange:function(e){this._callOn("onExpandChange","on.expand.change",e,[e])},onExpandChange:function(e,t){this.addListener("on.expand.change",e,t)}});var Lr={ROOT_POP_DIRECTION_MAP:{down:"down_right",down_right:"down_right",down_left:"down_left",up:"up_right",up_right:"up_right",up_left:"up_left",right:"right_down",right_down:"right_down",right_up:"right_up",left:"left_down",left_down:"left_down",left_up:"left_up",default:"down_right"},SUB_POP_DIRECTION_MAP:{down:"right_down",down_right:"right_down",down_left:"left_down",up:"right_up",up_right:"right_up",up_left:"left_up",right:"right_down",right_down:"right_down",right_up:"right_up",left:"left_down",left_down:"left_down",left_up:"left_up",default:"right_down"},getPopDirection:function(e,t){var r=e.getProperty("direction");if(r==null){if(e._isVertical()){r="right"}else{r="bottom"}}else{r=r.toLowerCase()}if(Lr.isRootMenu(t)){return Lr.ROOT_POP_DIRECTION_MAP[r]||Lr.ROOT_POP_DIRECTION_MAP["default"]}return Lr.SUB_POP_DIRECTION_MAP[r]||Lr.SUB_POP_DIRECTION_MAP["default"]},isRootMenu:function(e){return e.getProperty("parent")==null},getMenuExpandExpandedTemplate:function(e){if(Lr.isRootMenu(data)){return view._renderConfig["root"]}}};var Vr=function(){Vr.superClass.constructor.apply(this,arguments)};ee(Vr,ft,{getViewDefaultTypes:function(){return["blur","click"]},handle_blur:function(){this.getView().collapseAll()},handle_click:function(e){var t=this.getView();if(!t.getDataAt(e)){t.collapseAll();t.setHoverData(null)}},add:function(e){Vr.superClass.add.apply(this,arguments);this.getView().getRoot().setAttribute("tabindex",0)},remove:function(){this.getView().getRoot().removeAttribute("tabindex");Vr.superClass.remove.apply(this,arguments)}});var Mr=function(){Mr.superClass.constructor.apply(this,arguments)};ee(Mr,Zt,{updateRenderConfig:function(e,t,r){var i=e.isDivider(t);if(i){r["divider"]=true}else{Mr.superClass.updateRenderConfig.apply(this,arguments);this._updateMenuRenderConfig(e,t,r)}},_updateMenuRenderConfig:function(e,t,r){var i=Lr.isRootMenu(t);r["root_menu"]=i;if(this.getRenderConfig("has_children")===true){r["pop_direction"]=Lr.getPopDirection(e,t);if(i){var n=e.getDataRenderProperty(t,"expand_icon_visible");if(n!=null){r["expand_icon_visible"]=n}else{r["expand_icon_visible"]=this.getViewRenderConfig("root_expand_icon_visible")}}}},updateRenderer:function(e,t,r){var i=this.getRenderConfig("divider")===true;fe(this._renderer,"divider",i);if(!i){Mr.superClass.updateRenderer.apply(this,arguments);he(this._renderer,"down_right down_left up_right up_left right_down right_up left_down left_up");var n=this.getRenderConfig("pop_direction");if(n){de(this._renderer,n)}fe(this._renderer,this.getRenderConfig("root_menu")===true&&this.getRenderConfig("expand_icon_visible")===true)}},_getExpandTemplate:function(){var e;var t=this.getRenderConfig("expanded")===true;if(this.getRenderConfig("root_menu")===true){if(t){e=this.getViewRenderConfig("root_expand_expanded_icon_template")}else{e=this.getViewRenderConfig("root_expand_collapsed_icon_template")}if(!e){var r=this.getRenderConfig("pop_direction");if(r){e=this.getViewRenderConfig("expand_"+r.split("_")[0]+"_icon_template")}}}else{if(t){e=this.getViewRenderConfig("expand_expanded_icon_template")}else{e=this.getViewRenderConfig("expand_collapsed_icon_template")}if(!e){e=this.getViewRenderConfig("expand_right_icon_template")}}return e}});var Ir=function(){if(!(this instanceof Ir)){return m.createInstance(Ir,arguments)}var e=arguments[0];if(w.isElement(e)){return Ot.parseView("zw-menu",e)}Ir.superClass.constructor.apply(this,arguments);de(this.getRoot(),"z-menu");this._ToggleModeClass();this._addMenuController()};ee(Ir,Yt,q({__className_:"Menu",___zdefaults_:{selectable:false,expand_on_click:false,accordion:true,hoverable:true,three_states_check:false,check_on_click:true,hover_delay:200,mode:"horizontal",direction:null,root_expand_icon_visible:false,root_expand_expanded_icon_template:null,root_expand_collapsed_icon_template:null,expand_icon_visible:true,expand_expanded_icon_template:null,expand_collapsed_icon_template:null,expand_up_icon_template:bt.to_up,expand_down_icon_template:bt.to_down,expand_left_icon_template:bt.to_left,expand_right_icon_template:bt.to_right,open_on_hover:false,close_on_click:true},_displayToResize:function(){Ir.superClass._displayToResize.apply(this,arguments);var e=this.getRoot().parentNode;if(e){pe(e,"overflow","visible")}},_onViewChange:function(e,t,r){Ir.superClass._onViewChange.apply(this,arguments);this._doMenuViewUpdate(e)},_doMenuViewUpdate:function(e,t,r){if(e==="mode"){this._ToggleModeClass()}},_ToggleModeClass:function(){fe(this.getRoot(),"horizontal",!this._isVertical());fe(this.getRoot(),"vertical",this._isVertical())},_isVertical:function(){return this.getProperty("mode")==="vertical"},_onExpandChange:function(){Ir.superClass._onExpandChange.apply(this,arguments);if(this._hasExpanded()){this.getRoot().focus({preventScroll:true})}},_setHoverData:function(){var e=this._hoverData;Ir.superClass._setHoverData.apply(this,arguments);var t=this._hoverData;if(e===t){return}this._handleExpandByHover(e,t)},_handleExpandByHover:function(e,t){if(t){var r=Lr.isRootMenu(t);var i=this._hasExpanded();if(e){if(this.isExpanded(e)&&!vt.isDescendantOf(t,e)){if(r&&Lr.isRootMenu(e)){if(this.isExpandable(t)&&this._hasDescendantVisible(t)||this.getProperty("open_on_hover")!==false){this.collapse(e)}}else{this.collapse(e)}}}if(r){if(!i&&this.getProperty("open_on_hover")===false){return}}this._expandByHover(t)}else{if(e){if(this.isExpanded(e)){if(Lr.isRootMenu(e)){if(this.getProperty("open_on_hover")===false){return}}this.collapse(e)}}}},_expandByHover:function(e){if(this.isExpandable(e)&&this._hasDescendantVisible(e)){var t=this.getProperty("hover_delay");if(!Lr.isRootMenu(e)&&t>0){re(function(){if(this._hoverData){this.expand(this._hoverData)}},t,this)}else{this.expand(e)}}},_onDataClick:function(e,t){if(Lr.isRootMenu(e)){if(!this._isExpandable(e)){this.collapseAll()}else{this.toggleExpand(e)}}else{if(this.getProperty("close_on_click")!==false&&!this.hasChildrenVisible(e)){this.collapseAll()}}if(!this.hasChildrenVisible(e)){this._onMenuItemClick(e,t)}Ir.superClass._onDataClick.apply(this,arguments)},_onMenuItemClick:function(e,t){this._callOn("onMenuItemClick","on.menu.item.click",{data:e,event:t},[e,t])},onMenuItemClick:function(e,t){this.addListener("on.menu.item.click",e,t)},_hasExpanded:function(){return this._expandProvider.size()>0},getDataRendererClass:function(e){return Mr},_onControllerChange:function(e){Ir.superClass._onControllerChange.apply(this,arguments);if(e==="set"){this._addMenuController()}},_addMenuController:function(){if(!this._menuController){this._menuController=new Vr}this.addController(this._menuController)},isDivider:function(e){return e.getProperty("divider")===true}},{_isAccordion:function(){return true},_isDisabled:function(e){return this.isDivider(e)||this.isDisabled(e)},makeVisible:function(){}}));var zr={_CachedPopUpViewMap:{},addCacheView:function(e){var t=e.getClassName();var r=zr._CachedPopUpViewMap[t];if(!r){r=[];zr._CachedPopUpViewMap[t]=r}r.push(e)},removeCacheView:function(e){var t=e.getClassName();var r=zr._CachedPopUpViewMap[t];if(r){r.__z_remove(e)}},closeAll:function(e){$([],zr._CachedPopUpViewMap[e]).forEach(function(e){e.close()})},z_index:1e4,open:function(e,t){zr.addCacheView(e);this.completeAnimations(e);var r=e.getRoot();e._beforeOpen();var i=ve(r,"opacity");pe(r,"opacity",0);pe(r,"left","-10100px");zr.resetStaticPosition(t);t.appendChild(r);ne(function(){zr.startAnimations(e);pe(r,"opacity",i);if(ve(r,"left")==="-10100px"){ge(r,"left")}e._onOpen()})},_getAnimationEle:function(e){var t=e._bodyDiv;if(t&&t.parentNode){return e.getRoot()}return e._getContentEle()},completeAnimations:function(e){zt.completeAnimation(zr._getAnimationEle(e));zt.completeAnimation(e._maskDiv)},startAnimations:function(t,r){zr._startMaskAnimations(t,r);var e=zr._getAnimationEle(t);if(!e){return}var i;if(r===true){i=t.getProperty("close_animation")}else{i=t.getProperty("open_animation")}var n=t.getRoot();n.scrollLeft=0;n.scrollTop=0;zt.startAnimation(e,i,function(){if(r===true){if(t.getProperty("release_on_close")===true){var e=t._currentContentObj;if(e&&n.contains(e.contentEle)){kt.releaseContent(e)}}we(n)}})},_startMaskAnimations:function(e,t){var r=e._maskDiv;if(!r){return}var i=t===true?e.getProperty("mask_close_animation"):e.getProperty("mask_open_animation");zt.startAnimation(r,i,function(){if(t===true){we(r)}})},isOpen:function(e){return e&&e.getRoot().parentNode},close:function(e){var t=e.beforeClose();if(t===false){return}if(N(t)){t(function(){zr._doClose(e)})}else{zr._doClose(e)}},_doClose:function(e){zr.removeCacheView(e);this.completeAnimations(e);zr.startAnimations(e,true);e._beforeClose();e._onClose();e._afterClose()},setPosition:function(r,i){ge(r,"left");["left","right","top","bottom"].forEach(function(e){var t=i[e];if(t!=null){pe(r,e,t+"px")}else{ge(r,e)}})},resetStaticPosition:function(e){if(ve(e,"position")==="static"){pe(e,"position","relative")}},addDismissListener:function(e,t,r){if(!e){return}var i=se("[data-dismiss="+r+"]",e);i.forEach(function(e){ke(e,"click",t.close,t)})},removeDismissListener:function(e,t,r){if(!e){return}var i=se("[data-dismiss="+r+"]",e);i.forEach(function(e){Te(e,"click",t.close,t)})}};var Or={DIRECTION_CLASS_MAP:{right:"to-right",right_down:"to-right-down",right_up:"to-right-up",left:"to-left",left_down:"to-left-down",left_up:"to-left-up",up:"to-up",up_right:"to-up-right",up_left:"to-up-left",down:"to-down",down_right:"to-down-right",down_left:"to-down-left"},POSITION_CLASS_MAP:{top_right:"top-right",top_left:"top-left",bottom_right:"bottom-right",bottom_left:"bottom-left",center:"center"},POSITION_DIRECTION_MAP:{top_left:"down",top_right:"down",bottom_left:"up",bottom_right:"up"},setDirectionClass:function(e,t,r){he(e,Or.ALL_DIRECTION_CLASS);de(e,Or.DIRECTION_CLASS_MAP[t]||r)},setPositionClass:function(e,t,r){he(e,Or.ALL_POSITION_CLASS);de(e,Or.POSITION_CLASS_MAP[t]||r)},getScreenCenterDirection:function(e){var t=e.getBoundingClientRect();var r=t.left+t.width/2;var i=t.top+t.height/2;var n=P.getWindowSize();var a=n.width;var o=n.height;if(r<a/3){if(i<o/3){return"right_down"}if(i>o*2/3){return"right_up"}return"right"}if(r>a*2/3){if(i<o/3){return"left_down"}if(i>o*2/3){return"left_up"}return"left"}if(i<o/3){return"down"}if(i>o*2/3){return"up"}return"down"},getStackPosition:function(e,t,r,i,n,a,o){switch(i){case"top_left":return Or._getTopLeftStackPosition(e,t,r,n,a,o);case"bottom_left":return Or._getBottomLeftStackPosition(e,t,r,n,a,o);case"bottom_right":return Or._getBottomRightStackPosition(e,t,r,n,a,o);default:return Or._getTopRightStackPosition(e,t,r,n,a,o)}},_getTopRightStackPosition:function(e,t,r,i,n,a){i=Or.getPositionDirection("top_right",i);var o=Or.DIRECTION_CLASS_MAP[i];var s;if(r){s=se("."+e+".top-right."+o,r)}else{s=se("."+e+".top-right."+o)}var l=s[s.length-1];if(!l){return{top:n,right:n}}var d=t.offsetWidth;var h=t.offsetHeight;var c=parseInt(ve(l,"top"))|0;var u=parseInt(ve(l,"right"))|0;var f=l.offsetWidth;var _=l.offsetHeight;var p,v;switch(i){case"left":p=c;v=u+f+a;break;case"right":p=c;v=u-a-d;break;case"up":p=c-a-h;v=n;break;default:p=c+_+a;v=n;break}return{top:p,right:v}},_getBottomRightStackPosition:function(e,t,r,i,n,a){i=Or.getPositionDirection("bottom_right",i);var o=Or.DIRECTION_CLASS_MAP[i];var s;if(r){s=se("."+e+".bottom-right."+o,r)}else{s=se("."+e+".bottom-right."+o)}var l=s[s.length-1];if(!l){return{bottom:n,right:n}}var d=t.offsetWidth;var h=t.offsetHeight;var c=parseInt(ve(l,"bottom"))|0;var u=parseInt(ve(l,"right"))|0;var f=l.offsetWidth;var _=l.offsetHeight;var p,v;switch(i){case"left":p=c;v=u+f+a;break;case"right":p=c;v=u-a-d;break;case"down":p=c-a-h;v=n;break;default:p=c+_+a;v=n;break}return{bottom:p,right:v}},_getTopLeftStackPosition:function(e,t,r,i,n,a){i=Or.getPositionDirection("top_left",i);var o=Or.DIRECTION_CLASS_MAP[i];var s;if(r){s=se("."+e+".top-left."+o,r)}else{s=se("."+e+".top-left."+o)}var l=s[s.length-1];if(!l){return{top:n,left:n}}var d=t.offsetWidth;var h=t.offsetHeight;var c=parseInt(ve(l,"top"))|0;var u=parseInt(ve(l,"left"))|0;var f=l.offsetWidth;var _=l.offsetHeight;var p,v;switch(i){case"left":p=c;v=u-d-a;break;case"right":p=c;v=u+f+a;break;case"up":p=c-a-h;v=n;break;default:p=c+_+a;v=n;break}return{top:p,left:v}},_getBottomLeftStackPosition:function(e,t,r,i,n,a){i=Or.getPositionDirection("bottom_left",i);var o=Or.DIRECTION_CLASS_MAP[i];var s;if(r){s=se("."+e+".bottom-left."+o,r)}else{s=se("."+e+".bottom-left."+o)}var l=s[s.length-1];if(!l){return{bottom:n,left:n}}var d=t.offsetWidth;var h=t.offsetHeight;var c=parseInt(ve(l,"bottom"))|0;var u=parseInt(ve(l,"left"))|0;var f=l.offsetWidth;var _=l.offsetHeight;var p,v;switch(i){case"left":p=c;v=u-d-a;break;case"right":p=c;v=u+a+f;break;case"down":p=c-a-h;v=n;break;default:p=c+_+a;v=n;break}return{bottom:p,left:v}},getPositionDirection:function(e,t){return t||Or.POSITION_DIRECTION_MAP[e]||"down"}};Or.ALL_DIRECTION_CLASS=Z(Or.DIRECTION_CLASS_MAP).join(" ");Or.ALL_POSITION_CLASS=Z(Or.POSITION_CLASS_MAP).join(" ");var Ur={hostPopup:function(e,t,r,i){i=q({},kt.getLabelContent(i));var n=kt.getContentElement(i.content);if(n&&!i.hasOwnProperty("release_on_close")){i.release_on_close=true}var a=new e(i);ne(function(){a.open(r)});if(n){zr.addDismissListener(n,a,t);a._afterClose=function(){zr.removeDismissListener(n,a,t)}}return a},open:function(e,t,r,i,n){if(i==="screen_center"){i=Or.getScreenCenterDirection(r)}Or.setDirectionClass(t,i,"to-top");var a=document.body;zr.open(e,a);Ur._positionOnHost(a,t,r,i,n)},_positionOnHost:function(e,t,r,i,n){var a=t.offsetWidth;var o=t.offsetHeight;var s=P.getElementPageOffset(r);var l=s.x;var d=s.y;var h=r.offsetWidth;var c=r.offsetHeight;var u=0;var f=0;var _=B(n);if(_){u=n.x|0;f=n.y|0}else{u=n|0;f=n|0}var p,v;switch(i){case"right":v=d+c/2-o/2;p=l+h;if(!_){f=0}break;case"right_down":v=d;p=l+h;if(!_){f=0}break;case"right_up":v=d+c-o;p=l+h;if(!_){f=0}break;case"left":v=d+c/2-o/2;p=l-a;if(!_){f=0;u=-u}break;case"left_down":v=d;p=l-a;if(!_){f=0;u=-u}break;case"left_up":v=d+c-o;p=l-a;if(!_){f=0;u=-u}break;case"up_right":v=d-o;p=l;if(!_){u=0;f=-f}break;case"up_left":v=d-o;p=l+h-a;if(!_){u=0;f=-f}break;case"down":v=d+c;p=l+h/2-a/2;if(!_){u=0}break;case"down_right":v=d+c;p=l;if(!_){u=0}break;case"down_left":v=d+c;p=l+h-a;if(!_){u=0}break;default:v=d-o;p=l+h/2-a/2;if(!_){u=0;f=-f}break}var g=P.getElementPageOffset(e);pe(t,"left",p+u-g.x+"px");pe(t,"top",v+f-g.y+"px")}};var Br=function(){Br.superClass.constructor.apply(this,arguments)};ee(Br,ft,{add:function(e){Br.superClass.add.apply(this,arguments);ke(e._closeWrapper,"click",this.handleCloseClick,this)},remove:function(){Te(this._view._closeWrapper,"click",this.handleCloseClick,this);Br.superClass.remove.apply(this,arguments)},handleCloseClick:function(e){e.stopPropagation();this.getView().close()},getViewDefaultTypes:function(){if(this.getView().getProperty("close_on_press_escape")===true){return["click","keydown"]}return["click"]},handle_keydown:function(e){if(e.keyCode===27){if(this.getView().getProperty("close_on_press_escape")===true){this.getView().close()}}},handle_click:function(e){var t=this.getView();if(t.getProperty("close_on_click")===true){e.stopPropagation();t.close()}},getWindowDefaultTypes:function(){var e=[];if(this.getView().getProperty("close_on_click_outside")===true){e.push("click")}if(this.getView().getProperty("close_on_window_blur")===true){e.push("blur")}return e},handle_window_click:function(e){var t=this.getView();if(t.getProperty("close_on_click_outside")!==true){return}var r=t.getRoot();if(oe(".z-widget.popup.open",r)){return}var i=e.target;if(r.contains(i)&&i!==t._maskDiv){return}var n=i.closest(".z-widget.popup.open");if(n&&n!==r){if(!n.contains(r)){return}var a=se(".z-widget.popup.open",n);if(a[a.length-1]!==r){return}}e.stopImmediatePropagation();t.close()},handle_window_blur:function(e){this.getView().close()}});var Nr=function(){this._headerDiv=Re("div","header ");this._bodyDiv=Re("div","body");this._closeWrapper=Re("span","close");Nr.superClass.constructor.apply(this,arguments);var e=this.getRoot();Tt.addWidgetClass(e);de(e,"popup");e.appendChild(this._headerDiv);e.appendChild(this._bodyDiv)};ee(Nr,st,q({___zdefaults_:{close_icon_visible:false,close_icon_template:Dt.remove,close_on_click:false,mask_visible:false,release_on_close:false,close_on_click_outside:false,close_on_window_blur:false,close_on_press_escape:false,auto_focus:true,open_animation:null,close_animation:null,mask_open_animation:"z-animation-fadeIn",mask_close_animation:"z-animation-fadeOut"},_appendToUpdate:function(){},open:function(){},_beforeOpen:function(){this._initPopUpView()},_onOpen:function(){de(this.getRoot(),"open");if(!this._popUpController){this._popUpController=new Br}else{this.removeController(this._popUpController)}this.addController(this._popUpController);this._callOn("onOpen","on.open",{type:"open"},[])},onOpen:function(e,t){this.addListener("on.open",e,t)},close:function(){zr.close(this)},beforeClose:function(){},_beforeClose:function(){he(this.getRoot(),"open")},_onClose:function(){if(this._popUpController){this.removeController(this._popUpController)}this._callOn("onClose","on.close",{type:"close"},[])},_afterClose:function(){},onClose:function(e,t){this.addListener("on.close",e,t)},_getInsideRoot:function(){return this.getRoot()},getContentContainer:function(){return this._bodyDiv}},{_initPopUpView:function(){this._initPopUpTitle();this._initPopUpMask();this._initPopUpCloseIcon();this._setPopUpContent()},_initPopUpTitle:function(){var e=this.getProperty("title");if(e==null){this._headerDiv.innerHTML=""}else{this._headerDiv.innerHTML=e}},_initPopUpMask:function(){var e=this.getProperty("mask_visible");if(e===true){if(!this._maskDiv){this._maskDiv=Re("div","mask")}var t=this.getRoot();t.insertBefore(this._maskDiv,t.firstChild)}else{if(this._maskDiv){we(this._maskDiv)}}},_initPopUpCloseIcon:function(){var e=this.getProperty("close_icon_visible");if(e===true){this._closeWrapper.innerHTML=this.getProperty("close_icon_template");this.getRoot().appendChild(this._closeWrapper)}else{we(this._closeWrapper)}},_setPopUpContent:function(){var e=kt.getContentObject(this.getProperty("content"));if(e){this.setCurrentContent(e,true);var t=this.getRoot();var r=oe("[autofocus]",t);if(r){a.dom.focus(r,{preventScroll:true});return}if(this.getProperty("auto_focus")===true){a.dom.focus(t,{preventScroll:true})}}},_getContentEle:function(){if(this._currentContentObj){return this._currentContentObj.contentEle}return null}},Ut(Nr)));var Hr=function(){Hr.superClass.constructor.apply(this,arguments);var e=this.getRoot();this._arrowDiv=Re("div","arrow");e.insertBefore(this._arrowDiv,e.firstElementChild)};ee(Hr,Nr,{___zdefaults_:{delay:0,direction:"right",offset:2,close_on_click_outside:true,close_on_window_blur:true,auto_focus:false,open_animation:"z-animation-fadeIn",close_animation:"z-animation-fadeOut"},open:function(e){this._cancelLater();e=le(e);if(!e){return}var t=this.getRoot();var r=this.getProperty("delay");if(B(r)){r=r.open|0}else{r=r|0}var i=this.getProperty("direction");var n=this.getProperty("offset");if(r>0){this._laterID=re(function(){Ur.open(this,t,e,i,n)},r,this)}else{Ur.open(this,t,e,i,n)}},_onOpen:function(){this._laterID=null;Hr.superClass._onOpen.apply(this,arguments)},close:function(){this._cancelLater();var e=this.getProperty("delay");if(B(e)){e=e.close|0}else{e=e|0}if(e>0){this._laterID=re(function(){zr.close(this)},e,this)}else{zr.close(this)}},_onClose:function(){this._laterID=null;Hr.superClass._onClose.apply(this,arguments)},_cancelLater:function(){if(this._laterID){l.cancelCallLater(this._laterID);this._laterID=null}}});var $r={TRIGGER_EVENT:{hover:{open:"mouseenter",close:"mouseleave"},focus:{open:"focus",close:"blur"},click:{open:"click",close:"click"}},getTriggerEvent:function(e,t){return $r.TRIGGER_EVENT[e]||$r.TRIGGER_EVENT[t]},clearToggleTrigger:function(e,t){$r._removeToggleTrigger(e,t);$r._removeToggleTrigger(e,t,"close")},_removeToggleTrigger:function(e,t,r){var i="_$z_toggle_"+e;if(r){i+="_"+r}var n=t[i];if(n){Te(t,n.trigger,n.listener);delete t[i]}},onTrigger:function(e,t,r,i,n){ke(t,r,i);var a="_$z_toggle_"+e;if(n){a+="_"+n}t[a]={trigger:r,listener:i}},getToggleItems:function(e,t){var r;if(t.length>0){r=oe(t[0]);if(!r){return}}else{r=document.body}e="zw-"+e;var i=se("[data-toggle="+e+"]",r);if(r.getAttribute("data-toggle")===e){i.unshift(r)}return i}};var Wr={tooltip:function(e,t){return Ur.hostPopup(Fr,"tooltip",e,t)},close:function(){zr.closeAll("Tooltip")},tooltipOn:function(e,t,r){e=le(e);if(!e){return}Wr._tooltipOn(e,t,r)},toggleInit:function(e){$r.getToggleItems("tooltip",arguments).forEach(function(e){Wr._tooltipOn(e,e.getAttribute("data-trigger"),e.getAttribute("data-auto-close")!=="false")})},_tooltipOn:function(e,t,r){$r.clearToggleTrigger("tooltip",e);var i=$r.getTriggerEvent(t,"hover");var n;$r.onTrigger("tooltip",e,i.open,function(){if(zr.isOpen(n)){return}n=Wr._openTooltip(e,n)});if(r!==false){$r.onTrigger("tooltip",e,i.close,function(){if(n){n.close()}},"close")}},_openTooltip:function(e,t){var r=Wr._getConfig(e);if(!r){return t}var i=t==null;t=t||new Fr;t.set(r);ne(function(){t.open(e)});if(i){zr.addDismissListener(kt.getContentElement(t.get("content")),t,"popover")}return t},_getConfig:function(e){var t;if(e.hasAttribute("data-content")){t=e.getAttribute("data-content")}else{t=e.getAttribute("title");if(t){e._tooltip_title=t;e.removeAttribute("title")}else{t=e._tooltip_title}}if(!t){return null}var r;if(e.hasAttribute("data-open-delay")){r={open:e.getAttribute("data-open-delay")|0}}if(e.hasAttribute("data-close-delay")){if(!r){r={open:e.getAttribute("data-close-delay")|0}}else{r.close=e.getAttribute("data-close-delay")|0}}if(!r){r=e.getAttribute("data-delay")|0}return{title:e.getAttribute("data-title"),content:t,direction:e.getAttribute("data-direction")||"right",delay:r,offset:e.getAttribute("data-offset")|0,class:e.getAttribute("data-class"),close_on_click:e.getAttribute("data-close-on-click")==="true"}}};var Fr=function(){if(!(this instanceof Fr)){return m.createInstance(Fr,arguments)}Fr.superClass.constructor.apply(this,arguments);de(this.getRoot(),"z-tooltip")};ee(Fr,Hr,{__className_:"Tooltip"});var jr={popover:function(e,t){return Ur.hostPopup(Gr,"popover",e,t)},close:function(){zr.closeAll("Popover")},popoverOn:function(e,t,r){e=le(e);if(!e){return}jr._popoverOn(e,t,r)},toggleInit:function(e){$r.getToggleItems("popover",arguments).forEach(function(e){jr._popoverOn(e,e.getAttribute("data-trigger"),e.getAttribute("data-auto-close")!=="false")})},_popoverOn:function(e,t,r){$r.clearToggleTrigger("popover",e);var i=$r.getTriggerEvent(t,"click");var n;$r.onTrigger("popover",e,i.open,function(){if(zr.isOpen(n)){return}n=jr._openPopover(e,n)});if(r!==false){$r.onTrigger("popover",e,i.close,function(){if(zr.isOpen(n)){n.close()}},"close")}},_openPopover:function(e,t){var r=jr._getConfig(e);if(!r){return t}var i=t==null;t=t||new Gr;t.set(r);ne(function(){t.open(e)});if(i){zr.addDismissListener(kt.getContentElement(t.get("content")),t,"popover")}return t},_getConfig:function(e){var t=e.getAttribute("data-content");if(!t){return null}return{title:e.getAttribute("data-title"),content:t,direction:e.getAttribute("data-direction")||"right",offset:e.getAttribute("data-offset")|0,class:e.getAttribute("data-class"),close_on_click:e.getAttribute("data-close-on-click")==="true",close_icon_visible:e.getAttribute("data-close-icon-visible")==="true"}}};var Gr=function(){if(!(this instanceof Gr)){return m.createInstance(Gr,arguments)}Gr.superClass.constructor.apply(this,arguments);de(this.getRoot(),"z-popover")};ee(Gr,Hr,{__className_:"Popover"});var qr={loading:function(e,t,r){t=le(t)||document.body;if(arguments[0]===false){if(t._z_loader){t._z_loader.close();delete t._z_loader}else{qr._clearTargetLoader(t)}return}var i=t._z_loader||new Xr;i.set(q({},kt.getLabelContent(e),r));t._z_loader=i;i.open(t);return i},_clearTargetLoader:function(e){var t=C.querySelectorChildren(".z-loader",e);t.forEach(function(e){we(e)})}};var Xr=function(){if(!(this instanceof Xr)){return m.createInstance(Xr,arguments)}this._loadindDiv=Re("div","loading");Xr.superClass.constructor.apply(this,arguments);this._loadindDiv.innerHTML=this.getProperty("loading_icon_template");this._bodyDiv.appendChild(this._loadindDiv);de(this.getRoot(),"z-loader")};ee(Xr,Nr,{__className_:"Loader",___zdefaults_:{loading_icon_template:bt.loader,mask_visible:true},_onViewChange:function(e,t,r){Xr.superClass._onViewChange.apply(this,arguments);if(e==="loading_icon_template"){this._loadindDiv.innerHTML=this.getProperty("loading_icon_template")}},open:function(e){e=le(e)||document.body;var t=this.getRoot();if(e.lastElementChild!==t){zr.open(this,e)}else{this._setPopUpContent()}}});var Jr={notify:function(e,t){if(e===false){zr.closeAll("Notification");return}if(B(t)){e=Jr._getTypeLabel(e,t.type)}var r=new Kr(q({},t,kt.getLabelContent(e)));r.open();return r},_getTypeLabel:function(e,t){e=e==null?"":e+"";if(t){var r=Re("div","ntype "+t);var i=Dt["notify_"+t]||"";if(i){r.innerHTML="<span class='icon'>"+i+"</span> <span>"+e+"</span>"}else{r.innerHTML=e}return r.outerHTML}return e}};var Kr=function(){if(!(this instanceof Kr)){return m.createInstance(Kr,arguments)}Kr.superClass.constructor.apply(this,arguments);de(this.getRoot(),"z-notification")};ee(Kr,Nr,{__className_:"Notification",___zdefaults_:{duration:0,type:"",position:"top_right",direction:null,offset:10,gap:6,close_on_click:true,close_icon_visible:true,auto_focus:false},open:function(){var e=this.getRoot();var t=document.body;var r=this.getProperty("position");var i=this.getProperty("direction");var n=this.getProperty("offset")|0;var a=this.getProperty("gap")|0;zr.open(this,t);var o=Or.getStackPosition("z-notification",e,t,r,i,n,a);zr.setPosition(e,o);var s=Or.getPositionDirection(r,i);Or.setPositionClass(e,r,"top-right");Or.setDirectionClass(e,s,"to-down");var l=this.getProperty("duration")|0;if(l>0){this._laterID=re(this.close,l,this)}},_onClose:function(){this._laterID=null;Kr.superClass._onClose.apply(this,arguments)}});var Yr={modal:function(e,t,r){e=le(e);if(!e){return}if(t===false){var i=e._$z_modal;if(i){Yr._closeModal(e,i)}return}return Yr._openModal(e,t,r)},close:function(e){e=le(e);if(!e){return}var t=e._$z_modal;if(t){Yr._closeModal(e,t)}},_openModal:function(e,t,r){var i=e._$z_modal||new Zr;var n={content:e};if(t){J(t,function(e,t){if(N(t)){i[e]=t}else{n[e]=t}})}i.set(n);i.open(r);if(!e._$z_modal){zr.addDismissListener(e,i,"modal");e._$z_modal=i}return i},_closeModal:function(e,t){t.close();zr.removeDismissListener(e,t,"modal");delete e._$z_modal},modalOn:function(e,t,r){e=le(e);if(!e){return}Yr._modalOn(e,t,r)},toggleInit:function(e){$r.getToggleItems("modal",arguments).forEach(function(e){Yr._modalOn(e,e.getAttribute("data-trigger"),e.getAttribute("data-auto-close")!=="false")})},_modalOn:function(e,t,r){$r.clearToggleTrigger("modal",e);var i=$r.getTriggerEvent(t,"click");var n;$r.onTrigger("modal",e,i.open,function(){if(zr.isOpen(n)){return}n=Yr._openHostModal(n,e)});if(r!==false){$r.onTrigger("modal",e,i.close,function(){if(zr.isOpen(n)){n.close()}},"close")}},_openHostModal:function(e,t){var r=Yr._getModalHostConfig(t);if(!r){return e}var i=e==null;e=e||new Zr;e.set(r);ne(function(){e.open()});if(i){zr.addDismissListener(kt.getContentElement(e.get("content")),e,"modal")}return e},_getModalHostConfig:function(e){var t=e.getAttribute("data-content");if(!t){return null}return{title:e.getAttribute("data-title"),content:t,class:e.getAttribute("data-class"),close_on_click:e.getAttribute("data-close-on-click")==="true",close_on_click_outside:e.getAttribute("data-close-on-click-outside")!=="false",close_icon_visible:e.getAttribute("data-close-icon-visible")==="true"}}};var Qr={alert:function(e,t,r,i){return Qr.box("alert",e,t,r,i)},confirm:function(e,t,r,i){return Qr.box("confirm",e,t,r,i)},prompt:function(e,t,r,i){return Qr.box("prompt",e,t,r,i)},box:function(r,i,n,a,o){if(e.Promise){return new Promise(function(e,t){Qr._box(r,i,n,a,o,e,t)})}Qr._box(r,i,n,a,o)},_box:function(e,t,r,i,n,a,o){var s,l;var d=arguments[3];if(B(d)){l=d;s=arguments[4]}else if(N(d)){l=arguments[4];s=d}l=q({confirm_class:D.WIDGET_MESSAGEBOX_CONFIRM_CLASS,cancel_class:D.WIDGET_MESSAGEBOX_CANCEL_CLASS,confirm_text:D.WIDGET_MESSAGEBOX_CONFIRM_TEXT,cancel_text:D.WIDGET_MESSAGEBOX_CANCEL_TEXT},l);var h=false;if(!l.hasOwnProperty("promise")){if((e==="confirm"||e==="prompt")&&s==null){h=true}}else{h=l.promise}var c=e==="prompt";var u=c?null:false;var f=false;var _=Re("div","zw-modal z-message-box "+e+" "+(l.class||""));var p=Re("div","content");if(r!=null){p.innerHTML+="<div class='header'><span class='title'>"+r+"</span></div>"}var v=Re("div","body");v.innerHTML=t;if(c){var g=Re("input",l.input_class||"");g.value=l.value==null?"":l.value;ke(g,"keydown",function(e){if(e.keyCode===13){f=true;u=R.getValue(g);Yr.modal(_,false)}});v.appendChild(g);g.select()}p.appendChild(v);var C=Re("div","footer");var m=Re("button",l.confirm_class);m.setAttribute("data-dismiss","modal");m.innerHTML=l.confirm_text;C.appendChild(m);if(g){g.setAttribute("autofocus",true);g.select()}else{m.setAttribute("autofocus",true)}if(e!=="alert"){var y=Re("button",l.cancel_class);y.setAttribute("data-dismiss","modal");y.innerHTML=l.cancel_text;C.appendChild(y)}p.appendChild(C);_.appendChild(p);ke(m,"click",function(){f=true;if(c){u=R.getValue(g)}else{u=true}});var b={close_on_click_outside:l.close_on_click_outside!==true,close_on_press_escape:true};if(s||a){b.onClose=function(){if(s){s(u)}if(h===true&&a){if(f===true){a(u)}else{o(u)}}}}Yr.modal(_,b)}};var Zr=function(){if(!(this instanceof Zr)){return m.createInstance(Zr,arguments)}Zr.superClass.constructor.apply(this,arguments);we(this._bodyDiv);we(this._headerDiv);de(this.getRoot(),"z-modal")};ee(Zr,Nr,{__className_:"Modal",___zdefaults_:{mask_visible:true,release_on_close:true,close_on_click_outside:true,open_animation:"z-animation-fadeInDown",close_animation:"z-animation-fadeOutUp"},_getInsideRoot:function(){return this._getContentEle()},open:function(e){e=le(e)||document.body;zr.open(this,e)},getContentContainer:function(){return this.getRoot()}});a.widget={ListView:cr,Tabs:fr,Tree:_r,Collapse:vr,Pagination:Dr,Grid:Tr,TreeGrid:Sr,Menu:Ir,Tooltip:Fr,Popover:Gr,Loader:Xr,Notification:Kr,tooltip:Wr.tooltipOn,popover:jr.popoverOn,modal:Yr.modal,alert:Qr.alert,confirm:Qr.confirm,prompt:Qr.prompt,loading:qr.loading,notify:Jr.notify,$interface:{DataContentInterface:Bt}};a.widget.tooltip.init=Wr.toggleInit;a.widget.tooltip.open=Wr.tooltip;a.widget.tooltip.close=Wr.close;a.widget.popover.init=jr.toggleInit;a.widget.popover.open=jr.popover;a.widget.popover.close=jr.close;a.widget.modal.init=Yr.toggleInit;a.widget.modal.on=Yr.modalOn})(window);(function(e,t){var c=e.z;var r=c.$.TypeCheck;var i=c.$.ArrayUtil;var n=c.$.ObjectUtil;var a=c.$.I18nUtil;var o=c.$.ClassUtil;var s=c.$.ArrayMap;var l=c.$.TimeUtil;var d=c.$.Util;var h=c.$.Defaults;var u=c.$.ZObject;var f=c.$.EventDispatcher;var _=c.$.ChangeSupport;var p=c.$.CookieUtil;var v=c.$.LocalStorageUtil;var g=c.$.SessionStorageUtil;var C=c.$.URLUtil;var m=c.$.BrowserUtil;var y=c.$.DomQuery;var b=c.$.DomClass;var D=c.$.DomStyle;var R=c.$.DomValue;var w=c.$.DomType;var P=c.$.DomGeom;var x=c.$.DomUtil;var A=c.$.DomEventUtil;var k=c.$.DomReadyEventUtil;var T=c.$.DomResizeEventUtil;var E=c.$.DomWheelEventUtil;var S=c.$.DomClickEventUtil;var L=c.$.AjaxUtil;var V=c.$.JSONPUtil;var M=Array.prototype.slice;var I=Array.prototype.push;var z=r.isArray;var O=r.isString;var U=r.isBoolean;var B=r.isObject;var N=r.isFunction;var H=r.isNumber;var $=i.merge;var W=i.each;var F=i.filter;var j=i.find;var G=i.removeItem;var q=n.merge;var X=n.deepMerge;var J=n.each;var K=n.filter;var Y=n.getDeepValue;var Q=n.setDeepValue;var Z=n.getValues;var ee=o.extend;var te=l.callBatch;var re=l.callLater;var ie=l.callInterval;var ne=l.callRAFLater;var ae=l.callRAFInterval;var oe=y.querySelector;var se=y.querySelectorAll;var le=y.queryElement;var de=b.add;var he=b.remove;var ce=b.set;var ue=b.contains;var fe=b.toggle;var _e=b.formatClass;var pe=D.setStyle;var ve=D.getStyle;var ge=D.removeStyle;var Ce=D.formatStyle;var me=R.getValue;var ye=R.setValue;var be=w.isElement;var De=w.isTagType;var Re=x.create;var we=x.remove;var Pe=x.empty;var xe=x.appendText;var Ae=x.isInDom;var ke=A.addEventListener;var Te=A.removeEventListener;var Ee=A.addTypeEventListener;var Se=A.removeTypeEventListener;if(c.$.cvs){var Le=c.$.cvs.MathConvexHullUtil;var Ve=c.$.cvs.MathLineUtil;var Me=c.$.cvs.MathPointUtil;var Ie=c.$.cvs.MathRectUtil;var ze=c.$.cvs.MathUtil;var Oe=c.$.cvs.C2dUtil;var Ue=c.$.cvs.C2dTextUtil;var Be=c.$.cvs.C2dPathUtil;var Ne=c.$.cvs.C2dRectShapeUtil;var He=c.$.cvs.C2dGradientUtil;var $e=c.$.cvs.C2dPatternUtil;var We=c.$.cvs.CVSImageUtil;var Fe=ze.toRadians;var je=ze.calcDistance;var Ge=ze.calcAngle;var qe=Oe.set2DAttribute;var Xe=Oe.set2DAttributes;var Je=Oe.saveAndSet2DAttributes;var Ke=Oe.rotateAround;var Ye=Oe.renderPath;var Qe=Be.path;var Ze=He.createDirectionLinearGradient;var et=He.createLinearGradient;var tt=He.createDirectionRadialGradient;var rt=He.createRadialGradient}if(c.$.iview){var it=c.$.iview.Data;var nt=c.$.iview.Provider;var at=c.$.iview.CheckInterface;var ot=c.$.iview.ExpandInterface;var st=c.$.iview.IView;var lt=c.$.iview.IDataView;var dt=c.$.iview.IDataRendererView;var ht=c.$.iview.IDataRenderer;var ct=c.$.iview.IDataElementRendererView;var ut=c.$.iview.IDataElementRenderer;var ft=c.$.iview.IViewController;var _t=c.$.iview.ModelTypeCheck;var pt=c.$.iview.ArgsUtil;var vt=c.$.iview.DataLevelUtil;var gt=c.$.iview.JSONDataParser;var Ct=c.$.iview.HTMLDataParser;var mt=_t.isData;var yt=pt.getSingleObjectArg}q(h,{FORM_VALIDATOR_RULES_ATTRIBUTE:"v-rules",FORM_VALIDATOR_ATTRIBUTE_PREFIX:"v-",FORM_VALIDATOR_MESSAGE_FOR_ATTRIBUTE:"v-message-for",FORM_FORM_MODEL_ATTRIBUTE:"ze-model",FORM_FORM_MODEL_TYPE_ATTRIBUTE:"ze-model-type",FORM_FORM_MODEL_EXCLUDE:"ze-exclude",FORM_FORM_VISIBLE_ATTRIBUTE:"ze-visible",FORM_FORM_HIDDEN_ATTRIBUTE:"ze-hidden",FORM_FORM_DISABLED_ATTRIBUTE:"ze-disabled"});var bt={isVisible:function(e){return ve(e,"display")!=="none"&&ve(e,"visibility")!=="hidden"&&e.offsetWidth>0&&e.offsetHeight>0},show:function(e,t,r){if(t!==true){if(ve(e,"display")==="none"){var i;if(r&&r!=="none"){i=r}else if(e._$z_default_display&&e._$z_default_display!=="none"){i=e._$z_default_display}else{i=""}pe(e,"display",i)}delete e._$z_default_display}else{if(ve(e,"visibility")==="hidden"){var n;if(r&&r!=="hidden"){n=r}else if(e._$z_default_visibility&&e._$z_default_visibility!=="hidden"){n=e._$z_default_visibility}else{n="visible"}pe(e,"visibility",n)}delete e._$z_default_visibility}},hide:function(e,t){if(t!==true){e._$z_default_display=ve(e,"display");pe(e,"display","none")}else{e._$z_default_visibility=ve(e,"visibility");pe(e,"visibility","hidden")}},disable:function(e){e.setAttribute("disabled","")},enable:function(e){e.removeAttribute("disabled")}};var Dt={required:"The field is required",integer:"The field must be an integer",numeric:"The field must contain only numbers",alphanumeric:"The field must only contain alpha-numeric characters",alphanumeric_dash:"The field must only contain alpha-numeric characters, underscores and dashes",alphanumeric_space:"The field must only contain alpha-numeric characters and space characters",email:"The field must be a valid email address",ipv4:"The field must be a valid IP",minlength:"The field must be at least %p characters in length",maxlength:"The field must not exceed %p characters in length",greaterthan:"The field must contain a number greater than %p",lessthan:"The field must contain a number less than %p",equal:"The field must be equal to %p",match:"The field must match %p field"};var Rt={appendMessages:function(t,e,r){if(r===false){return}Rt.clearMessage(t,r);e.forEach(function(e){Rt._appendMessageItem(t,e,r)})},appendMessageItem:function(e,t,r){if(r===false){return}var i=t.element;Rt._removeMessageItem(e,i,r);Rt._appendMessageItem(e,t,r)},_appendMessageItem:function(e,t,r){var i=t.message;var n=t.element;var a=r.message_class;var o=r.invalid_class;var s=r.container;de(n,o);var l;var d;if(s){if(De(s,"UL")||De(s,"OL")){d="li"}else{d="span"}l=Re(d,a)}else{var h=Rt._getMessageEle(n,e,a);if(h){l=h}else{d="span"}}if(d){l=Re(d,a);n._val_msg_ele=l;if(s){s.appendChild(l)}else{c.dom.insertAfter(l,n)}}l.innerHTML=i==null?"":i},removeMessageItem:function(e,t,r){if(r===false){return}Rt._removeMessageItem(e,t,r)},_removeMessageItem:function(e,t,r){var i=r.invalid_class;var n=r.message_class;he(t,i);var a=t._val_msg_ele;if(a){we(a);delete t._val_msg_ele}else{var o=Rt._getMessageEle(t,e,n);if(o){Pe(o)}}},_getMessageEle:function(e,t,r){var i=e.getAttribute("name");var n;if(i){n=le("["+h.FORM_VALIDATOR_MESSAGE_FOR_ATTRIBUTE+"="+i+"]",t)}if(!n){var a=e.nextElementSibling;if(a&&ue(a,r)){n=a}}return n},clearMessage:function(t,r){if(r===false){return}var e=r.container;if(e){Pe(e)}var i="."+r.invalid_class;se(i,t).forEach(function(e){Rt._removeMessageItem(t,e,r)})}};q(Rt,{getMessageText:function(e,t,r){var i;if(e.hasOwnProperty("message")){i=e.message}else if(t){i=Dt[t]}if(i){var n=e.name;i=i.replace("%f",n||"");return i.replace("%p",r||"")}return null},registerMessage:function(e,t){if(B(e)){J(e,function(e,t){Rt._registerMessage(e,t)})}else{Rt._registerMessage(e,t)}},_registerMessage:function(e,t){if(t==null){delete Dt[e]}else{Dt[e]=t}}});var wt={RULE_REGEX:/^(.+?)\[(.+)\]$/,INTEGER:/^-?\d+$/,NUMERIC:/^-?\d*\.?\d+$/,ALPHANUMERIC:/^[a-zA-Z0-9]+$/,ALPHANUMERIC_DASH:/^[a-zA-Z0-9_\-]+$/,ALPHANUMERIC_SPACE:/^[a-zA-Z0-9 ]+$/,MAIL:/^([a-z0-9_\.\+-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,IPV4:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/};var Pt={queryRulesItemEle:function(e,t){var r;if(e.hasOwnProperty("element")){r=e.element}else if(e.hasOwnProperty("selector")){r=le(e.selector,t)}else if(e.hasOwnProperty("id")){r=document.getElementById(e.id)}else if(e.hasOwnProperty("name")){r=le("[name="+e.name+"]",t)}return r},getDomRules:function(e){var t=[];var i=h.FORM_VALIDATOR_ATTRIBUTE_PREFIX;var n=i.length;se("["+h.FORM_VALIDATOR_RULES_ATTRIBUTE+"]",e).forEach(function(e){var r={element:e};J(c.dom.getAttributes(e),function(e,t){if(e==="name"){r[e]=t}if(e.startsWith(i)){r[e.substring(n)]=t}});t.push(r)});return t}};var xt={required:function(e){var t=me(e);if(U(t)){return t===true}if(O(t)){return t.trim()!==""}return t!=null},integer:function(e){return wt.INTEGER.test(me(e))},numeric:function(e){return wt.NUMERIC.test(me(e))},alphanumeric:function(e){return wt.ALPHANUMERIC.test(me(e))},alphanumeric_dash:function(e){return wt.ALPHANUMERIC_DASH.test(me(e))},alphanumeric_space:function(e){return wt.ALPHANUMERIC_SPACE.test(me(e))},email:function(e){return wt.MAIL.test(me(e))},ipv4:function(e){return wt.IPV4.test(me(e))},minlength:function(e,t){var r=me(e);if(O(r)){r=r.trim();return r.length>=t}return false},maxlength:function(e,t){var r=me(e);if(O(r)){r=r.trim();return r.length<=t}return false},greaterthan:function(e,t){var r=me(e);if(!xt._isNumeric(r)){return false}return+r>+xt._getCompareValue(t)},lessthan:function(e,t){var r=me(e);if(!xt._isNumeric(r)){return false}return+r<+xt._getCompareValue(t)},equal:function(e,t){return me(e)===xt._getCompareValue(t)},match:function(e,t){return me(e)===xt._getCompareValue(t)},_isNumeric:function(e){return wt.NUMERIC.test(e)},_getCompareValue:function(e){if(xt._isNumeric(e)){return e}try{var t=le(e)||le("[name="+e+"]");if(t){return me(t)}}catch(e){}return e}};var At={registerRule:function(e,t,r){if(N(t)){xt[e]=t}if(r){Rt.registerMessage(e,r)}},getRulesValMethodArray:function(e){var t=[];if(O(e)){t=e.split("|")}else if(z(e)){t=e}var a=[];t.forEach(function(e){if(O(e)){var t=wt.RULE_REGEX.exec(e);var r,i;if(t){r=t[1];i=t[2]}else{r=e}var n=xt[r];if(n){a.push({rule_name:r,method:n,param:i})}}else if(N(e)){a.push({method:e})}});return a}};var kt={validate:function(e,t,r){e=le(e);if(!e){return[]}var i=kt._getConfig(r);r=i.config;var n=i.msg_config;var a=$(Pt.getDomRules(e),t);var o=kt.doValidate(e,a);Rt.appendMessages(e,o,n);if(r.autofocus!==false){var s=o[0];if(s){re(function(){s.element.focus()},60)}}return o},reset:function(e,t){e=le(e);if(!e){return[]}var r=kt._getConfig(t);t=r.config;var i=r.msg_config;Rt.clearMessage(e,i)},_getConfig:function(e){var t=q({invalid_class:"z-validator-invalid",message_class:"z-validator-message",visible_only:true,autofocus:true},e);return{config:t,msg_config:t.message===false?false:{container:le(t.message_container),invalid_class:t.invalid_class,message_class:t.message_class}}},doValidate:function(i,e,n){var a=[];var o=[];e.forEach(function(e){var t=Pt.queryRulesItemEle(e,i);if(!t){return}if(n!==false&&!bt.isVisible(t)){return}if(o.indexOf(t)>=0){return}var r=kt.doValidateRulesItem(t,e);if(r){a.push(r);o.push(r.element)}});return a},doValidateRulesItem:function(n,a){var o;W(At.getRulesValMethodArray(a.rules),function(e){var t=e.method;var r=e.param;if(t(n,r)===false){var i=e.rule_name;o={reason:i,element:n,message:Rt.getMessageText(a,i,r),rule:a};return false}});return o}};var Tt=function(e,t,r){if(!(this instanceof Tt)){return o.createInstance(Tt,arguments)}this._rules=[];Tt.superClass.constructor.apply(this,[r]);this.set("form",e);if(t){this.set("rules",t)}};ee(Tt,_,{___zdefaults_:{invalid_class:"z-validator-invalid",message_class:"z-validator-message",visible_only:true,autofocus:true},afterSetProperty:function(e,t,r){Tt.superClass.afterSetProperty.apply(this,arguments);switch(e){case"rules":this.reset();this._doRulesUpdate();break;case"form":this.reset();this._doFormUpdate(t);break;case"message":this.reset();break;case"message_container":this.reset();break;case"invalid_class":this.reset();break;case"message_class":this.reset();break;case"visible_only":this.reset();break}},_doFormUpdate:function(e){this.reset();this._setRuleEleChangeListener("off");this._form=le(e);this._doRulesUpdate()},update:function(){if(this._form){this.reset();this._doRulesUpdate()}},_doRulesUpdate:function(){if(!this._form){return}this._setRuleEleChangeListener("off");this._rules=$(Pt.getDomRules(this._form),this.get("rules"));this._setRuleEleChangeListener("on")},_setRuleEleChangeListener:function(i){if(!this._form){return}var n=this._form;var a=[];this._rules.forEach(function(e){var t=Pt.queryRulesItemEle(e,n);if(!t){return}if(a.indexOf(t)>=0){return}a.push(t);var r=this._getChangeEvent(t);if(i==="on"){ke(t,r,this._handleChange,this)}else{Te(t,r,this._handleChange,this)}},this)},_getChangeEvent:function(e){var t=this.getChangeEvent(e);if(t){return t}if(w.isInput(e)){var r=e.getAttribute("type");if(r==null||r==="text"||r==="email"||r==="password"||r==="number"||r==="url"){return"input"}}if(w.isTextArea(e)){return"input"}return"change"},getChangeEvent:function(e){},_handleChange:function(e){if(!this._form){return}var t=e.target;var r=kt.doValidate(this._form,this._rules,this.getProperty("visible_only"));var i=j(r,function(e){return e.element===t});if(i){Rt.appendMessageItem(this._form,i,this._getMessageConfig())}else{Rt.removeMessageItem(this._form,t,this._getMessageConfig())}this._onValidate(r,i,e)},_onValidate:function(e,t,r){this._callOn("onValidate","on.validate",{errors:e,current:t,event:r},[e,t,r])},_callOn:function(e,t,r,i){var n=this[e];if(n===this.constructor.prototype[e]){this.dispatchEvent(t,r)}else{n.apply(this,i)}},onValidate:function(e,t){this.addListener("on.validate",e,t)},_getMessageConfig:function(){if(this.get("message")===false){return false}return{container:le(this.get("message_container")),invalid_class:this.get("invalid_class"),message_class:this.get("message_class")}},reset:function(){if(!this._form){return}Rt.clearMessage(this._form,this._getMessageConfig())},validate:function(){if(!this._form){return}var e=kt.doValidate(this._form,this._rules,this.getProperty("visible_only"));Rt.appendMessages(this._form,e,this._getMessageConfig());if(this.get("autofocus")!==false){var t=e[0];if(t){re(function(){t.element.focus()},60)}}return e},registerRule:function(e,t,r){return At.registerRule(e,t,r)},registerRuleMessage:function(e,t){return Rt.registerMessage(e,t)}});var Et={integer:function(e){if(e==null){return null}e=e.trim();if(!/^-?\d+$/.test(e)){return null}return e|0},array:function(e){if(e==null){return null}return F(e.split(","),function(e){return e.trim()!==""})}};var St={set:function(e,r){if(!B(r)){r={}}J(St._queryModelEleMap(e),function(e,t){var i=Y(r,e);if(i==null){i=""}if(t.length===1){ye(t[0],i)}else{if(z(i)){t.forEach(function(e,t){var r=i[t];if(r==null){r=""}ye(e,r)})}else{t.forEach(function(e){ye(e,i)})}}})},get:function(e,i){var n={};J(St._queryModelEleMap(e),function(e,t){if(i===true){t=F(t,function(e){return!St._isExclude(e)})}var r;if(t.length===1){r=St._getEleValue(t[0])}else{r=[];t.forEach(function(e){r.push(St._getEleValue(e))})}Q(n,e,r)});return n},_isExclude:function(e){return e.hasOwnProperty(h.FORM_FORM_MODEL_EXCLUDE)&&e.getAttribute(h.FORM_FORM_MODEL_EXCLUDE)!=="false"},_queryModelEleMap:function(e){var i={};se("["+h.FORM_FORM_MODEL_ATTRIBUTE+"]",e).forEach(function(e){var t=e.getAttribute(h.FORM_FORM_MODEL_ATTRIBUTE).trim();if(t){var r=i[t];if(!r){r=[];i[t]=r}r.push(e)}});return i},_getEleValue:function(e){var t=me(e);var r=Et[e.getAttribute(h.FORM_FORM_MODEL_TYPE_ATTRIBUTE)];if(r){t=r(t)}return t},clear:function(e){St.set(e)}};var Lt={updateStatus:function(e,t){Lt.updateVisible(e,t);Lt.updateDisable(e,t)},updateVisible:function(e,t){Lt._doUpdate(e,h.FORM_FORM_VISIBLE_ATTRIBUTE,t,function(e,t){if(t===true){bt.show(e)}else{bt.hide(e)}});Lt._doUpdate(e,h.FORM_FORM_HIDDEN_ATTRIBUTE,t,function(e,t){if(t===true){bt.hide(e)}else{bt.show(e)}})},updateDisable:function(e,t){Lt._doUpdate(e,h.FORM_FORM_DISABLED_ATTRIBUTE,t,function(e,t){if(t===true){bt.disable(e)}else{bt.enable(e)}})},_doUpdate:function(e,i,n,a){var t=se("["+i+"]",e);t.forEach(function(e){var t=e.getAttribute(i);if(t){var r=t.replace(/\[.*?\]/g,function(e){var t=e.substr(1,e.length-2);var r=Y(n,t);if(O(r)&&(!r.startsWith("'")&&!r.startsWith('"'))){r="'"+r+"'"}if(r!=null){return r}return r||"''"});a(e,Lt.callCondition(r))}})},callCondition:function(e){return new Function("return "+e).apply({},[])}};var Vt={addFormChangeListener:function(e,t,r){se("["+h.FORM_FORM_MODEL_ATTRIBUTE+"]",e).forEach(function(e){ke(e,"change",t,r)})},removeFormChangeListener:function(e,t,r){se("["+h.FORM_FORM_MODEL_ATTRIBUTE+"]",e).forEach(function(e){Te(e,"change",t,r)})}};var Mt=function(e,t){if(!(this instanceof Mt)){return o.createInstance(Mt,arguments)}Mt.superClass.constructor.apply(this,[t]);this.set("form",e);this._doValidateUpdate();this._updateStatus()};ee(Mt,_,{___zdefaults_:{validate:true},afterSetProperty:function(e,t,r){Mt.superClass.afterSetProperty.apply(this,arguments);switch(e){case"form":this._doFormUpdate(t);break;case"validate":this._doValidateUpdate();break}},update:function(){if(this._form){Vt.removeFormChangeListener(this._form,this._handleFormModelElementChange,this);Vt.addFormChangeListener(this._form,this._handleFormModelElementChange,this);this._updateStatus()}if(this._validator){this._validator.update()}},_doFormUpdate:function(e){if(this._form){Vt.removeFormChangeListener(this._form,this._handleFormModelElementChange,this)}this._form=le(e);if(this._validator){this._validator.set("form",this._form)}if(this._form){Vt.addFormChangeListener(this._form,this._handleFormModelElementChange,this)}},_doValidateUpdate:function(){if(this.getProperty("validate")!==false){if(!this._validator){this._validator=Tt(this._form)}}else if(this._validator){this._validator.set("form",null);delete this._validator}},_handleFormModelElementChange:function(){this._updateStatus()},_updateStatus:function(e){Lt.updateStatus(this._form,q(this._getValue(),e))},_getValue:function(){if(!this._form){return{}}return St.get(this._form)},setValue:function(e){if(!this._form){return}e=q({},e);St.set(this._form,e);this._updateStatus(e);if(this._validator){this._validator.reset()}},getValue:function(e){if(e===false){return this._getValue()}if(!this._form){return null}if(this._validator){var t=this._validator.validate();if(t.length>0){return null}}return St.get(this._form)},clearValue:function(){if(!this._form){return null}St.clear(this._form);this._updateStatus();if(this._validator){this._validator.reset()}},getValidator:function(){return this._validator}});c.form={Validator:Tt,Form:Mt};c.form.Validator.validate=kt.validate;c.form.Validator.reset=kt.reset;c.form.Validator.registerRule=At.registerRule;c.form.Validator.registerRuleMessage=Rt.registerMessage})(window);if(typeof module!=="undefined"&&module.exports){module.exports=z}  
